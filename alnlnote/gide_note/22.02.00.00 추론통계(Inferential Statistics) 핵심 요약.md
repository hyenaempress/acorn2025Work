# 가설검정 및 추론 - 핵심 요약

## 🎯 가설검정의 정의

**가설검정**: 모집단에 대해서 일부 표본을 추출해서 가설을 설정, 그 가설의 타당성을 검증하는 통계적 절차

**또는**: 표본 추출된 자료를 통해 얻어진 값으로 모집단의 모수를 추측하는 작업

---

## 🏢 실제 예시: 건물 키 조사

### 📊 상황 설정
- **모집단**: 한 건물에 드나드는 1,000명
- **표본**: 5층 한 방에 드나드는 40명
- **목표**: 모집단의 평균 키 추정

### 📏 측정 결과 및 추정 방법

#### 🎯 점추정 (Point Estimation)
```python
표본_평균 = 175.0  # cm
모집단_추정값 = 175.0  # cm (단일값)

# 문제점
print("❌ 점추정의 한계:")
print("- 신뢰도(설득력) 떨어짐")
print("- 불확실성 표현 불가")
print("- 단일값으로만 제시")
```

#### 📊 구간추정 (Interval Estimation)  
```python
점추정값 = 175.0
오차범위 = 3.0
구간추정 = (175.0 - 3.0, 175.0 + 3.0)  # (172, 178)

print("✅ 구간추정의 장점:")
print(f"- 추정 범위: {구간추정[0]}cm ~ {구간추정[1]}cm")
print("- 점추정보다 신뢰도 ↑")
print("- 불확실성 고려")
```

---

## 📐 신뢰구간과 유의수준

### 🎯 신뢰구간 범위 (주요 3가지)

| 신뢰수준 | 확률 표현 | 유의수준(α) | 사용 목적 |
|---------|----------|------------|----------|
| **90%** | 0.90 | 0.10 | 일반적 조사 |
| **95%** | 0.95 | 0.05 | **표준 (가장 일반적)** |
| **99%** | 0.99 | 0.01 | 정밀/엄격한 기준 필요 |

### 📊 유의수준(α)의 의미
```python
def significance_level_meaning():
    """유의수준의 직관적 이해"""
    
    interpretations = {
        "α = 0.10": {
            "의미": "10% 오류 허용",
            "해석": "100명 중 10명은 신뢰구간 밖에 있어도 OK",
            "용도": "탐색적 연구, 라면 선호도 조사 등"
        },
        "α = 0.05": {
            "의미": "5% 오류 허용", 
            "해석": "100명 중 5명은 신뢰구간 밖에 있어도 OK",
            "용도": "일반적 연구 (기본값)"
        },
        "α = 0.01": {
            "의미": "1% 오류 허용",
            "해석": "100명 중 1명은 신뢰구간 밖에 있어도 OK", 
            "용도": "의약품 개발, 안전성 검증 등"
        }
    }
    
    for level, info in interpretations.items():
        print(f"\n{level}:")
        for key, value in info.items():
            print(f"   {key}: {value}")

significance_level_meaning()
```

---

## ⚖️ 귀무가설 vs 대립가설

### 🔄 기본 개념

#### 👴 귀무가설 (H₀, Null Hypothesis)
- **특징**: 일반적인 통념, 보수적 입장
- **표현**: H₀
- **의미**: "차이가 없다", "효과가 없다", "관계가 없다"
- **태도**: 현상유지, "우연히 발생한 것"

#### 🚀 대립가설 (H₁, Alternative Hypothesis)  
- **특징**: 새로운 주장, 혁신적 입장
- **표현**: H₁
- **의미**: "차이가 있다", "효과가 있다", "관계가 있다"
- **태도**: 변화 추구, "의미가 있는 현상"

### 🎭 관계의 특성
```python
def hypothesis_relationship():
    """가설 간의 관계"""
    
    print("⚖️ 귀무가설 vs 대립가설")
    print("=" * 35)
    print("🔄 배반관계: 절대 겹치지 않음")
    print("🎯 상호배타적: 하나가 참이면 다른 하나는 거짓")
    print("📊 완전분할: 모든 경우를 다 포함")
    
    # 예시
    examples = {
        "음식점 분량": {
            "H₀": "일인분 = 150g (기존 주장)",
            "H₁": "일인분 ≠ 150g (고객 의혹)"
        },
        "교육 효과": {
            "H₀": "새 교육법 효과 없음",  
            "H₁": "새 교육법 효과 있음"
        },
        "약물 치료": {
            "H₀": "신약 효과 없음",
            "H₁": "신약 효과 있음"
        }
    }
    
    print(f"\n📋 실제 예시:")
    for case, hypotheses in examples.items():
        print(f"\n🔸 {case}:")
        print(f"   {hypotheses['H₀']}")
        print(f"   {hypotheses['H₁']}")

hypothesis_relationship()
```

---

## 🔄 가설검정의 4단계 절차

### 📋 체계적 접근법

```python
def hypothesis_testing_procedure():
    """가설검정 4단계 절차"""
    
    steps = {
        "1단계": {
            "이름": "가설 수립",
            "내용": "H₀와 H₁ 명확히 설정",
            "예시": "H₀: μ = 150, H₁: μ ≠ 150"
        },
        "2단계": {
            "이름": "표본통계량 계산", 
            "내용": "χ², t, F 값 등 계산",
            "예시": "t = (x̄ - μ₀)/(s/√n)"
        },
        "3단계": {
            "이름": "가설 선택 기준 수립",
            "내용": "유의수준(α) 설정",
            "예시": "α = 0.05 (95% 신뢰수준)"
        },
        "4단계": {
            "이름": "가설검정 수행 후 판정",
            "내용": "통계적 의사결정",
            "예시": "H₀ 기각 또는 채택 결정"
        }
    }
    
    print("🔄 가설검정 4단계 절차")
    print("=" * 35)
    
    for step, details in steps.items():
        print(f"\n{step}: {details['이름']}")
        print(f"   📝 내용: {details['내용']}")
        print(f"   💡 예시: {details['예시']}")

hypothesis_testing_procedure()
```

---

## 🛠️ 가설검정 방법 (2가지)

### 1️⃣ 검정통계량 방법 (전통적)

#### 📊 절차
```python
def traditional_method():
    """검정통계량을 이용한 가설검정"""
    
    print("🔧 방법 1: 검정통계량 방법")
    print("=" * 35)
    
    process = [
        "1. 검정통계량 계산 (χ², t, F)",
        "2. 자유도(df)와 유의수준(α) 확인", 
        "3. 분포표에서 임계값 찾기",
        "4. 통계량 vs 임계값 비교",
        "5. 임계값 내부/외부 판단으로 결정"
    ]
    
    for step in process:
        print(f"   {step}")
    
    print(f"\n📊 판정 기준:")
    print("   통계량이 임계값 내부 → H₀ 채택")
    print("   통계량이 임계값 외부 → H₀ 기각")

traditional_method()
```

### 2️⃣ P-value 방법 (현대적, 더 쉬움) ⭐

#### 🎯 절차  
```python
def pvalue_method():
    """P-value를 이용한 가설검정 (권장)"""
    
    print("⚡ 방법 2: P-value 방법 (더 쉬움!)")
    print("=" * 45)
    
    process = [
        "1. 검정통계량 계산",
        "2. P-value 자동 계산 (도구 사용)",
        "3. 유의수준(α)과 P-value 비교",
        "4. 크기 비교로 즉시 판정"
    ]
    
    for step in process:
        print(f"   {step}")
    
    print(f"\n🚦 판정 기준 (간단!):")
    criteria = {
        "P-value > α": {
            "결론": "H₀ 채택 (귀무가설 유지)",
            "의미": "우연히 발생한 것으로 간주",
            "신호": "🟢 기존 생각 유지"
        },
        "P-value < α": {
            "결론": "H₀ 기각 (대립가설 채택)", 
            "의미": "통계적으로 유의한 차이",
            "신호": "🔴 새로운 주장 수용"
        }
    }
    
    for condition, info in criteria.items():
        print(f"\n   {condition}:")
        print(f"   → {info['결론']}")
        print(f"   → {info['의미']}")
        print(f"   → {info['신호']}")

pvalue_method()
```

### 🏆 방법 비교

```python
def method_comparison():
    """두 방법의 비교"""
    
    comparison = {
        "검정통계량 방법": {
            "난이도": "⭐⭐⭐⭐ (어려움)",
            "절차": "복잡 (분포표 필요)",
            "계산": "수동으로 임계값 찾기",
            "현실성": "교육용, 이론 이해"
        },
        "P-value 방법": {
            "난이도": "⭐⭐ (쉬움)",
            "절차": "간단 (자동 계산)",
            "계산": "도구가 자동 처리",
            "현실성": "실무용, 현대 표준"
        }
    }
    
    print("🏆 방법 비교")
    print("=" * 25)
    
    for method, features in comparison.items():
        print(f"\n📊 {method}:")
        for aspect, detail in features.items():
            print(f"   {aspect}: {detail}")
    
    print(f"\n💡 결론: P-value 방법이 훨씬 실용적!")

method_comparison()
```

---

## 🎯 실무 활용 가이드

### 📊 Python 구현 예시

```python
import scipy.stats as stats
import numpy as np

def practical_hypothesis_test():
    """실무에서 사용하는 가설검정"""
    
    # 예시 데이터: 음식점 분량 검증
    print("🥩 실무 예시: 음식점 분량 검증")
    print("=" * 40)
    
    # 1단계: 가설 설정
    print("1️⃣ 가설 설정:")
    print("   H₀: μ = 150g (음식점 주장)")
    print("   H₁: μ ≠ 150g (고객 의혹)")
    
    # 2단계: 데이터 수집 (시뮬레이션)
    np.random.seed(42)
    actual_weights = np.random.normal(145, 8, 30)  # 실제로는 145g
    
    print(f"\n2️⃣ 표본 데이터:")
    print(f"   표본 크기: {len(actual_weights)}개")
    print(f"   표본 평균: {actual_weights.mean():.2f}g")
    print(f"   표본 표준편차: {actual_weights.std(ddof=1):.2f}g")
    
    # 3단계: 가설검정 수행
    mu_0 = 150  # 귀무가설의 모평균
    t_stat, p_value = stats.ttest_1samp(actual_weights, mu_0)
    
    print(f"\n3️⃣ 검정 결과:")
    print(f"   t-통계량: {t_stat:.4f}")
    print(f"   P-value: {p_value:.6f}")
    
    # 4단계: 의사결정
    alpha = 0.05
    print(f"\n4️⃣ 의사결정 (α = {alpha}):")
    
    if p_value < alpha:
        print(f"   🔴 P-value({p_value:.6f}) < α({alpha})")
        print("   → H₀ 기각, H₁ 채택")
        print("   → 고객 주장이 맞다! (150g보다 적게 줌)")
    else:
        print(f"   🟢 P-value({p_value:.6f}) ≥ α({alpha})")
        print("   → H₀ 채택, H₁ 기각") 
        print("   → 음식점 주장이 맞다 (150g 맞게 줌)")

practical_hypothesis_test()
```

### 🏆 핵심 포인트

```python
def key_takeaways():
    """가설검정 핵심 포인트"""
    
    key_points = {
        "🎯 목적": "표본으로 모집단의 특성 추론",
        "📊 방법": "P-value vs 유의수준 비교가 가장 실용적",
        "⚖️ 철학": "기존 통념 vs 새로운 주장의 대결",
        "🔧 도구": "Python/R이 계산을 자동화",
        "💡 핵심": "개념 이해가 도구 활용보다 중요"
    }
    
    print("🏆 가설검정 핵심 포인트")
    print("=" * 35)
    
    for point, description in key_points.items():
        print(f"{point}: {description}")
    
    print(f"\n🎓 성공 공식:")
    print("   이론 이해 + 도구 활용 + 실무 적용 = 통계 마스터!")

key_takeaways()
```

---

## 📚 다음 학습 단계

### 🗺️ 학습 로드맵
- **현재 위치**: 가설검정 기초 ✅
- **다음 단계**: 구체적 검정 방법들
  - t검정 (평균 비교)
  - 카이제곱검정 (독립성, 적합도)
  - ANOVA (여러 그룹 비교)
  - 회귀분석 (관계 분석)

**🎯 축하합니다! 통계적 사고의 핵심인 가설검정을 완벽히 이해했습니다!** 🎉