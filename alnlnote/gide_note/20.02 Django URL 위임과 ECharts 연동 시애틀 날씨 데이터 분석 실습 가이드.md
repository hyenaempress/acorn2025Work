# 20.02 Django URL ìœ„ì„ê³¼ ECharts ì—°ë™ ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„ ì‹¤ìŠµ ê°€ì´ë“œ

## ëª©ì°¨
1. [ì‹¤ìŠµ ê°œìš”](#ì‹¤ìŠµ-ê°œìš”)
2. [URL ìœ„ì„ ì‹œìŠ¤í…œ êµ¬ì¶•](#url-ìœ„ì„-ì‹œìŠ¤í…œ-êµ¬ì¶•)
3. [CSV ìë™ ë‹¤ìš´ë¡œë“œ ì‹œìŠ¤í…œ](#csv-ìë™-ë‹¤ìš´ë¡œë“œ-ì‹œìŠ¤í…œ)
4. [ë°ì´í„° ì „ì²˜ë¦¬ ë° ë¶„ì„](#ë°ì´í„°-ì „ì²˜ë¦¬-ë°-ë¶„ì„)
5. [HTML í…Œì´ë¸” ìƒì„±](#html-í…Œì´ë¸”-ìƒì„±)
6. [ECharts ì›”ë³„ ê¸°ì˜¨ ì°¨íŠ¸](#echarts-ì›”ë³„-ê¸°ì˜¨-ì°¨íŠ¸)
7. [ë°˜ì‘í˜• í…œí”Œë¦¿ êµ¬í˜„](#ë°˜ì‘í˜•-í…œí”Œë¦¿-êµ¬í˜„)
8. [ìˆœì„œëŒ€ë¡œ ë”°ë¼í•˜ê¸°](#ìˆœì„œëŒ€ë¡œ-ë”°ë¼í•˜ê¸°)
9. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë° íŒ](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ë°-íŒ)

---

## ì‹¤ìŠµ ê°œìš”

### ğŸ¯ ì‹¤ìŠµ ëª©í‘œ
- Django URL ìœ„ì„(include) ë°©ì‹ í•™ìŠµ
- ì‹œì• í‹€ ë‚ ì”¨ CSV ë°ì´í„° ìë™ ë‹¤ìš´ë¡œë“œ ë° ë¶„ì„
- Pandasë¥¼ í™œìš©í•œ ì‹œê³„ì—´ ë°ì´í„° ì²˜ë¦¬
- EChartsë¥¼ í™œìš©í•œ ë™ì  ì°¨íŠ¸ êµ¬í˜„
- Bootstrapì„ í™œìš©í•œ ë°˜ì‘í˜• ì›¹ í˜ì´ì§€ êµ¬í˜„

### ğŸ—‚ï¸ ìµœì¢… í”„ë¡œì íŠ¸ êµ¬ì¡°
```
django2_chart/
â”œâ”€â”€ manage.py
â”œâ”€â”€ mainapp/              # ë©”ì¸ í”„ë¡œì íŠ¸
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py          # ğŸ”‘ URL ìœ„ì„ ì„¤ì •
â”‚   â””â”€â”€ ...
â”œâ”€â”€ myapp/               # ì•±
â”‚   â”œâ”€â”€ views.py         # ğŸ”‘ ë°ì´í„° ë¶„ì„ ë·°
â”‚   â”œâ”€â”€ urls.py          # ğŸ”‘ ì•± URL ì„¤ì •
â”‚   â””â”€â”€ ...
â”œâ”€â”€ templates/           # í…œí”Œë¦¿
â”‚   â”œâ”€â”€ index.html       # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ show.html        # ë°ì´í„° ë¶„ì„ í˜ì´ì§€
â”œâ”€â”€ data/               # ğŸ“ ìë™ ìƒì„±
â”‚   â””â”€â”€ seattle_weather.csv
â””â”€â”€ static/             # ì •ì  íŒŒì¼
    â””â”€â”€ ...
```

### ğŸŒ¤ï¸ ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„°ì…‹
- **ì¶œì²˜**: [Vega Datasets](https://raw.githubusercontent.com/vega/vega-datasets/master/data/seattle-weather.csv)
- **ì»¬ëŸ¼**: date, precipitation, temp_max, temp_min, wind, weather
- **ê¸°ê°„**: 2012-2015ë…„ (ì•½ 1,461ê°œ ë ˆì½”ë“œ)

---

## URL ìœ„ì„ ì‹œìŠ¤í…œ êµ¬ì¶•

### 1. ë©”ì¸ í”„ë¡œì íŠ¸ URL ì„¤ì • (mainapp/urls.py)

```python
from django.contrib import admin
from django.urls import path, include
from myapp import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.index, name='index'),           # ë©”ì¸ í˜ì´ì§€
    path('show/', include('myapp.urls')),          # ğŸ”‘ URL ìœ„ì„
]
```

### 2. ì•± URL ì„¤ì • (myapp/urls.py - ìƒˆë¡œ ìƒì„±)

```python
from django.urls import path
from myapp import views

urlpatterns = [
    path('', views.show, name='show'),    # /show/ â†’ views.show í•¨ìˆ˜ í˜¸ì¶œ
]
```

### ğŸ” URL ìœ„ì„ ë™ì‘ ê³¼ì •
```
ì‚¬ìš©ì ìš”ì²­: /show/
    â†“
mainapp/urls.py: path('show/', include('myapp.urls'))
    â†“
myapp/urls.py: path('', views.show, name='show')
    â†“
views.show í•¨ìˆ˜ ì‹¤í–‰
```

---

## CSV ìë™ ë‹¤ìš´ë¡œë“œ ì‹œìŠ¤í…œ

### csvFunc() í•¨ìˆ˜ êµ¬í˜„

```python
import json, os
import pandas as pd
import numpy as np
import requests
from django.conf import settings
from datetime import datetime

# ğŸ“ ë°ì´í„° í´ë” ë° íŒŒì¼ ê²½ë¡œ ì„¤ì •
DATA_DIR = os.path.join(settings.BASE_DIR, 'data')
CSV_PATH = os.path.join(DATA_DIR, 'seattle_weather.csv')
CSV_URL = "https://raw.githubusercontent.com/vega/vega-datasets/master/data/seattle-weather.csv"

def csvFunc():
    """CSV íŒŒì¼ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ìŠ¤ë§ˆíŠ¸ í•¨ìˆ˜"""
    
    # ğŸ“ ë°ì´í„° í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„±
    os.makedirs(DATA_DIR, exist_ok=True)
    
    # ğŸ“¥ CSV íŒŒì¼ì´ ì—†ì„ ë•Œë§Œ ë‹¤ìš´ë¡œë“œ
    if not os.path.exists(CSV_PATH):
        print("ğŸ“¥ CSV íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤...")
        
        # ğŸŒ ì›¹ì—ì„œ CSV ë°ì´í„° ìš”ì²­ (20ì´ˆ íƒ€ì„ì•„ì›ƒ)
        res = requests.get(CSV_URL, timeout=20)
        res.raise_for_status()  # HTTP ì˜¤ë¥˜ ì‹œ ì˜ˆì™¸ ë°œìƒ
        
        # ğŸ’¾ ë°”ì´ë„ˆë¦¬ ëª¨ë“œë¡œ íŒŒì¼ ì €ì¥ (í•œê¸€ ê¹¨ì§ ë°©ì§€)
        with open(CSV_PATH, mode='wb') as f:
            f.write(res.content)
        
        print("âœ… CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!")
    else:
        print("ğŸ“ ê¸°ì¡´ CSV íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.")
```

### ğŸ”‘ í•µì‹¬ í¬ì¸íŠ¸
- **ğŸ’¡ ìŠ¤ë§ˆíŠ¸ ìºì‹±**: íŒŒì¼ì´ ìˆìœ¼ë©´ ë‹¤ìš´ë¡œë“œí•˜ì§€ ì•ŠìŒ
- **â° íƒ€ì„ì•„ì›ƒ ë³´í˜¸**: 20ì´ˆ í›„ ìë™ ì¤‘ë‹¨
- **ğŸ›¡ï¸ ì˜¤ë¥˜ ì²˜ë¦¬**: `raise_for_status()`ë¡œ HTTP ì˜¤ë¥˜ ì²´í¬
- **ğŸ“ ë°”ì´ë„ˆë¦¬ ì €ì¥**: í•œê¸€ ì¸ì½”ë”© ë¬¸ì œ ë°©ì§€

---

## ë°ì´í„° ì „ì²˜ë¦¬ ë° ë¶„ì„

### show() ë·° í•¨ìˆ˜ - ë°ì´í„° ë¶„ì„ ë¶€ë¶„

```python
def show(request):
    """ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„ ë° í‘œì‹œ"""
    
    try:
        # 1ï¸âƒ£ CSV íŒŒì¼ í™•ë³´
        csvFunc()
        
        # 2ï¸âƒ£ ë°ì´í„° ë¡œë”© ë° ê¸°ë³¸ ì •ë³´ í™•ì¸
        df = pd.read_csv(CSV_PATH)
        print("ğŸ“Š ì»¬ëŸ¼ ì •ë³´:", df.columns.tolist())
        print("ğŸ“‹ ë°ì´í„° ì •ë³´:")
        print(df.info())
        
        # 3ï¸âƒ£ ì¼ë¶€ ì»¬ëŸ¼ë§Œ ì„ íƒ ë° ë³µì‚¬ë³¸ ìƒì„±
        df = df[['date', 'precipitation', 'temp_max', 'temp_min', 'wind']].copy()
        
        # 4ï¸âƒ£ ë°ì´í„° ì „ì²˜ë¦¬
        df['date'] = pd.to_datetime(df['date'])  # ë‚ ì§œ íƒ€ì… ë³€í™˜
        df = df.dropna()  # ê²°ì¸¡ì¹˜ ì œê±°
        
        # 5ï¸âƒ£ ê¸°ìˆ  í†µê³„ ê³„ì‚° (í‰ê· , í‘œì¤€í¸ì°¨, ìµœì†Ÿê°’, ìµœëŒ“ê°’ ë“±)
        stats_df = df[['precipitation', 'temp_max', 'temp_min']].describe().round(3)
        print("ğŸ“ˆ ê¸°ìˆ  í†µê³„:")
        print(stats_df)
        
        # ... (ê³„ì†)
        
    except Exception as e:
        # ğŸš¨ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì—ëŸ¬ í˜ì´ì§€ í‘œì‹œ
        return render(request, 'error.html', {
            'error_message': str(e),
            'error_type': type(e).__name__
        })
```

### ğŸ” ë°ì´í„° ì „ì²˜ë¦¬ ê³¼ì •
1. **ì»¬ëŸ¼ ì„ íƒ**: ë¶„ì„ì— í•„ìš”í•œ 5ê°œ ì»¬ëŸ¼ë§Œ ì¶”ì¶œ
2. **ë‚ ì§œ ë³€í™˜**: `pd.to_datetime()`ìœ¼ë¡œ ë¬¸ìì—´ â†’ datetime ê°ì²´
3. **ê²°ì¸¡ì¹˜ ì œê±°**: `dropna()`ë¡œ ëˆ„ë½ëœ ë°ì´í„° ì œê±°
4. **ê¸°ìˆ  í†µê³„**: `describe()`ë¡œ ìš”ì•½ í†µê³„ëŸ‰ ê³„ì‚°

---

## HTML í…Œì´ë¸” ìƒì„±

### Pandas DataFrame â†’ HTML ë³€í™˜

```python
# 6ï¸âƒ£ HTML í…Œì´ë¸” ìƒì„±
head_html = df.head(5).to_html(
    classes='table table-sm table-striped',  # Bootstrap í´ë˜ìŠ¤ ì ìš©
    index=False,                              # ì¸ë±ìŠ¤ ì œì™¸
    border=0                                  # í…Œë‘ë¦¬ ì œê±°
)

stats_html = stats_df.to_html(
    classes='table table-sm table-striped',
    border=0
)
```

### ğŸ¨ Bootstrap í…Œì´ë¸” ìŠ¤íƒ€ì¼ë§
- **`table`**: ê¸°ë³¸ í…Œì´ë¸” ìŠ¤íƒ€ì¼
- **`table-sm`**: ì»´íŒ©íŠ¸í•œ í…Œì´ë¸”
- **`table-striped`**: ì¤„ë¬´ëŠ¬ ë°°ê²½

---

## ECharts ì›”ë³„ ê¸°ì˜¨ ì°¨íŠ¸

### 1. ì‹œê³„ì—´ ë°ì´í„° ë¦¬ìƒ˜í”Œë§

```python
# 7ï¸âƒ£ EChartsìš© ë°ì´í„° ì¤€ë¹„ (ì›”ë³„ í‰ê·  ìµœê³ ê¸°ì˜¨)
monthly = (
    df.set_index('date')                      # ë‚ ì§œë¥¼ ì¸ë±ìŠ¤ë¡œ ì„¤ì •
    .resample('ME')[['temp_max']]            # ì›”ë§ ê¸°ì¤€ ë¦¬ìƒ˜í”Œë§
    .mean()                                   # í‰ê· ê°’ ê³„ì‚°
    .reset_index()                            # ì¸ë±ìŠ¤ë¥¼ ë‹¤ì‹œ ì»¬ëŸ¼ìœ¼ë¡œ
)

# 8ï¸âƒ£ ì°¨íŠ¸ ë°ì´í„° í¬ë§·íŒ…
labels = monthly['date'].dt.strftime('%Y-%m').tolist()  # ["2012-01", "2012-02", ...]
series = monthly['temp_max'].round(2).tolist()          # [7.05, 8.23, 12.47, ...]
```

### ğŸ” ë¦¬ìƒ˜í”Œë§ í•µì‹¬ ê°œë…
- **`set_index('date')`**: ë‚ ì§œë¥¼ ì¸ë±ìŠ¤ë¡œ ì„¤ì • (ì‹œê³„ì—´ ë¶„ì„ ì¤€ë¹„)
- **`resample('ME')`**: Month End (ì›”ë§) ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹í™”
- **`.mean()`**: ê° ì›”ì˜ í‰ê· ê°’ ê³„ì‚°
- **`reset_index()`**: ì›ë˜ í…Œì´ë¸” êµ¬ì¡°ë¡œ ë³µì›

### 2. JSON ì§ë ¬í™”

```python
# 9ï¸âƒ£ JavaScriptì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ JSON ë³€í™˜
ctx_dict = {
    'head_html': head_html,
    'stats_html': stats_html,
    'labels_json': json.dumps(labels, ensure_ascii=False),    # í•œê¸€ ì§€ì›
    'series_json': json.dumps(series, ensure_ascii=False)
}

return render(request, 'show.html', ctx_dict)
```

### ğŸ”‘ JSON ì§ë ¬í™” í¬ì¸íŠ¸
- **`json.dumps()`**: Python ë¦¬ìŠ¤íŠ¸ â†’ JSON ë¬¸ìì—´
- **`ensure_ascii=False`**: í•œê¸€ ë¬¸ì ê¹¨ì§ ë°©ì§€

---

## ë°˜ì‘í˜• í…œí”Œë¦¿ êµ¬í˜„

### templates/index.html (ë©”ì¸ í˜ì´ì§€)

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django ì‹œì• í‹€ ë‚ ì”¨ ë¶„ì„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
        }
        .feature-card {
            transition: transform 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <!-- ğŸ¨ íˆì–´ë¡œ ì„¹ì…˜ -->
    <section class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 fw-bold mb-4">ğŸŒ¤ï¸ ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„</h1>
            <p class="lead mb-5">Djangoì™€ EChartsë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ë°ì´í„° ë¶„ì„</p>
            
            <!-- ğŸ”— ì¼ë°˜ ë§í¬ ë°©ì‹ -->
            <a href="/show/" class="btn btn-light btn-lg me-3">
                ğŸ“Š ì¼ë°˜ ë§í¬ë¡œ ë¶„ì„ ì‹œì‘
            </a>
            
            <!-- ğŸ”— Django URL íŒ¨í„´ ë°©ì‹ -->
            <a href="{% url 'show' %}" class="btn btn-outline-light btn-lg">
                ğŸ”— URL íŒ¨í„´ìœ¼ë¡œ ë¶„ì„ ì‹œì‘
            </a>
        </div>
    </section>

    <!-- ğŸ“‹ ê¸°ëŠ¥ ì†Œê°œ ì„¹ì…˜ -->
    <section class="py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card feature-card h-100 text-center p-4">
                        <div class="card-body">
                            <h3>ğŸ“¥ ìë™ CSV ë‹¤ìš´ë¡œë“œ</h3>
                            <p>ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„°ë¥¼ ì›¹ì—ì„œ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card feature-card h-100 text-center p-4">
                        <div class="card-body">
                            <h3>ğŸ“Š ê¸°ìˆ  í†µê³„ ë¶„ì„</h3>
                            <p>Pandasë¥¼ í™œìš©í•œ ì›”ë³„ ì‹œê³„ì—´ ë°ì´í„° ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card feature-card h-100 text-center p-4">
                        <div class="card-body">
                            <h3>ğŸ“ˆ ECharts ì‹œê°í™”</h3>
                            <p>ì¸í„°ë™í‹°ë¸Œí•œ ì›”ë³„ ê¸°ì˜¨ ë³€í™” ì°¨íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>
```

### templates/show.html (ë°ì´í„° ë¶„ì„ í˜ì´ì§€)

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„ ê²°ê³¼</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    
    <style>
        body { background-color: #f8f9fa; }
        .chart-card { 
            height: 350px; 
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        #lineChart { height: 100%; width: 100%; }
        .stats-card, .data-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .table-container { max-height: 400px; overflow-y: auto; }
        h2 { color: #495057; font-weight: bold; }
        h4 { color: #6c757d; font-weight: 600; }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- ğŸ“‹ í˜ì´ì§€ í—¤ë” -->
        <div class="text-center mb-5">
            <h2 class="display-5">ğŸŒ¤ï¸ ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„ ê²°ê³¼</h2>
            <p class="lead text-muted">2012-2015ë…„ ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ê¸°ìˆ  í†µê³„ì™€ ì›”ë³„ ê¸°ì˜¨ ë³€í™”</p>
        </div>

        <!-- ğŸ“Š í†µê³„ ë° ë°ì´í„° ì„¹ì…˜ -->
        <div class="row g-4 mb-5">
            <!-- ê¸°ìˆ  í†µê³„ ì¹´ë“œ -->
            <div class="col-lg-6">
                <div class="card stats-card h-100">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">ğŸ“ˆ ê¸°ìˆ  í†µê³„ (ê°•ìˆ˜ëŸ‰, ìµœê³ /ìµœì €ê¸°ì˜¨)</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            {{ stats_html | safe }}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ìƒ˜í”Œ ë°ì´í„° ì¹´ë“œ -->
            <div class="col-lg-6">
                <div class="card data-card h-100">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0">ğŸ“‹ ë°ì´í„° í”„ë ˆì„ í—¤ë“œ (ìƒìœ„ 5í–‰)</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            {{ head_html | safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ğŸ“ˆ ECharts ì°¨íŠ¸ ì„¹ì…˜ -->
        <div class="row g-4 mb-5">
            <div class="col-12">
                <div class="card chart-card">
                    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                        <h4 class="mb-0">ğŸ“Š ì›”ë³„ í‰ê·  ìµœê³  ê¸°ì˜¨ ë³€í™” (ë¼ì¸ ì°¨íŠ¸)</h4>
                        <small class="badge bg-light text-dark">2012-2015ë…„ ì›”ë³„ ë¦¬ìƒ˜í”Œë§</small>
                    </div>
                    <div class="card-body p-2">
                        <div id="lineChart"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ğŸ  ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="text-center">
            <a href="{% url 'index' %}" class="btn btn-outline-primary btn-lg">
                ğŸ  ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>
    </div>

    <!-- ğŸ“Š ECharts ë¼ì´ë¸ŒëŸ¬ë¦¬ (v5.x) -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

    <!-- ğŸ“ˆ ì°¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ğŸ¯ Djangoì—ì„œ ì „ë‹¬ë°›ì€ JSON ë°ì´í„°
        const labels = {{ labels_json | safe }};      // ì›”ë³„ ë¼ë²¨ ["2012-01", "2012-02", ...]
        const seriesData = {{ series_json | safe }};  // ê¸°ì˜¨ ë°ì´í„° [7.05, 8.23, 12.47, ...]

        // ğŸ“Š ECharts ì—˜ë¦¬ë¨¼íŠ¸ ë° ì°¨íŠ¸ ê°ì²´ ì´ˆê¸°í™”
        const el = document.getElementById('lineChart');
        const chart = echarts.init(el);

        // ğŸ¨ ì°¨íŠ¸ ì˜µì…˜ ì„¤ì •
        const option = {
            // ğŸ–±ï¸ íˆ´íŒ ì„¤ì •
            tooltip: { 
                trigger: 'axis',
                formatter: function(params) {
                    const dataIndex = params[0].dataIndex;
                    const month = labels[dataIndex];
                    const temp = params[0].value;
                    return `<strong>${month}</strong><br/>í‰ê·  ìµœê³ ê¸°ì˜¨: <span style="color:#E74C3C;">${temp}Â°C</span>`;
                }
            },
            
            // ğŸ“ ê·¸ë¦¬ë“œ (ì°¨íŠ¸ ì—¬ë°± ì„¤ì •)
            grid: { 
                left: 48, 
                right: 16, 
                bottom: 24, 
                top: 24, 
                containLabel: true 
            },
            
            // ğŸ“… Xì¶• (ì¹´í…Œê³ ë¦¬í˜• - ì›”ë³„ ë¼ë²¨)
            xAxis: {
                type: 'category',
                data: labels,
                axisLabel: { 
                    interval: 'auto',
                    rotate: 45  // ë¼ë²¨ 45ë„ íšŒì „
                }
            },
            
            // ğŸŒ¡ï¸ Yì¶• (ìˆ«ìí˜• - ê¸°ì˜¨)
            yAxis: {
                type: 'value',
                axisLabel: { 
                    interval: 'auto',
                    formatter: '{value}Â°C'
                }
            },
            
            // ğŸ“ˆ ì‹œë¦¬ì¦ˆ (ì‹¤ì œ ë°ì´í„°)
            series: [
                {
                    name: 'ì›”ë³„ í‰ê·  ìµœê³ ê¸°ì˜¨',
                    type: 'line',              // ë¼ì¸ ì°¨íŠ¸
                    data: seriesData,          // ì‹¤ì œ ë°ì´í„°
                    smooth: true,              // ë¶€ë“œëŸ¬ìš´ ê³¡ì„ 
                    lineStyle: {
                        color: '#E74C3C',      // ë¹¨ê°„ìƒ‰ ë¼ì¸
                        width: 3
                    },
                    itemStyle: {
                        color: '#E74C3C'       // í¬ì¸íŠ¸ ìƒ‰ìƒ
                    },
                    symbolSize: 4,             // í¬ì¸íŠ¸ í¬ê¸°
                    areaStyle: {               // ì˜ì—­ ì±„ìš°ê¸°
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: 'rgba(231, 76, 60, 0.3)' },
                                { offset: 1, color: 'rgba(231, 76, 60, 0.1)' }
                            ]
                        }
                    }
                }
            ]
        };

        // ğŸš€ ì°¨íŠ¸ ì˜µì…˜ ì ìš©
        chart.setOption(option);
        
        // ğŸ“± ë°˜ì‘í˜• ì°¨íŠ¸ (ìœˆë„ìš° í¬ê¸° ë³€ê²½ ì‹œ ì°¨íŠ¸ í¬ê¸° ìë™ ì¡°ì •)
        window.addEventListener('resize', () => chart.resize());
    </script>
</body>
</html>
```

---

## ìˆœì„œëŒ€ë¡œ ë”°ë¼í•˜ê¸°

### ğŸš€ Step 1: í”„ë¡œì íŠ¸ ê¸°ë³¸ ì„¤ì •

```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir django2_chart
cd django2_chart

# 2. Django í”„ë¡œì íŠ¸ ìƒì„±
django-admin startproject mainapp .

# 3. ì•± ìƒì„±
python manage.py startapp myapp

# 4. í…œí”Œë¦¿ í´ë” ìƒì„±
mkdir templates
```

### ğŸš€ Step 2: settings.py ì„¤ì •

```python
# mainapp/settings.py ìˆ˜ì •

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',  # ğŸ”‘ ìƒˆë¡œ ìƒì„±í•œ ì•± ì¶”ê°€
]

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],  # ğŸ”‘ í…œí”Œë¦¿ ë””ë ‰í† ë¦¬ ì¶”ê°€
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

### ğŸš€ Step 3: URL ìœ„ì„ ì„¤ì •

**mainapp/urls.py:**
```python
from django.contrib import admin
from django.urls import path, include
from myapp import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.index, name='index'),
    path('show/', include('myapp.urls')),  # ğŸ”‘ URL ìœ„ì„
]
```

**myapp/urls.py (ìƒˆë¡œ ìƒì„±):**
```python
from django.urls import path
from myapp import views

urlpatterns = [
    path('', views.show, name='show'),
]
```

### ğŸš€ Step 4: ë·° í•¨ìˆ˜ êµ¬í˜„

**myapp/views.py:**
```python
from django.shortcuts import render
import json, os
import pandas as pd
import numpy as np
import requests
from django.conf import settings
from datetime import datetime

# ë°ì´í„° í´ë” ë° íŒŒì¼ ê²½ë¡œ ì„¤ì •
DATA_DIR = os.path.join(settings.BASE_DIR, 'data')
CSV_PATH = os.path.join(DATA_DIR, 'seattle_weather.csv')
CSV_URL = "https://raw.githubusercontent.com/vega/vega-datasets/master/data/seattle-weather.csv"

def index(request):
    """ë©”ì¸ í˜ì´ì§€"""
    return render(request, 'index.html')

def csvFunc():
    """CSV íŒŒì¼ ìë™ ë‹¤ìš´ë¡œë“œ"""
    os.makedirs(DATA_DIR, exist_ok=True)
    
    if not os.path.exists(CSV_PATH):
        print("ğŸ“¥ CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘...")
        res = requests.get(CSV_URL, timeout=20)
        res.raise_for_status()
        
        with open(CSV_PATH, mode='wb') as f:
            f.write(res.content)
        print("âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!")

def show(request):
    """ì‹œì• í‹€ ë‚ ì”¨ ë°ì´í„° ë¶„ì„"""
    try:
        # 1. CSV íŒŒì¼ í™•ë³´
        csvFunc()
        
        # 2. ë°ì´í„° ë¡œë”©
        df = pd.read_csv(CSV_PATH)
        print("ğŸ“Š ì»¬ëŸ¼:", df.columns.tolist())
        print("ğŸ“‹ ë°ì´í„° ì •ë³´:")
        print(df.info())
        
        # 3. ì¼ë¶€ ì»¬ëŸ¼ë§Œ ì„ íƒ
        df = df[['date', 'precipitation', 'temp_max', 'temp_min', 'wind']].copy()
        
        # 4. ë°ì´í„° ì „ì²˜ë¦¬
        df['date'] = pd.to_datetime(df['date'])
        df = df.dropna()
        
        # 5. ê¸°ìˆ  í†µê³„
        stats_df = df[['precipitation', 'temp_max', 'temp_min']].describe().round(3)
        print("ğŸ“ˆ ê¸°ìˆ  í†µê³„:")
        print(stats_df)
        
        # 6. HTML í…Œì´ë¸” ìƒì„±
        head_html = df.head(5).to_html(
            classes='table table-sm table-striped',
            index=False,
            border=0
        )
        stats_html = stats_df.to_html(
            classes='table table-sm table-striped',
            border=0
        )
        
        # 7. EChartsìš© ì›”ë³„ ë°ì´í„° ì¤€ë¹„
        monthly = (
            df.set_index('date')
            .resample('ME')[['temp_max']]
            .mean()
            .reset_index()
        )
        
        # 8. ì°¨íŠ¸ ë°ì´í„° í¬ë§·íŒ…
        labels = monthly['date'].dt.strftime('%Y-%m').tolist()
        series = monthly['temp_max'].round(2).tolist()
        
        # 9. í…œí”Œë¦¿ ì»¨í…ìŠ¤íŠ¸
        ctx_dict = {
            'head_html': head_html,
            'stats_html': stats_html,
            'labels_json': json.dumps(labels, ensure_ascii=False),
            'series_json': json.dumps(series, ensure_ascii=False)
        }
        
        return render(request, 'show.html', ctx_dict)
        
    except Exception as e:
        return render(request, 'error.html', {
            'error_message': str(e),
            'error_type': type(e).__name__
        })
```

### ğŸš€ Step 5: í…œí”Œë¦¿ íŒŒì¼ ìƒì„±

ìœ„ì˜ [ë°˜ì‘í˜• í…œí”Œë¦¿ êµ¬í˜„](#ë°˜ì‘í˜•-í…œí”Œë¦¿-êµ¬í˜„) ì„¹ì…˜ì˜ `index.html`ê³¼ `show.html`ì„ `templates/` í´ë”ì— ìƒì„±í•©ë‹ˆë‹¤.

### ğŸš€ Step 6: ì„œë²„ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸

```bash
# 1. ê°œë°œ ì„œë²„ ì‹¤í–‰
python manage.py runserver

# 2. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
# http://127.0.0.1:8000/        - ë©”ì¸ í˜ì´ì§€
# http://127.0.0.1:8000/show/   - ë°ì´í„° ë¶„ì„ í˜ì´ì§€
```

### ğŸš€ Step 7: ë™ì‘ í™•ì¸

1. **ë©”ì¸ í˜ì´ì§€**: ë‘ ê°œì˜ ë§í¬ ë²„íŠ¼ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
2. **ë°ì´í„° ë¶„ì„ í˜ì´ì§€**: 
   - ì½˜ì†”ì— "ğŸ“¥ CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘..." ë©”ì‹œì§€ í™•ì¸
   - `data/seattle_weather.csv` íŒŒì¼ ìƒì„± í™•ì¸
   - ê¸°ìˆ  í†µê³„ í…Œì´ë¸” í‘œì‹œ í™•ì¸
   - ìƒ˜í”Œ ë°ì´í„° í…Œì´ë¸” í‘œì‹œ í™•ì¸
   - ECharts ì›”ë³„ ê¸°ì˜¨ ì°¨íŠ¸ í‘œì‹œ í™•ì¸

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë° íŒ

### ğŸ”§ ì£¼ìš” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

#### 1. **requests ëª¨ë“ˆ ì˜¤ë¥˜**
```bash
pip install requests
```

#### 2. **CSV ë‹¤ìš´ë¡œë“œ íƒ€ì„ì•„ì›ƒ**
```python
# íƒ€ì„ì•„ì›ƒ ì‹œê°„ ì¦ê°€
res = requests.get(CSV_URL, timeout=30)
```

#### 3. **IP ì£¼ì†Œë¡œ ì ‘ì† ì‹œ ì˜¤ë¥˜**
```python
# settings.pyì—ì„œ ALLOWED_HOSTS ì„¤ì •
ALLOWED_HOSTS = ['127.0.0.1', 'localhost', '192.168.0.133']
```

#### 4. **í…œí”Œë¦¿ not found ì˜¤ë¥˜**
```python
# settings.py TEMPLATES ì„¤ì • í™•ì¸
'DIRS': [BASE_DIR / 'templates'],
```

#### 5. **ECharts ì°¨íŠ¸ê°€ ì•ˆ ë³´ì„**
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12) ì½˜ì†” ì˜¤ë¥˜ í™•ì¸
- ECharts CDN ë§í¬ í™•ì¸
- `labels_json`ê³¼ `series_json` ë°ì´í„° í™•ì¸

### ğŸ’¡ ìœ ìš©í•œ íŒ

#### 1. **ë°ì´í„° í™•ì¸ ë°©ë²•**
```python
# ë·° í•¨ìˆ˜ì—ì„œ ë°ì´í„° í™•ì¸
print("ğŸ“Š Labels:", labels[:5])  # ì²˜ìŒ 5ê°œë§Œ ì¶œë ¥
print("ğŸ“ˆ Series:", series[:5])
```

#### 2. **ì°¨íŠ¸ ë””ë²„ê¹…**
```javascript
// í…œí”Œë¦¿ì—ì„œ ë°ì´í„° í™•ì¸
console.log("Labels:", labels);
console.log("Series Data:", seriesData);
```

#### 3. **ë°˜ì‘í˜• ì°¨íŠ¸ í¬ê¸° ì¡°ì •**
```css
/* ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ ë†’ì´ ì¡°ì • */
.chart-card { height: 400px; }  /* 350px â†’ 400px */
```

#### 4. **í•œê¸€ í°íŠ¸ ë¬¸ì œ í•´ê²°**
```python
# matplotlib í•œê¸€ í°íŠ¸ ì„¤ì • (í•„ìš” ì‹œ)
import matplotlib.pyplot as plt
plt.rcParams['font.family'] = 'DejaVu Sans'
```

### ğŸ¯ í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸

1. **URL ìœ„ì„**: `include()`ë¥¼ ì‚¬ìš©í•œ ëª¨ë“ˆí™”ëœ URL ê´€ë¦¬
2. **ìŠ¤ë§ˆíŠ¸ ìºì‹±**: íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì¡°ê±´ë¶€ ë‹¤ìš´ë¡œë“œ
3. **ì‹œê³„ì—´ ë¶„ì„**: `resample('ME')`ë¥¼ í™œìš©í•œ ì›”ë³„ ë°ì´í„° ì§‘ê³„
4. **JSON ì§ë ¬í™”**: Python ë°ì´í„° â†’ JavaScript ë³€ìˆ˜ ì „ë‹¬
5. **ë°˜ì‘í˜• ì°¨íŠ¸**: ECharts + Bootstrapì„ í™œìš©í•œ ëª¨ë°”ì¼ ì¹œí™”ì  UI

### ğŸš€ í™•ì¥ ì•„ì´ë””ì–´

1. **ì¶”ê°€ ì°¨íŠ¸**: ê°•ìˆ˜ëŸ‰ ë§‰ëŒ€ ì°¨íŠ¸, í’ì† ì‚°ì ë„
2. **í•„í„° ê¸°ëŠ¥**: ì—°ë„ë³„, ê³„ì ˆë³„ ë°ì´í„° í•„í„°ë§
3. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: AJAXë¥¼ í™œìš©í•œ ë™ì  ë°ì´í„° ê°±ì‹ 
4. **ë°ì´í„° ë‚´ë³´ë‚´ê¸°**: CSV, Excel íŒŒì¼ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
5. **API ì—°ë™**: ì‹¤ì‹œê°„ ë‚ ì”¨ APIì™€ ì—°ë™

ì´ì œ Django URL ìœ„ì„ê³¼ EChartsë¥¼ í™œìš©í•œ ì™„ì „í•œ ë°ì´í„° ë¶„ì„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸŒŸ