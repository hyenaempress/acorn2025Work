# Django ì»¤í”¼ ì„¤ë¬¸ì¡°ì‚¬ ì¹´ì´ì œê³± ê²€ì • ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” Django í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ë³„ì— ë”°ë¥¸ ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ ì°¨ì´ë¥¼ ì¹´ì´ì œê³± ê²€ì •ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥
- ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ ì„¤ë¬¸ì¡°ì‚¬ ì…ë ¥
- ì„¤ë¬¸ ê²°ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
- ì„±ë³„ê³¼ ì»¤í”¼ë¸Œëœë“œë³„ êµì°¨ë¶„í• í‘œ ìƒì„±
- ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì • ìˆ˜í–‰
- ê²€ì • ê²°ê³¼ ì›¹ ì¶œë ¥
- ì»¤í”¼ë¸Œëœë“œë³„ ì„ í˜¸ë„ ì°¨íŠ¸ ìƒì„±

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

### MariaDB ì„¤ì •
```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE coffeedb;
USE coffeedb;

-- í…Œì´ë¸” ìƒì„±
CREATE TABLE survey(
    rnum INT PRIMARY KEY AUTO_INCREMENT, 
    gender VARCHAR(4),
    age INT(3),
    co_survey VARCHAR(10)
);

-- ìƒ˜í”Œ ë°ì´í„° ì…ë ¥ ì˜ˆì‹œ
INSERT INTO survey (gender, age, co_survey) VALUES ('ë‚¨', 10, 'íƒì•¤íƒìŠ¤');
INSERT INTO survey (gender, age, co_survey) VALUES ('ì—¬', 10, 'ìŠ¤íƒ€ë²…ìŠ¤');
```

### í…Œì´ë¸” êµ¬ì¡°
| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| rnum | INT | ê¸°ë³¸í‚¤ (ìë™ì¦ê°€) |
| gender | VARCHAR(4) | ì„±ë³„ (ë‚¨/ì—¬) |
| age | INT(3) | ë‚˜ì´ëŒ€ |
| co_survey | VARCHAR(10) | ì„ í˜¸ ì»¤í”¼ë¸Œëœë“œ |

---

## ğŸ—ï¸ Django í”„ë¡œì íŠ¸ êµ¬ì¡°

### í”„ë¡œì íŠ¸ ìƒì„±
```bash
# í”„ë¡œì íŠ¸ í´ë” ìƒì„±
mkdir django4_coffee
cd django4_coffee

# Django í”„ë¡œì íŠ¸ ìƒì„±
django-admin startproject mainapp .

# ì•± ìƒì„±
python manage.py startapp myapp
```

### í´ë” êµ¬ì¡°
```
django4_coffee/
â”œâ”€â”€ mainapp/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ myapp/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ views.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ index.html
â”‚       â””â”€â”€ coffee/
â”‚           â”œâ”€â”€ survey_form.html
â”‚           â””â”€â”€ survey_result.html
â””â”€â”€ manage.py
```

---

## ğŸ“Š ëª¨ë¸ ì •ì˜

### models.py
```python
from django.db import models

class Survey(models.Model):
    rnum = models.AutoField(primary_key=True)
    gender = models.CharField(max_length=4, blank=True, null=True)
    age = models.IntegerField(blank=True, null=True)
    co_survey = models.CharField(max_length=10, blank=True, null=True)

    class Meta:
        managed = False  # í…Œì´ë¸” ìƒì„± ì•ˆí•¨ (ê¸°ì¡´ DB ì‚¬ìš©)
        db_table = 'survey'
```

---

## ğŸ”— URL ì„¤ì •

### mainapp/urls.py
```python
from django.contrib import admin
from django.urls import path, include
from mainapp import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.surveyMain),
    path('coffee/', include('myapp.urls')),
]
```

### myapp/urls.py
```python
from django.urls import path
from . import views

urlpatterns = [
    path('survey', views.survey_form, name='survey_form'),
    path('surveyshow', views.survey_result, name='survey_result'),
    path('surveyprocess', views.survey_process, name='survey_process'),
]
```

---

## ğŸ¨ ë·° í•¨ìˆ˜

### views.py (ì„ ìƒë‹˜ ì™„ì „ êµ¬í˜„ ë²„ì „)
```python
from django.shortcuts import render, redirect
import os
from django.conf import settings
import matplotlib
matplotlib.use('Agg')   # ì„œë²„ì—ì„œ ì‹œê°í™” GUI ì—†ì´ ì €ì¥í•  ë•Œ
import matplotlib.pyplot as plt
plt.rc('font', family='Malgun Gothic')

from myapp.models import Survey
import pandas as pd
import numpy as np
import scipy.stats as stats

# Create your views here.
def surveyMain(request):
    """ë©”ì¸ í˜ì´ì§€"""
    return render(request, 'index.html')

def surveyView(request):
    """ì„¤ë¬¸ ì…ë ¥ í¼ í˜ì´ì§€"""
    return render(request, 'coffee/coffeesurvey.html')

def surveyProcess(request):
    """ì„¤ë¬¸ ì²˜ë¦¬ ë° ê²°ê³¼ ë¶„ì„"""
    insertDataFunc(request)

    # ì „ì²´ ë°ì´í„° ì¡°íšŒ
    rdata = list(Survey.objects.all().values())
    
    # ë°ì´í„° ë¶„ì„(ì´ì› ì¹´ì´ì œê³± ê²€ì •)
    crossTbl, results, df = analysisFunc(rdata)   

    # ì°¨íŠ¸ ì²˜ë¦¬í•¨ìˆ˜ í˜¸ì¶œ
    static_img_path = os.path.join(settings.BASE_DIR, 'static', 'images', 'cobar.png')
    save_brand_barFunc(df, static_img_path)

    return render(request, 'coffee/result.html', {
        'crossTbl': crossTbl.to_html(),
        'results': results,
        'df': df.to_html(index=False)
    })

def insertDataFunc(request):
    """ì„¤ë¬¸ ë°ì´í„° DB ì €ì¥"""
    if request.method == 'POST':
        # í¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        gender = request.POST.get('gender')
        age = request.POST.get('age') 
        co_survey = request.POST.get('co_survey')
        
        # DBì— ì €ì¥
        Survey.objects.create(
            gender=gender,
            age=age,
            co_survey=co_survey,
        )

def analysisFunc(rdata):
    """ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì • ë¶„ì„"""
    # ê°€ì„¤ ì„¤ì •
    # ê·€ë¬´ê°€ì„¤: ì„±ë³„ì— ë”°ë¼ ì„ í˜¸í•˜ëŠ” ì»¤í”¼ ë¸Œëœë“œì— ì°¨ì´ê°€ ì—†ë‹¤.
    # ëŒ€ë¦½ê°€ì„¤: ì„±ë³„ì— ë”°ë¼ ì„ í˜¸í•˜ëŠ” ì»¤í”¼ ë¸Œëœë“œì— ì°¨ì´ê°€ ìˆë‹¤.
    
    df = pd.DataFrame(rdata)
    if df.empty:
        return pd.DataFrame(), 'ë°ì´í„°ê°€ ì—†ì–´ìš”', pd.DataFrame()
    
    # ê²°ì¸¡ì¹˜ ì œê±°
    df = df.dropna(subset=['gender', 'co_survey'])
    
    # ë”ë¯¸ ë³€ìˆ˜ ìƒì„± (ë¶„ì„ìš©)
    df['genNum'] = df['gender'].apply(lambda g: 1 if g == 'ë‚¨' else 2)
    df['coNum'] = df['co_survey'].apply(
        lambda c: 1 if c == 'ìŠ¤íƒ€ë²…ìŠ¤' else 2 if c == 'ì»¤í”¼ë¹ˆ' else 3 if c == 'ì´ë””ì•¼' else 4
    )
    
    # êµì°¨ë¶„í• í‘œ ì‘ì„±
    crossTbl = pd.crosstab(index=df['gender'], columns=df['co_survey'])
    
    # í‘œë³¸ ë¶€ì¡± ì‹œ ë©”ì‹œì§€ ì „ë‹¬
    if crossTbl.size == 0 or crossTbl.shape[0] < 2 or crossTbl.shape[1] < 2:
        results = "í‘œë³¸ ìë£Œê°€ ë¶€ì¡±í•´ ì¹´ì´ì œê³± ê²€ì • ìˆ˜í–‰ ë¶ˆê°€!!!"
        return crossTbl, results, df
    
    # ì¹´ì´ì œê³± ê²€ì • ìˆ˜í–‰
    alpha = 0.05   # ìœ ì˜ ìˆ˜ì¤€
    st, pv, ddof, expected = stats.chi2_contingency(crossTbl)

    # ê¸°ëŒ€ ë¹ˆë„ ìµœì†Œê°’ ì²´í¬ (ê²½ê³ ìš©)
    min_expected = expected.min()
    expected_note = ""
    if min_expected < 5:
        expected_note = f"<br><small>* ì£¼ì˜: ê¸°ëŒ€ë¹ˆë„ì˜ ìµœì†Œê°’ì´ {min_expected:.2f}ë¡œ 5 ë¯¸ë§Œì´ ìˆì–´ ì¹´ì´ì œê³± ê°€ì •ì— ë‹¤ì†Œ ì·¨ì•½í•©ë‹ˆë‹¤</small>"

    # ê²°ê³¼ í•´ì„
    if pv >= alpha:
        results = (
            f"pê°’ì´ {pv:.5f}ì´ë¯€ë¡œ {alpha} ì´ìƒ â†’ "
            f"ì„±ë³„ì— ë”°ë¼ ì„ í˜¸ ë¸Œëœë“œì— ì°¨ì´ê°€ ì—†ë‹¤ (ê·€ë¬´ê°€ì„¤ ì±„íƒ){expected_note}"
        )
    else:
        results = (
            f"pê°’ì´ {pv:.5f}ì´ë¯€ë¡œ {alpha} ë¯¸ë§Œ â†’ "
            f"ì„±ë³„ì— ë”°ë¼ ì„ í˜¸ ë¸Œëœë“œì— ì°¨ì´ê°€ ìˆë‹¤ (ëŒ€ë¦½ê°€ì„¤ ì±„íƒ){expected_note}"
        )
    
    return crossTbl, results, df

def save_brand_barFunc(df, out_path):
    """ì»¤í”¼ ë¸Œëœë“œë³„ ì„ í˜¸ë„ ì„¸ë¡œë§‰ëŒ€ ì°¨íŠ¸ ìƒì„±"""
    # ë°ì´í„° ê²€ì¦
    if df is None or df.empty or 'co_survey' not in df.columns:
        try:
            if os.path.exists(out_path):
                os.remove(out_path)
        except Exception:
            pass
        return False
    
    # ë¸Œëœë“œ ìˆœì„œ ì •ì˜
    order = ['ìŠ¤íƒ€ë²…ìŠ¤', 'ì»¤í”¼ë¹ˆ', 'ì´ë””ì•¼', 'íƒì•¤íƒìŠ¤']
    brand_counts = df['co_survey'].value_counts().reindex(order, fill_value=0)

    # ë¬´ì§€ê°œ ìƒ‰ìƒ ì ìš©
    cmap = plt.get_cmap('rainbow')
    n = len(brand_counts)
    colors = [cmap(i / max(n - 1, 1)) for i in range(n)]
    
    # ì°¨íŠ¸ ìƒì„±
    fig = plt.figure(figsize=(10, 6))
    ax = brand_counts.plot(kind='bar', width=0.6, color=colors, edgecolor='black')
    ax.set_xlabel('ì»¤í”¼ì‚¬')
    ax.set_ylabel('ì„ í˜¸ ê±´ìˆ˜')
    ax.set_title('ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ ê±´ìˆ˜')
    ax.set_xticklabels(order, rotation=0)
    
    # ë§‰ëŒ€ ìœ„ì— ê°’ í‘œì‹œ
    for i, v in enumerate(brand_counts):
        ax.text(i, v + 0.1, str(v), ha='center', va='bottom')
    
    fig.tight_layout()
    
    # ì´ë¯¸ì§€ ì €ì¥ ê²½ë¡œ ë””ë ‰í† ë¦¬ ìƒì„±
    os.makedirs(os.path.dirname(out_path), exist_ok=True)
    fig.savefig(out_path, dpi=120, bbox_inches='tight')
    plt.close(fig)
    
    return True

def surveyShow(request):
    """ì„¤ë¬¸ ê²°ê³¼ ì¡°íšŒ í˜ì´ì§€ (ê°œë³„ êµ¬í˜„ ê°€ëŠ¥)"""
    pass
```

---

## ğŸ¨ í…œí”Œë¦¿

### templates/index.html
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¤í”¼ ì„ í˜¸ë„ ì¡°ì‚¬</title>
</head>
<body>
    <h2>ì»¤í”¼ë¥¼ ì‚¬ë‘í•˜ë¼</h2>
    
    <nav>
        <a href="{% url 'survey_form' %}">[ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ ì¡°ì‚¬]</a>
        <a href="{% url 'survey_result' %}">[ì„ í˜¸ë„ ë¶„ì„ ê²°ê³¼]</a>
    </nav>
    
    <h1>Hello World</h1>
</body>
</html>
```

### templates/coffee/coffeesurvey.html (ì„ ìƒë‹˜ ë²„ì „)
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Coffee Survey</title>
</head>
<body>
    <h3>* ì»¤í”¼ ì „ë¬¸ì ì— ëŒ€í•œ ì†Œë¹„ì ì¸ì‹ ì¡°ì‚¬ *</h3>
    
    <form action="/coffee/surveyprocess" method="post">
        {% csrf_token %}
        
        <table>
            <tr>
                <td>ê·€í•˜ì˜ ì„±ë³„ì€?</td>
                <td>
                    <label for="genM">ë‚¨</label>
                    <input type="radio" id="genM" name="gender" value="ë‚¨" checked>&nbsp;&nbsp;
                    <label for="genF">ì—¬</label>
                    <input type="radio" id="genF" name="gender" value="ì—¬">
                </td>
            </tr>
            <tr>
                <td>ê·€í•˜ì˜ ë‚˜ì´ëŠ”?</td>
                <td>
                    <label for="age10">10ëŒ€</label>
                    <input type="radio" id="age10" name="age" value="10ëŒ€" checked>&nbsp;&nbsp;
                    <label for="age20">20ëŒ€</label>
                    <input type="radio" id="age20" name="age" value="20ëŒ€">&nbsp;&nbsp;
                    <label for="age30">30ëŒ€</label>
                    <input type="radio" id="age30" name="age" value="30ëŒ€">&nbsp;&nbsp;
                    <label for="age40">40ëŒ€</label>
                    <input type="radio" id="age40" name="age" value="40ëŒ€">&nbsp;&nbsp;
                    <label for="age50">50ëŒ€ ì´ìƒ</label>
                    <input type="radio" id="age50" name="age" value="50ëŒ€ ì´ìƒ">
                </td>
            </tr>
            <tr>
                <td>ì„ í˜¸í•˜ëŠ” ì»¤í”¼ ì „ë¬¸ì ì€?</td>
                <td>
                    <label for="starbucks">ìŠ¤íƒ€ë²…ìŠ¤</label>
                    <input type="radio" id="starbucks" name="co_survey" value="ìŠ¤íƒ€ë²…ìŠ¤" checked>&nbsp;&nbsp;
                    <label for="coffeebean">ì»¤í”¼ë¹ˆ</label>
                    <input type="radio" id="coffeebean" name="co_survey" value="ì»¤í”¼ë¹ˆ">&nbsp;&nbsp;
                    <label for="ediya">ì´ë””ì•¼</label>
                    <input type="radio" id="ediya" name="co_survey" value="ì´ë””ì•¼">&nbsp;&nbsp;
                    <label for="tomntoms">íƒì•¤íƒìŠ¤</label>
                    <input type="radio" id="tomntoms" name="co_survey" value="íƒì•¤íƒìŠ¤">
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center;">
                    <br>
                    <input type="submit" value="ì„¤ë¬¸ ì™„ë£Œ">
                    <input type="reset" value="ì´ˆê¸°í™”">
                </td>
            </tr>
        </table>
    </form>
</body>
</html>
```

### templates/coffee/result.html (ê²°ê³¼ ì¶œë ¥ í˜ì´ì§€)
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¤í”¼ ì„¤ë¬¸ì¡°ì‚¬ ê²°ê³¼</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; margin: 40px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section { margin: 30px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .result-text { font-size: 18px; font-weight: bold; color: #333; padding: 15px; background-color: #f9f9f9; border-radius: 5px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        .chart-container { text-align: center; margin: 20px 0; }
        .navigation { text-align: center; margin: 30px 0; }
        .navigation a { margin: 0 10px; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; }
        .navigation a:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ ë¶„ì„ ê²°ê³¼</h1>
        
        <!-- ì¹´ì´ì œê³± ê²€ì • ê²°ê³¼ -->
        <div class="section">
            <h2>ğŸ§® ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì • ê²°ê³¼</h2>
            <div class="result-text">
                {{ results|safe }}
            </div>
        </div>
        
        <!-- êµì°¨ë¶„í• í‘œ -->
        <div class="section">
            <h2>ğŸ“‹ ì„±ë³„-ì»¤í”¼ë¸Œëœë“œ êµì°¨ë¶„í• í‘œ</h2>
            {{ crossTbl|safe }}
        </div>
        
        <!-- ì°¨íŠ¸ ì˜ì—­ -->
        <div class="section">
            <h2>ğŸ“ˆ ì»¤í”¼ ë¸Œëœë“œë³„ ì„ í˜¸ë„ ì°¨íŠ¸</h2>
            <div class="chart-container">
                {% load static %}
                <img src="{% static 'images/cobar.png' %}" alt="ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ ì°¨íŠ¸" style="max-width: 100%; height: auto;">
            </div>
        </div>
        
        <!-- ì „ì²´ ë°ì´í„° -->
        <div class="section">
            <h2>ğŸ“‹ ì „ì²´ ì„¤ë¬¸ ë°ì´í„°</h2>
            {{ df|safe }}
        </div>
        
        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="navigation">
            <a href="/">ğŸ  ë©”ì¸ìœ¼ë¡œ</a>
            <a href="/coffee/survey">ğŸ“ ë‹¤ì‹œ ì„¤ë¬¸í•˜ê¸°</a>
        </div>
    </div>
</body>
</html>
```

### templates/coffee/survey_result.html
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¤ë¬¸ ê²°ê³¼</title>
    <style>
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        .result-section { margin: 30px 0; padding: 20px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h2>ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ ë¶„ì„ ê²°ê³¼</h2>
    
    <!-- ì¹´ì´ì œê³± ê²€ì • ê²°ê³¼ -->
    <div class="result-section">
        <h3>ğŸ§® ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì • ê²°ê³¼</h3>
        
        {% if decision %}
            <h4>ê²€ì • ê²°ë¡ </h4>
            <p><strong>{{ decision }}</strong></p>
            
            {% if chi2 %}
                <p><strong>ì¹´ì´ì œê³± í†µê³„ëŸ‰:</strong> {{ chi2 }}</p>
                <p><strong>ììœ ë„:</strong> {{ dof }}</p>
                <p><strong>ìœ ì˜ìˆ˜ì¤€:</strong> {{ alpha }}</p>
            {% endif %}
        {% endif %}
    </div>
    
    <!-- êµì°¨ë¶„í• í‘œ -->
    {% if crosstab %}
    <div class="result-section">
        <h3>ğŸ“Š ì„±ë³„-ì»¤í”¼ë¸Œëœë“œ êµì°¨ë¶„í• í‘œ</h3>
        
        <table>
            <thead>
                <tr>
                    {% for header in crosstab.headers %}
                        <th>{{ header }}</th>
                    {% endfor %}
                    <th>í–‰ í•©ê³„</th>
                </tr>
            </thead>
            <tbody>
                {% for row in crosstab.rows %}
                    <tr>
                        {% for cell in row %}
                            <td>{{ cell }}</td>
                        {% endfor %}
                        <td><strong>{{ crosstab.row_totals|slice:forloop.counter0 }}</strong></td>
                    </tr>
                {% endfor %}
                <tr>
                    <th>ì—´ í•©ê³„</th>
                    {% for col_total in crosstab.col_totals %}
                        <td><strong>{{ col_total }}</strong></td>
                    {% endfor %}
                    <td><strong>{{ crosstab.total }}</strong></td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endif %}
    
    <!-- ì „ì²´ ì„¤ë¬¸ ë°ì´í„° -->
    <div class="result-section">
        <h3>ğŸ“‹ ì „ì²´ ì„¤ë¬¸ ë°ì´í„°</h3>
        
        <table>
            <thead>
                <tr>
                    <th>ë²ˆí˜¸</th>
                    <th>ì„±ë³„</th>
                    <th>ë‚˜ì´ëŒ€</th>
                    <th>ì„ í˜¸ ë¸Œëœë“œ</th>
                </tr>
            </thead>
            <tbody>
                {% for survey in surveys %}
                <tr>
                    <td>{{ survey.rnum }}</td>
                    <td>{{ survey.gender }}</td>
                    <td>{{ survey.age }}ëŒ€</td>
                    <td>{{ survey.co_survey }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div style="text-align: center; margin: 30px;">
        <a href="{% url 'survey_form' %}">[ë‹¤ì‹œ ì„¤ë¬¸í•˜ê¸°]</a> |
        <a href="/">[ë©”ì¸ìœ¼ë¡œ]</a>
    </div>
</body>
</html>
```

---

## âš™ï¸ settings.py ì„¤ì •

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'coffeedb',
        'USER': 'root',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '3306',
    }
}

# ì•± ë“±ë¡
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',
]

# í•œêµ­ì–´ ì„¤ì •
LANGUAGE_CODE = 'ko-kr'
TIME_ZONE = 'Asia/Seoul'
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í”„ë¡œì íŠ¸ ì‹¤í–‰
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒì‚¬í•­)
python manage.py makemigrations
python manage.py migrate

# ì„œë²„ ì‹¤í–‰
python manage.py runserver
```

### 2. ì ‘ì† URL
- **ë©”ì¸ í˜ì´ì§€**: `http://127.0.0.1:8000/`
- **ì„¤ë¬¸ ì…ë ¥**: `http://127.0.0.1:8000/coffee/survey`
- **ê²°ê³¼ í™•ì¸**: `http://127.0.0.1:8000/coffee/surveyshow`

---

## ğŸ“Š ì¹´ì´ì œê³± ê²€ì • ì´ë¡ 

### ê°€ì„¤ ì„¤ì •
- **ê·€ë¬´ê°€ì„¤ (Hâ‚€)**: ì„±ë³„ê³¼ ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ëŠ” ì„œë¡œ ë…ë¦½ì´ë‹¤ (ê´€ë ¨ì´ ì—†ë‹¤)
- **ëŒ€ë¦½ê°€ì„¤ (Hâ‚)**: ì„±ë³„ê³¼ ì»¤í”¼ ë¸Œëœë“œ ì„ í˜¸ë„ëŠ” ì„œë¡œ ë…ë¦½ì´ ì•„ë‹ˆë‹¤ (ê´€ë ¨ì´ ìˆë‹¤)

### ê²€ì • í†µê³„ëŸ‰
```
Ï‡Â² = Î£[(ê´€ì¸¡ë„ìˆ˜ - ê¸°ëŒ€ë„ìˆ˜)Â² / ê¸°ëŒ€ë„ìˆ˜]
```

### ììœ ë„
```
df = (í–‰ì˜ ê°œìˆ˜ - 1) Ã— (ì—´ì˜ ê°œìˆ˜ - 1)
```

### íŒì • ê¸°ì¤€
- **Î± = 0.05** (ìœ ì˜ìˆ˜ì¤€ 5%)
- **Ï‡Â² > ì„ê³„ê°’**: ê·€ë¬´ê°€ì„¤ ê¸°ê° â†’ ê´€ë ¨ì„± ìˆìŒ
- **Ï‡Â² â‰¤ ì„ê³„ê°’**: ê·€ë¬´ê°€ì„¤ ì±„íƒ â†’ ê´€ë ¨ì„± ì—†ìŒ

---

## ğŸ“Š êµ¬í˜„ ë°©ì‹ ë¹„êµ ë¶„ì„

### ğŸ¯ **ì„ ìƒë‹˜ ë²„ì „ vs í•™ìƒ ë²„ì „ ìƒì„¸ ë¹„êµ**

| êµ¬ë¶„ | í•™ìƒ ë²„ì „ | ì„ ìƒë‹˜ ë²„ì „ | ì¥ë‹¨ì  ë¶„ì„ |
|------|-----------|-------------|-------------|
| **ì¹´ì´ì œê³± ê³„ì‚°** | ìˆ˜ë™ êµ¬í˜„ (ì„ê³„ê°’ í…Œì´ë¸”) | `scipy.stats.chi2_contingency()` | ì„ ìƒë‹˜: ì •í™•ì„±â†‘, ì½”ë“œ ê°„ê²° |
| **ë°ì´í„° ì²˜ë¦¬** | Django ORM + ìˆ˜ë™ ì§‘ê³„ | pandas DataFrame | ì„ ìƒë‹˜: ë°ì´í„° ì¡°ì‘ ìš©ì´ì„±â†‘ |
| **êµì°¨í‘œ ìƒì„±** | ìˆ˜ë™ 2ì°¨ì› ë°°ì—´ | `pd.crosstab()` | ì„ ìƒë‹˜: ì½”ë“œ ê°€ë…ì„±â†‘ |
| **ì‹œê°í™”** | ë¯¸êµ¬í˜„ | matplotlib ì°¨íŠ¸ ìƒì„± | ì„ ìƒë‹˜: ì™„ì „í•œ ê¸°ëŠ¥ ì œê³µ |
| **í•¨ìˆ˜ êµ¬ì¡°** | ë‹¨ì¼ í•¨ìˆ˜ì— ëª¨ë“  ë¡œì§ | ëª¨ë“ˆí™”ëœ ë¶„ë¦¬ í•¨ìˆ˜ | ì„ ìƒë‹˜: ì¬ì‚¬ìš©ì„±â†‘, ìœ ì§€ë³´ìˆ˜â†‘ |
| **ì—ëŸ¬ ì²˜ë¦¬** | ê¸°ë³¸ì  ì¡°ê±´ í™•ì¸ | í¬ê´„ì  ê²€ì¦ + ê²½ê³  | ì„ ìƒë‹˜: ì•ˆì •ì„±â†‘ |
| **ê²°ê³¼ ì¶œë ¥** | ìˆ˜ë™ ë”•ì…”ë„ˆë¦¬ êµ¬ì¡° | `to_html()` ìë™ ë³€í™˜ | ì„ ìƒë‹˜: ê°œë°œ íš¨ìœ¨ì„±â†‘ |

### ğŸ”§ **í•µì‹¬ ì°¨ì´ì  ìƒì„¸ ë¶„ì„**

#### 1. **ğŸ“ˆ ì¹´ì´ì œê³± ê²€ì • êµ¬í˜„ ë°©ì‹**

**ğŸ”¸ í•™ìƒ ë²„ì „ (ìˆ˜ë™ ê³„ì‚°)**
```python
# ì¥ì : í†µê³„ ì´ë¡  ì´í•´ë„ í–¥ìƒ, ê³„ì‚° ê³¼ì • ëª…í™•
# ë‹¨ì : ì½”ë“œ ë³µì¡ì„±, ì˜¤ë¥˜ ê°€ëŠ¥ì„±

# ìˆ˜ë™ ì¹´ì´ì œê³± ê³„ì‚°
chi2_val = 0.0
for i in range(r):
    for j in range(c):
        e = expected[i][j]
        o = obs[i][j]
        if e > 0:
            chi2_val += (o - e) ** 2 / e

# ì„ê³„ê°’ í…Œì´ë¸” í•˜ë“œì½”ë”©
critical_005 = {1: 3.8415, 2: 5.9915, 3: 7.8147, ...}
```

**ğŸ”¸ ì„ ìƒë‹˜ ë²„ì „ (scipy í™œìš©)**
```python
# ì¥ì : ì •í™•ì„±, ê°„ê²°ì„±, í™•ì¥ì„±
# ë‹¨ì : ë¸”ë™ë°•ìŠ¤ ëŠë‚Œ (ë‚´ë¶€ ê³„ì‚° ê³¼ì • ë¶ˆíˆ¬ëª…)

# scipy í•¨ìˆ˜ ì§ì ‘ ì‚¬ìš©
st, pv, ddof, expected = stats.chi2_contingency(crossTbl)
# ëª¨ë“  ê³„ì‚°ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨
```

#### 2. **ğŸ“Š ë°ì´í„° ì²˜ë¦¬ ë° êµì°¨í‘œ ìƒì„±**

**ğŸ”¸ í•™ìƒ ë²„ì „ (Django ORM)**
```python
# ì¥ì : Django ë„¤ì´í‹°ë¸Œ, SQL ì´í•´ í•„ìš”
# ë‹¨ì : ë³µì¡í•œ ë°ì´í„° ì¡°ì‘ ì‹œ í•œê³„

agg = Survey.objects.values('gender', 'co_survey').annotate(cnt=Count('rnum'))
# ìˆ˜ë™ìœ¼ë¡œ 2ì°¨ì› ë°°ì—´ êµ¬ì„±
obs = [[0 for _ in range(c)] for __ in range(r)]
```

**ğŸ”¸ ì„ ìƒë‹˜ ë²„ì „ (pandas)**
```python
# ì¥ì : ë°ì´í„° ë¶„ì„ì— ìµœì í™”, ê°„ê²°í•œ ì½”ë“œ
# ë‹¨ì : ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„±

df = pd.DataFrame(rdata)
crossTbl = pd.crosstab(index=df['gender'], columns=df['co_survey'])
```

#### 3. **ğŸ¨ ì‹œê°í™” ë° ê²°ê³¼ ì¶œë ¥**

**ğŸ”¸ í•™ìƒ ë²„ì „**
```python
# ì‹œê°í™” ë¯¸êµ¬í˜„
# ìˆ˜ë™ HTML êµ¬ì¡° ìƒì„± í•„ìš”
crosstab = {
    'headers': ['ì„±ë³„ \\ ë¸Œëœë“œ'] + brands,
    'rows': [...],
}
```

**ğŸ”¸ ì„ ìƒë‹˜ ë²„ì „**
```python
# ì™„ì „í•œ ì°¨íŠ¸ ì‹œìŠ¤í…œ
def save_brand_barFunc(df, out_path):
    # ë¬´ì§€ê°œ ìƒ‰ìƒ ì°¨íŠ¸
    cmap = plt.get_cmap('rainbow')
    colors = [cmap(i / max(n - 1, 1)) for i in range(n)]
    fig.savefig(out_path, dpi=120, bbox_inches='tight')

# ìë™ HTML í…Œì´ë¸” ìƒì„±
'crossTbl': crossTbl.to_html()
```

### ğŸ’¡ **ì‹¤ë¬´ ê´€ì ì—ì„œì˜ ê¶Œì¥ì‚¬í•­**

#### âœ… **ì„ ìƒë‹˜ ë²„ì „ì´ ìš°ìˆ˜í•œ ì´ìœ **

1. **ğŸ”¬ í†µê³„ì  ì •í™•ì„±**
   - scipy ê²€ì¦ëœ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
   - ìˆ˜ì¹˜ì  ì•ˆì •ì„± ë³´ì¥
   - p-value ì •í™•ë„ í–¥ìƒ

2. **ğŸ› ï¸ ê°œë°œ íš¨ìœ¨ì„±**
   - pandasì˜ ê°•ë ¥í•œ ë°ì´í„° ì²˜ë¦¬ ê¸°ëŠ¥
   - ì½”ë“œ ë¼ì¸ ìˆ˜ ëŒ€í­ ê°ì†Œ
   - ìë™ HTML ë³€í™˜ìœ¼ë¡œ í…œí”Œë¦¿ ì‘ì—… ê°„ì†Œí™”

3. **ğŸ“ˆ í™•ì¥ì„±**
   - ëª¨ë“ˆí™”ëœ í•¨ìˆ˜ë¡œ ë‹¤ë¥¸ ë¶„ì„ì—ë„ ì¬ì‚¬ìš©
   - ì°¨íŠ¸ ê¸°ëŠ¥ìœ¼ë¡œ ë‹¤ì–‘í•œ ì‹œê°í™” í™•ì¥ ê°€ëŠ¥
   - ìƒˆë¡œìš´ í†µê³„ ê²€ì • ì¶”ê°€ ìš©ì´

4. **ğŸ”’ ì•ˆì •ì„±**
   - ê¸°ëŒ€ë¹ˆë„ ê²€ì¦ ìë™í™”
   - ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ë‚´ì¥
   - ì˜ˆì™¸ ìƒí™© ëŒ€ì‘ ê°•í™”

#### ğŸ“š **í•™ìŠµ ëª©ì ì—ì„œëŠ” ë‘˜ ë‹¤ ê°€ì¹˜ ìˆìŒ**

- **í•™ìƒ ë²„ì „**: í†µê³„ ì´ë¡  ê¹Šì´ ìˆëŠ” ì´í•´
- **ì„ ìƒë‹˜ ë²„ì „**: ì‹¤ë¬´ ì ìš© ë° íš¨ìœ¨ì  ê°œë°œ

### ğŸš€ **ìµœì¢… ì¶”ì²œ**

**ì‹¤ë¬´ í”„ë¡œì íŠ¸**ì—ì„œëŠ” **ì„ ìƒë‹˜ ë²„ì „**ì„ ê°•ë ¥íˆ ì¶”ì²œí•©ë‹ˆë‹¤:

1. ê²€ì¦ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ìœ¼ë¡œ **ì‹ ë¢°ì„±** í™•ë³´
2. pandas í™œìš©ìœ¼ë¡œ **ê°œë°œ ì†ë„** í–¥ìƒ  
3. ì™„ì „í•œ ì‹œê°í™”ë¡œ **ì‚¬ìš©ì ê²½í—˜** ê°œì„ 
4. ëª¨ë“ˆí™” êµ¬ì¡°ë¡œ **ìœ ì§€ë³´ìˆ˜ì„±** í–¥ìƒ

íŠ¹íˆ **ì°¨íŠ¸ ê¸°ëŠ¥**ê³¼ **ìë™ HTML ìƒì„±**ì€ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œ ë§¤ìš° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤!

---

## ğŸ¯ í•™ìŠµ ëª©í‘œ ë‹¬ì„±

ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ë‹¤ìŒì„ í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### âœ… Django ì›¹ ê°œë°œ
- ëª¨ë¸, ë·°, í…œí”Œë¦¿ íŒ¨í„´ ì´í•´
- URL ë¼ìš°íŒ… ë° í¼ ì²˜ë¦¬
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

### âœ… í†µê³„ ë¶„ì„
- ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì • ì´ë¡  ë° ì‹¤ìŠµ
- êµì°¨ë¶„í• í‘œ ìƒì„± ë° í•´ì„
- ê°€ì„¤ ê²€ì • ê³¼ì • ì´í•´

### âœ… ë°ì´í„° ì‹œê°í™”
- Matplotlibì„ í™œìš©í•œ ì°¨íŠ¸ ìƒì„±
- ì›¹ì—ì„œ í†µê³„ ê²°ê³¼ í‘œí˜„

### âœ… ì‹¤ë¬´ ì‘ìš©
- ì„¤ë¬¸ì¡°ì‚¬ ì‹œìŠ¤í…œ êµ¬í˜„
- í†µê³„ ë¶„ì„ ê²°ê³¼ ì›¹ ì¶œë ¥
- ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

---

*ì´ ë¬¸ì„œëŠ” Djangoì™€ í†µê³„í•™ì„ ì—°ê²°í•œ ì‹¤ë¬´í˜• í”„ë¡œì íŠ¸ ê°€ì´ë“œì…ë‹ˆë‹¤. ì‹¤ì œ ë§ˆì¼€íŒ… ë¦¬ì„œì¹˜ë‚˜ ë°ì´í„° ë¶„ì„ ì—…ë¬´ì— í™œìš©í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ í‹€ì„ ì œê³µí•©ë‹ˆë‹¤.*