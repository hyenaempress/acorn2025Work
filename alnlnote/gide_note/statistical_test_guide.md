# 통계 검정 방법 선택 완전 가이드 ⭐


# 22.04 통계 검정 방법 총정리 - 완전 가이드 ⭐

## 🎯 이 챕터가 필요한 이유

22.03 가설 검정에서는 **기본 개념과 절차**를 다뤘지만, 실제로 **"어떤 검정을 언제 써야 하는가?"**는 여전히 막막합니다. 

이 챕터에서는 **실무에서 바로 적용 가능한 검정 선택 가이드**를 제공합니다.

---

## 📊 22.04.01 데이터 타입과 검정 선택 완전 가이드

## 📊 통계 검정 선택 매트릭스

| 독립변수 (X) | 종속변수 (Y) | 그룹 수 | 표본 관계 | 검정 방법 | Python 함수 |
|-------------|-------------|--------|----------|----------|------------|
| **없음** | 범주형 | - | - | 카이제곱 적합도 검정 | `scipy.stats.chisquare()` |
| **없음** | 연속형 | - | - | 일표본 t검정 | `scipy.stats.ttest_1samp()` |
| 범주형 | 범주형 | 2+ | 독립 | 카이제곱 독립성 검정 | `scipy.stats.chi2_contingency()` |
| 범주형 | 연속형 | 2 | 독립 | 독립표본 t검정 | `scipy.stats.ttest_ind()` |
| 범주형 | 연속형 | 2 | 대응 | 대응표본 t검정 | `scipy.stats.ttest_rel()` |
| 범주형 | 연속형 | 3+ | 독립 | 일원분산분석 (ANOVA) | `scipy.stats.f_oneway()` |
| 범주형 | 연속형 | 3+ | 대응 | 반복측정 ANOVA | `statsmodels.stats.anova` |
| 연속형 | 연속형 | - | - | 상관분석 | `scipy.stats.pearsonr()` |
| 연속형 | 연속형 | - | - | 회귀분석 | `sklearn.linear_model` |

### 🚨 가정 위반 시 대안

| 위반된 가정 | 원래 검정 | 대안 검정 | Python 함수 |
|-----------|---------|---------|------------|
| 정규성 | t검정 | Mann-Whitney U | `scipy.stats.mannwhitneyu()` |
| 정규성 | ANOVA | Kruskal-Wallis | `scipy.stats.kruskal()` |
| 등분산성 | t검정 | Welch's t-test | `ttest_ind(equal_var=False)` |
| 독립성 | t검정/ANOVA | 혼합효과모델 | `statsmodels.MixedLM()` |

---

## 🎯 요약: 실무에서 바로 써먹는 5단계 가이드

> **"통계는 어렵지 않아요. 순서만 제대로 따라가면 됩니다!"**

### 🚀 **1단계: 연구질문 명확화 - "내가 뭘 알고 싶은 거지?"**

**여기서 90%가 결정됩니다!** 질문이 애매하면 아무리 복잡한 통계를 써도 의미 없어요.

**🗣️ 실제 상황에서 이렇게 생각해보세요:**

> **"우리 회사 신제품이 기존 제품보다 정말 좋은가?"** 
→ 이건 아직 애매해요. 뭐가 "좋다"는 건지 구체적이지 않죠.

> **"신제품 고객 만족도가 기존 제품보다 높은가?"**
→ 이제 좀 나아졌어요. 하지만 여전히 "높다"가 애매하네요.

> **"신제품 사용자의 평균 만족도 점수(1-10점)가 기존 제품 사용자보다 통계적으로 유의하게 높은가?"**
→ 완벽! 이제 측정 가능하고 검정 가능한 질문이 되었습니다.

**🎯 이 단계에서 꼭 해야 할 것들:**
- **독립변수 명확히 하기**: "제품 종류(신제품 vs 기존제품)" - 이게 그룹을 나누는 기준
- **종속변수 명확히 하기**: "만족도 점수" - 이게 우리가 측정하려는 결과
- **구체적인 가설 설정**: "신제품 평균 만족도 > 기존제품 평균 만족도"

**💡 팁**: 동료에게 설명했을 때 "아, 그래서 뭘 확인하려는 거야?"라는 말이 안 나와야 성공!

---

### 📊 **2단계: 데이터 타입 확인 - "내 데이터가 어떻게 생겼지?"**

**이게 제일 헷갈리는 부분이에요!** 숫자로 되어 있다고 다 연속형이 아니거든요.

**🗣️ 실무에서 자주 겪는 착각들:**

> **"성별을 1(남), 2(여)로 코딩했으니까 연속형이야!"** 
→ ❌ 아니에요! 1과 2 사이에 1.5가 의미가 있나요? 없죠! 이건 범주형입니다.

> **"만족도를 1(매우불만)~5(매우만족)로 했으니까 연속형이야!"**
→ 🤔 이건 좀 애매해요. 순서는 있지만 1과 2 사이의 간격이 정확히 동일한지 보장할 수 없어요. 보통은 연속형으로 근사해서 쓰긴 하지만...

> **"나이는 숫자니까 당연히 연속형이지!"**
→ ✅ 맞아요! 25.5세, 30.2세처럼 의미 있는 값들이 가능하죠.

**🎯 간단한 판별법:**
1. **"이 변수에 평균을 구하는 게 의미가 있나?"**
   - 만족도 평균: 3.2점 → 의미 있음 (연속형으로 취급 가능)
   - 성별 평균: 1.6 → 의미 없음 (범주형)

2. **"중간값이 실제로 존재할 수 있나?"**
   - 키 175.5cm → 가능 (연속형)
   - 자녀수 2.3명 → 불가능하지만 평균으론 가능 (연속형으로 취급)
   - 혈액형 "A와 B 사이" → 불가능 (범주형)

**💡 그룹 개수도 중요해요:**
- 2그룹 (남 vs 여) → t검정
- 3그룹 이상 (A학과 vs B학과 vs C학과) → ANOVA

**🔄 대응표본 vs 독립표본:**
- **대응표본**: 같은 사람의 전후 비교 (약 복용 전후 혈압)
- **독립표본**: 다른 사람들 간 비교 (남자 키 vs 여자 키)

---

### 🎯 **3단계: 검정 방법 선택 - "이제 뭘 써야 하지?"**

**앞에서 매트릭스 보셨죠? 이제 기계적으로 따라가면 됩니다!**

**🗣️ 실제로 이렇게 생각해보세요:**

> **"아, 독립변수가 범주형(제품종류)이고 종속변수가 연속형(만족도)이네? 그리고 2그룹이고... 그럼 독립표본 t검정이구나!"**

**⚠️ 하지만 잠깐! 함정이 있어요:**

**표본 크기 확인:**
- 각 그룹에 최소 30명씩은 있나요? 
- 너무 적으면 비모수 검정을 고려해야 해요.

**특수 상황 체크:**
- 혹시 시간에 따른 변화를 보는 건 아닌가요? (반복측정)
- 여러 번 측정한 데이터인가요? (다층 데이터)
- 결측치가 너무 많지는 않나요?

**💡 실무 팁:** 
- 확신이 안 서면 **여러 방법으로 검정**해보세요! 
- SciPy로 기본 t검정 → Statsmodels로 세부 확인 → 비모수 검정으로 재확인
- 결과가 비슷하게 나오면 안심하고 쓰면 돼요.

---

### 🔍 **4단계: 가정 확인 - "내 데이터가 이 검정을 써도 되나?"**

**이거 안 하고 바로 검정하는 사람이 80%예요!** 그런데 가정 위반하면 결과를 믿을 수 없어요.

**🗣️ 각 가정을 쉽게 이해해보면:**

**🎲 정규성 - "내 데이터가 종 모양으로 생겼나?"**
```python
# 이렇게 확인해보세요
import matplotlib.pyplot as plt
plt.hist(data)  # 히스토그램이 종 모양인가?
plt.show()

from scipy.stats import shapiro
stat, p = shapiro(data)  # p > 0.05면 정규분포!
```

> **"히스토그램 봤는데 왼쪽으로 쏠려있어요!"**
→ 정규성 위반. log 변환하거나 비모수 검정 쓰세요.

**⚖️ 등분산성 - "두 그룹의 퍼진 정도가 비슷한가?"**
```python
# 박스플롯으로 눈으로 확인
import seaborn as sns
sns.boxplot(x='그룹', y='값', data=df)  # 박스 크기가 비슷한가?

from scipy.stats import levene
stat, p = levene(group1, group2)  # p > 0.05면 등분산!
```

> **"한 그룹은 값이 다 비슷한데 다른 그룹은 엄청 퍼져있어요!"**
→ 등분산성 위반. Welch's t-test 쓰세요 (equal_var=False)

**🔗 독립성 - "데이터들이 서로 영향 안 주나?"**
- 같은 학교에서 뽑은 학생들? → 독립성 의심
- 같은 가족 구성원들? → 독립성 위반
- 시간 순서대로 측정한 데이터? → 자기상관 가능성

**💡 실무에서는:**
- **가정 위반이 심하지 않으면** 그냥 써도 돼요 (robust)
- **심하게 위반하면** 비모수 검정이나 변환 고려
- **확신이 안 서면** 전문가나 커뮤니티에 물어보세요!

---

### 📈 **5단계: 결과 해석 - "이제 뭘 말해줘야 하지?"**

**통계 결과를 비즈니스 언어로 번역하는 단계예요!**

**🗣️ 실제 보고할 때 이렇게 말하세요:**

**❌ 이렇게 말하지 마세요:**
> "t-statistic이 2.34이고 p-value가 0.021입니다."

**✅ 이렇게 말하세요:**
> "신제품의 고객 만족도가 기존 제품보다 통계적으로 유의하게 높습니다(p<0.05). 구체적으로 신제품은 평균 7.8점, 기존 제품은 7.2점으로 0.6점 차이가 납니다. 이는 실무적으로도 의미 있는 차이로 판단됩니다."

**🎯 꼭 포함해야 할 요소들:**

1. **방향성**: "높다/낮다", "차이가 있다/없다"
2. **통계적 유의성**: "p<0.05로 통계적으로 유의함"
3. **구체적 수치**: "평균 7.8점 vs 7.2점"
4. **실무적 의미**: "고객들이 체감할 수 있는 차이"
5. **신뢰구간**: "95% 신뢰구간 [0.2, 1.0]점 차이"

**📊 시각화도 꼭!**
```python
# 이런 그래프로 보여주세요
sns.boxplot(x='제품종류', y='만족도', data=df)
plt.title('제품별 고객 만족도 비교')
plt.ylabel('만족도 (1-10점)')
```

**⚠️ 절대 하지 말아야 할 해석:**
- ❌ "p=0.049니까 간신히 유의하네요" → 경계선 언급 금지
- ❌ "통계적으로 유의하니까 효과가 크다" → 유의성 ≠ 중요성
- ❌ "이 결과로 모든 고객이 만족할 거다" → 과도한 일반화

**💡 마지막 팁:**
- **효과크기도 꼭 보고하세요**: Cohen's d = 0.5 (중간 효과)
- **한계점도 언급하세요**: "이 연구는 20-30대 직장인 대상으로 한정됨"
- **다음 단계 제안하세요**: "더 정확한 확인을 위해 대규모 A/B 테스트 추천"

---

## 🚨 **현실에서 자주 겪는 함정들 (경험담)**

### 😅 **"숫자면 다 연속형인 줄 알았어요"**
> 실제 사례: 고객 ID를 1,2,3,4...로 매겼는데 이걸로 평균을 구하려고 했던 신입 분석가

### 🤦‍♀️ **"p-value만 보고 끝!"**
> 실제 사례: p=0.03이 나왔는데 실제 차이는 0.001%... 통계적으론 유의하지만 실무적으론 무의미

### 😱 **"가정 확인? 그런 거 있었나요?"**
> 실제 사례: 명백히 비정규분포 데이터에 t검정 써서 완전히 잘못된 결론 도출

### 🤯 **"데이터 많으면 다 유의하게 나와요!"**
> 실제 사례: 100만 건 데이터에서 아무 의미 없는 0.1% 차이도 p<0.001로 유의하게...

**💡 이런 실수들 피하려면:**
- 체크리스트를 종교처럼 따르세요!
- 의심스러우면 다른 방법으로도 확인해보세요!
- 동료나 전문가에게 검토받으세요!
- 비즈니스 상식과 비교해보세요!

**🎯 마지막 조언:**
> 통계는 도구일 뿐이에요. 가장 중요한 건 **"이 결과가 실제로 의미가 있는가?"**를 항상 생각하는 것입니다. 숫자에 매몰되지 말고, 사람과 비즈니스를 생각하세요!

---

## 🚀 다음 단계: 이제 각 검정을 깊이 있게!

이 **22.04 검정 방법 총정리**로 기초를 탄탄히 한 후, 다음 챕터들에서 각 검정을 실전에서 완벽히 활용할 수 있도록 깊이 있게 다뤄보겠습니다:

- **22.05 카이제곱 검정 완전 가이드**: 범주형 데이터 분석의 모든 것
- **22.06 t검정 완전 가이드**: 평균 비교의 핵심 도구  
- **22.07 ANOVA 완전 가이드**: 다중 그룹 비교의 강력한 방법

**이제 어떤 상황에서든 올바른 통계 검정을 자신 있게 선택할 수 있습니다!** 🎯