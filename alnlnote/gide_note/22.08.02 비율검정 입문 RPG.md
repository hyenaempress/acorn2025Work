# 🏹 비율검정이 뭐야?! 
## 🎯 통계 왕국의 성공률 판별사 완전 해부

---

## 🌟 **비율검정 = 성공률의 진실을 가리는 마법**

**통계 왕국**에는 **성공/실패**만 있는 이항 세계가 있습니다. 여기서 활동하는 **비율검정 판별사**들은 **성공률이 진짜인지 가짜인지** 판별하는 전문가들입니다!

---

## 🎭 **비율검정 길드의 두 명수**

### 🏹 **일원 검정사 Solo** (One-sample Proportion Test)
```
👤 이름: 솔로 (Solo the Single)
🎯 전문분야: 한 집단 vs 기준값 비교
🔍 대표적 임무: "우리 길드 합격률이 70% 맞아?"
⚔️ 무기: 기준 비교 활 (Standard Reference Bow)
🎪 출동 상황: 
   • 신제품 만족도가 80% 넘나?
   • 우리 회사 흡연율이 국가 평균과 같나?
   • 치료법 성공률이 기존 70%보다 높나?
```

### ⚔️ **이원 검정사 Dual** (Two-sample Proportion Test)
```
👥 이름: 듀얼 (Dual the Twin)
🎯 전문분야: 두 집단 간 성공률 비교
🔍 대표적 임무: "A길드와 B길드 중 누가 더 뛰어나?"
⚔️ 무기: 쌍검 비교술 (Twin Blade Comparison)
🎪 출동 상황:
   • 남성 vs 여성 합격률 차이?
   • A약 vs B약 치료 성공률?
   • 기존 광고 vs 신규 광고 클릭률?
```

---

## 🎮 **RPG 모험: 길드 시험 성공률 의혹 사건**

### 📜 **Chapter 1: 의혹의 시작**

```
🏰 통계 왕국 길드 본부...

📢 길드장: "최근 A길드 시험 합격률이 80%라고 하는데..."
😤 시민들: "너무 높은 거 아닌가? 뇌물 준 게 아닐까?"
🤔 길드장: "과연 A길드가 정말 80% 성공률을 가지고 있을까?"

📊 데이터 수집:
   • A길드 응시자: 100명
   • 합격자: 85명
   • 성공률: 85%
   • 의심되는 기준: 80%

🕵️ 길드장: "솔로! 이 사건을 맡아라!"
```

### ⚔️ **Chapter 2: 솔로 검정사의 수사**

```python
def 솔로_검정사의_수사():
    """일원 비율검정 - A길드 성공률 진실 규명"""
    
    print("🏹 솔로 검정사 출동!")
    print("🕵️ '과연 A길드 성공률이 정말 80%일까?'")
    print("=" * 60)
    
    # 사건 정보
    응시자수 = 100
    합격자수 = 85
    실제_성공률 = 합격자수 / 응시자수
    의심_기준 = 0.80
    
    print(f"📊 사건 정보:")
    print(f"   • 응시자 수: {응시자수}명")
    print(f"   • 합격자 수: {합격자수}명") 
    print(f"   • 실제 성공률: {실제_성공률:.1%}")
    print(f"   • 의심되는 기준: {의심_기준:.0%}")
    
    # 가설 설정
    print(f"\n⚖️ 솔로의 가설 설정:")
    print(f"   🛡️ 귀무가설 (H₀): A길드 성공률 = 80% (정당)")
    print(f"   ⚔️ 대립가설 (H₁): A길드 성공률 ≠ 80% (수상)")
    
    # 비율검정 마법 시전
    import numpy as np
    from scipy import stats
    
    # Z-통계량 계산
    p0 = 의심_기준  # 기준 비율
    p_hat = 실제_성공률  # 표본 비율
    n = 응시자수
    
    # 표준오차 계산
    se = np.sqrt(p0 * (1 - p0) / n)
    
    # Z 통계량
    z_stat = (p_hat - p0) / se
    
    # p-value 계산 (양측검정)
    p_value = 2 * (1 - stats.norm.cdf(abs(z_stat)))
    
    print(f"\n🔮 솔로의 마법 분석:")
    print(f"   ⚡ Z-통계량: {z_stat:.4f}")
    print(f"   🎲 p-value: {p_value:.6f}")
    print(f"   🎯 유의수준: 0.05")
    
    # 판결
    if p_value < 0.05:
        판결 = "🚨 수상함! (유의함)"
        해석 = "85%는 우연이 아니야! 뭔가 조작된 듯?"
    else:
        판결 = "✅ 정당함 (유의하지 않음)"
        해석 = "85%도 80%와 큰 차이 없어. 그냥 운이 좋았나봐."
    
    print(f"\n🏆 솔로의 최종 판결:")
    print(f"   {판결}")
    print(f"   💭 솔로: '{해석}'")
    
    return z_stat, p_value

# 수사 진행!
z_result, p_result = 솔로_검정사의_수사()
```

### 🤺 **Chapter 3: 새로운 사건 - 두 길드 대결**

```
📢 다음날 아침...

😠 B길드장: "우리 B길드가 A길드보다 실력이 더 좋아!"
😤 A길드장: "말도 안 돼! 우리가 더 뛰어나다!"
🤔 시민들: "둘 중 누가 진짜 더 실력이 좋을까?"

📊 대결 데이터:
   • A길드: 200명 응시, 170명 합격 (85%)
   • B길드: 150명 응시, 135명 합격 (90%)

🕵️ 길드장: "듀얼! 이번엔 네가 나서라!"
```

### ⚔️ **Chapter 4: 듀얼 검정사의 대결 심판**

```python
def 듀얼_검정사의_대결심판():
    """이원 비율검정 - 두 길드 성공률 비교"""
    
    print("⚔️ 듀얼 검정사 출동!")
    print("🤺 'A길드 vs B길드, 누가 진짜 더 뛰어난가?'")
    print("=" * 60)
    
    # 대결 정보
    A길드_응시 = 200
    A길드_합격 = 170
    B길드_응시 = 150  
    B길드_합격 = 135
    
    A길드_성공률 = A길드_합격 / A길드_응시
    B길드_성공률 = B길드_합격 / B길드_응시
    
    print(f"📊 대결 현황:")
    print(f"   🔵 A길드: {A길드_합격}/{A길드_응시} = {A길드_성공률:.1%}")
    print(f"   🔴 B길드: {B길드_합격}/{B길드_응시} = {B길드_성공률:.1%}")
    print(f"   📏 차이: {B길드_성공률 - A길드_성공률:+.1%}")
    
    # 가설 설정
    print(f"\n⚖️ 듀얼의 가설 설정:")
    print(f"   🛡️ 귀무가설 (H₀): 두 길드 성공률 같음 (PA = PB)")
    print(f"   ⚔️ 대립가설 (H₁): 두 길드 성공률 다름 (PA ≠ PB)")
    
    # 이원 비율검정 마법
    from statsmodels.stats.proportion import proportions_ztest
    
    count = np.array([A길드_합격, B길드_합격])
    nobs = np.array([A길드_응시, B길드_응시])
    
    z_stat, p_value = proportions_ztest(count, nobs)
    
    print(f"\n🔮 듀얼의 쌍검 분석:")
    print(f"   ⚡ Z-통계량: {z_stat:.4f}")
    print(f"   🎲 p-value: {p_value:.6f}")
    print(f"   🎯 유의수준: 0.05")
    
    # 심판 결과
    if p_value < 0.05:
        판결 = "🏆 실력 차이 존재! (유의함)"
        if B길드_성공률 > A길드_성공률:
            승자 = "B길드 승리!"
        else:
            승자 = "A길드 승리!"
    else:
        판결 = "🤝 실력 비슷함 (유의하지 않음)"
        승자 = "무승부! 둘 다 잘해요."
    
    print(f"\n🏆 듀얼의 최종 심판:")
    print(f"   {판결}")
    print(f"   🎊 결과: {승자}")
    print(f"   💭 듀얼: '통계가 진실을 말해주지!'")
    
    return z_stat, p_value

# 대결 심판!
z_dual, p_dual = 듀얼_검정사의_대결심판()
```

---

## 🧙‍♂️ **비율검정의 마법 원리 해부**

### ⚡ **핵심 마법 공식들**

#### **솔로의 일원 검정 마법**
```python
def 솔로의_비밀공식():
    """일원 비율검정의 마법 공식"""
    
    print("🏹 솔로의 비밀 마법서 공개!")
    print("=" * 40)
    
    공식들 = {
        "표본 비율": "p̂ = 성공횟수 / 시행횟수",
        "표준오차": "SE = √[p₀ × (1-p₀) / n]",
        "Z통계량": "Z = (p̂ - p₀) / SE",
        "판별기준": "p-value < 0.05 → 수상함!"
    }
    
    for 이름, 공식 in 공식들.items():
        print(f"📜 {이름}: {공식}")
    
    print(f"\n💡 솔로의 조언:")
    print(f"   • p₀: 의심되는 기준 비율")
    print(f"   • p̂: 실제 관측된 표본 비율")
    print(f"   • n: 시행 횟수 (표본 크기)")
    print(f"   • SE: 표준오차 (얼마나 정확한지)")

솔로의_비밀공식()
```

#### **듀얼의 이원 검정 마법**
```python
def 듀얼의_쌍검술():
    """이원 비율검정의 마법 공식"""
    
    print("⚔️ 듀얼의 쌍검술 비밀서 공개!")
    print("=" * 40)
    
    쌍검술 = {
        "통합 비율": "p̂ = (x₁ + x₂) / (n₁ + n₂)",
        "통합 표준오차": "SE = √[p̂(1-p̂) × (1/n₁ + 1/n₂)]",
        "Z통계량": "Z = (p̂₁ - p̂₂) / SE",
        "판별기준": "p-value < 0.05 → 실력 차이 있음!"
    }
    
    for 기술, 공식 in 쌍검술.items():
        print(f"🗡️ {기술}: {공식}")
    
    print(f"\n💡 듀얼의 조언:")
    print(f"   • p̂₁, p̂₂: 각 집단의 성공률")
    print(f"   • n₁, n₂: 각 집단의 크기")
    print(f"   • 통합비율: 전체적인 성공률")
    print(f"   • 통합SE: 두 집단 비교용 표준오차")

듀얼의_쌍검술()
```

---

## 🎯 **실전 미션: 비율검정 마스터 되기**

### 🎮 **미션 1: 광고 효과 검증**

```python
def 광고효과_검증미션():
    """실전 미션 1: 새 광고의 클릭률이 진짜 높을까?"""
    
    print("🎯 미션 1: 광고 클릭률 검증")
    print("🎬 상황: 기존 광고 클릭률 3%, 새 광고를 10,000명에게 노출했더니 350명 클릭!")
    print("❓ 문제: 새 광고가 정말 효과가 있을까?")
    print("=" * 60)
    
    # 미션 데이터
    기존_클릭률 = 0.03  # 3%
    신규_노출수 = 10000
    신규_클릭수 = 350
    신규_클릭률 = 신규_클릭수 / 신규_노출수
    
    print(f"📊 미션 데이터:")
    print(f"   🔵 기존 광고 클릭률: {기존_클릭률:.1%}")
    print(f"   🆕 새 광고: {신규_클릭수}/{신규_노출수} = {신규_클릭률:.1%}")
    print(f"   📈 향상도: {신규_클릭률 - 기존_클릭률:+.1%}")
    
    # 가설 설정
    print(f"\n🎯 가설:")
    print(f"   H₀: 새 광고 클릭률 = 기존 3% (효과 없음)")
    print(f"   H₁: 새 광고 클릭률 ≠ 기존 3% (효과 있음)")
    
    # 계산
    from scipy import stats
    
    p0 = 기존_클릭률
    p_hat = 신규_클릭률
    n = 신규_노출수
    
    se = np.sqrt(p0 * (1 - p0) / n)
    z_stat = (p_hat - p0) / se
    p_value = 2 * (1 - stats.norm.cdf(abs(z_stat)))
    
    print(f"\n📊 분석 결과:")
    print(f"   ⚡ Z-통계량: {z_stat:.2f}")
    print(f"   🎲 p-value: {p_value:.6f}")
    
    # 결론
    if p_value < 0.05:
        print(f"   🎉 결론: 새 광고 효과 있음! (유의함)")
        print(f"   💰 추천: 새 광고로 교체하세요!")
    else:
        print(f"   😐 결론: 새 광고 효과 불분명 (유의하지 않음)")
        print(f"   🤔 추천: 더 많은 데이터가 필요해요.")

광고효과_검증미션()
```

### 🎮 **미션 2: A/B 테스트 승부**

```python
def AB_테스트_승부():
    """실전 미션 2: 두 버전의 앱 중 어느 것이 더 좋을까?"""
    
    print("🎮 미션 2: 앱 버전 A vs B 대결")
    print("📱 상황: 앱 두 버전을 각각 다른 사용자에게 테스트")
    print("❓ 문제: 어느 버전의 구매 전환율이 더 높을까?")
    print("=" * 60)
    
    # A/B 테스트 데이터
    A버전_사용자 = 5000
    A버전_구매 = 250
    B버전_사용자 = 5200  
    B버전_구매 = 312
    
    A버전_전환율 = A버전_구매 / A버전_사용자
    B버전_전환율 = B버전_구매 / B버전_사용자
    
    print(f"📊 A/B 테스트 결과:")
    print(f"   📱 A버전: {A버전_구매}/{A버전_사용자} = {A버전_전환율:.2%}")
    print(f"   📱 B버전: {B버전_구매}/{B버전_사용자} = {B버전_전환율:.2%}")
    print(f"   📊 차이: {B버전_전환율 - A버전_전환율:+.2%}")
    
    # 이원 비율검정
    from statsmodels.stats.proportion import proportions_ztest
    
    count = np.array([A버전_구매, B버전_구매])
    nobs = np.array([A버전_사용자, B버전_사용자])
    
    z_stat, p_value = proportions_ztest(count, nobs)
    
    print(f"\n🔍 통계 분석:")
    print(f"   ⚡ Z-통계량: {z_stat:.3f}")
    print(f"   🎲 p-value: {p_value:.6f}")
    
    # 최종 판정
    if p_value < 0.05:
        if B버전_전환율 > A버전_전환율:
            승자 = "B버전"
        else:
            승자 = "A버전"
        print(f"   🏆 결론: {승자} 승리! (통계적 유의)")
    else:
        print(f"   🤝 결론: 무승부! 차이 없음 (통계적 비유의)")
    
    print(f"\n💼 비즈니스 의사결정:")
    if p_value < 0.05 and B버전_전환율 > A버전_전환율:
        print(f"   ✅ B버전을 정식 출시하세요!")
    elif p_value < 0.05 and A버전_전환율 > B버전_전환율:
        print(f"   ✅ A버전을 계속 사용하세요!")
    else:
        print(f"   🔄 더 많은 데이터를 수집하거나 다른 방법을 시도해보세요!")

AB_테스트_승부()
```

---

## 🏆 **비율검정 vs 다른 검정들의 대격돌**

### ⚔️ **통계 검정 토너먼트**

```
                🏟️ 통계 왕국 대격돌장 🏟️
                          
                     ┌─────────────┐
                     │   결승전    │
                     │ 상황별 선택  │
                     └─────────────┘
                          ⬆️
            ┌─────────────┴─────────────┐
            ⬇️                        ⬇️
       ┌─────────┐               ┌─────────┐
       │ 준결승  │               │ 준결승  │
       │범주 데이터│               │연속 데이터│
       └─────────┘               └─────────┘
            ⬆️                        ⬆️
     ┌─────┴─────┐           ┌─────┴─────┐
     ⬇️          ⬇️           ⬇️          ⬇️
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│비율검정 │ │카이제곱 │ │ t검정   │ │ ANOVA  │
│(성공률) │ │(독립성) │ │(평균)   │ │(다집단) │
└─────────┘ └─────────┘ └─────────┘ └─────────┘
```

### 📊 **검정 선택 가이드북**

```python
def 검정_선택_가이드():
    """어떤 상황에서 어떤 검정을 써야 할까?"""
    
    가이드 = {
        "🎯 비율검정": {
            "사용시기": "성공/실패, 찬성/반대 등 이항 데이터",
            "예시": "합격률, 만족도, 클릭률, 치료 성공률",
            "장점": "직관적, 비즈니스 의사결정에 유용",
            "단점": "연속 데이터 활용 못함"
        },
        "📊 t검정": {
            "사용시기": "연속 데이터의 평균 비교",
            "예시": "키, 몸무게, 점수, 소득",
            "장점": "정밀한 분석, 많은 정보 활용",
            "단점": "정규성 가정 필요"
        },
        "🎲 카이제곱 검정": {
            "사용시기": "범주형 변수들의 독립성/적합도",
            "예시": "성별과 선호도, 지역과 정당지지",
            "장점": "다차원 분석 가능",
            "단점": "인과관계 파악 어려움"
        },
        "🔥 ANOVA": {
            "사용시기": "3개 이상 집단의 평균 비교",
            "예시": "지역별 소득, 처리별 효과",
            "장점": "다중 비교 한번에",
            "단점": "복잡함, 사후검정 필요"
        }
    }
    
    print("📚 통계 검정 선택 가이드북")
    print("=" * 50)
    
    for 검정, 정보 in 가이드.items():
        print(f"\n{검정}")
        for 항목, 내용 in 정보.items():
            print(f"   {항목}: {내용}")

검정_선택_가이드()
```

---

## 🎓 **최종 보스: 비율검정 마스터 자격시험**

```python
def 비율검정_마스터_시험():
    """당신은 진정한 비율검정 마스터인가?"""
    
    print("🏆 비율검정 마스터 자격시험")
    print("💀 최종보스: 복합 상황 판단 문제")
    print("=" * 50)
    
    문제들 = {
        "문제 1": {
            "상황": "신약 A: 200명 중 160명 완치, 신약 B: 180명 중 150명 완치",
            "질문": "어느 신약이 더 효과적인가?",
            "검정": "이원 비율검정",
            "핵심": "두 독립 집단 비율 비교"
        },
        "문제 2": {
            "상황": "우리 회사 직원 만족도 85%, 업계 평균 80%",
            "질문": "우리 회사가 업계 평균보다 정말 높은가?",
            "검정": "일원 비율검정 (단측)",
            "핵심": "한 집단 vs 기준값, 방향성 있음"
        },
        "문제 3": {
            "상황": "A광고 클릭률 3.2%, B광고 클릭률 3.8%",
            "질문": "B광고가 A광고보다 효과적인가?",
            "검정": "이원 비율검정 (단측)",
            "핵심": "방향성 있는 두 집단 비교"
        }
    }
    
    print("🎯 마스터 시험 문제들:")
    for 번호, 내용 in 문제들.items():
        print(f"\n📝 {번호}")
        for 항목, 설명 in 내용.items():
            print(f"   {항목}: {설명}")
    
    print(f"\n🏆 합격 기준:")
    print(f"   ✅ 상황에 맞는 검정 선택")
    print(f"   ✅ 올바른 가설 설정")
    print(f"   ✅ 정확한 해석")
    print(f"   ✅ 비즈니스 의사결정 연결")

비율검정_마스터_시험()
```

---

## 🎬 **에필로그: 비율검정의 진가**

```
🏰 통계 왕국의 밤...

솔로와 듀얼이 길드 본부 옥상에서 대화를 나누고 있다.

🏹 솔로: "오늘도 많은 진실을 밝혀냈네."
⚔️ 듀얼: "그래. 우리의 역할이 정말 중요한 것 같아."

🌟 솔로: "생각해보니 우리가 하는 일이 그냥 숫자 비교가 아니야."
🌟 듀얼: "맞아. 사람들의 의사결정을 도와주는 거지."

💫 솔로: "한 번의 검정으로 수백만 명의 치료법이 바뀔 수도 있고..."
💫 듀얼: "한 번의 비교로 회사의 마케팅 전략이 완전히 달라질 수도 있어."

🌙 솔로: "우리는 단순한 검정사가 아니라..."
🌙 듀얼: "세상을 더 나은 곳으로 만드는 '진실의 수호자'인 거야!"

✨ 그렇게 비율검정 길드의 두 영웅은 오늘도 데이터 속 진실을 찾아 
   모험을 떠날 준비를 마쳤다...

👑 "성공과 실패 사이에 숨겨진 진실을 찾는 자, 
    그들이 바로 비율검정의 마스터들이다!"
```

---

## 💎 **최종 요약: 비율검정의 핵심**

### 🔑 **핵심 치트시트**

```
┌────────────────────────────────────────────────────┐
│                비율검정 마스터 치트시트               │
├────────────────────────────────────────────────────┤
│                                                    │
│  🎯 언제 사용하나?                                  │
│     • 성공/실패 데이터 (0 또는 1)                   │
│     • 합격률, 만족도, 클릭률, 치료성공률 등          │
│                                                    │
│  🔍 어떤 검정을 선택할까?                           │
│     • 일원: 한 집단 vs 기준값                       │
│     • 이원: 두 집단 비교                           │
│                                                    │
│  ⚡ 핵심 공식                                       │
│     • Z = (관측비율 - 기준비율) / 표준오차           │
│     • 표준오차 = √[p(1-p)/n]                       │
│                                                    │
│  🎯 판별 기준                                       │
│     • p-value < 0.05 → 통계적으로 유의             │
│     • p-value ≥ 0.05 → 통계적으로 비유의           │
│                                                    │
│  💡 실무 활용                                       │
│     • A/B 테스트, 품질관리, 임상시험, 마케팅        │
│                                                    │
└────────────────────────────────────────────────────┘
```

이제 **비율검정이 뭔지** 완벽하게 이해하셨죠? 성공/실패의 세계에서 진실을 가려내는 통계의 마법사가 되신 겁니다! 🎯✨