# 22.05 가설설정 실무 연습 - 3가지 연습문제 완전 해설

## 🎯 연습문제로 배우는 가설설정의 핵심

제공해주신 3가지 연습문제를 통해 **실무에서 마주치는 다양한 상황의 가설설정 방법**을 완벽하게 익혀보겠습니다.

---

## 📚 연습문제 1: 개와 고양이 평균수명 비교

### 📝 **문제**
> 개와 고양이의 평균수명을 조사하였다. 두 집단의 평균수명이 차이가 있는지를 파악하기 위해 가설검정을 하려 한다. 귀무가설과 대립가설을 설정하라.

### 🎯 **단계별 해결**

#### **1단계: 상황 파악**
```python
def 문제1_상황분석():
    """개와 고양이 수명 비교 상황 분석"""
    
    상황 = {
        "비교 대상": "개 vs 고양이",
        "측정 변수": "평균 수명 (연속형)",
        "집단 수": "2개 (개, 고양이)",
        "연구 목적": "두 집단 간 차이 존재 여부 확인",
        "검정 타입": "두 독립표본 평균 비교"
    }
    
    return 상황

상황_분석 = 문제1_상황분석()
print("📊 상황 분석:")
for key, value in 상황_분석.items():
    print(f"   {key}: {value}")
```

#### **2단계: 가설 설정**
```python
def 문제1_가설설정():
    """개와 고양이 수명 비교 가설설정"""
    
    가설 = {
        "귀무가설 (H₀)": {
            "내용": "개와 고양이의 평균 수명에 차이가 없다",
            "수식": "μ₁ = μ₂",
            "의미": "두 동물의 평균 수명이 동일하다",
            "보수적 입장": "전통적으로 알려진 정보 유지"
        },
        "대립가설 (H₁)": {
            "내용": "개와 고양이의 평균 수명에 차이가 있다",
            "수식": "μ₁ ≠ μ₂",
            "의미": "두 동물의 평균 수명이 서로 다르다",
            "연구자 입장": "새로운 발견을 주장"
        }
    }
    
    return 가설

가설_설정 = 문제1_가설설정()
print("\n⚖️ 가설 설정:")
for 가설유형, 내용 in 가설_설정.items():
    print(f"\n📋 {가설유형}:")
    for 항목, 설명 in 내용.items():
        print(f"   {항목}: {설명}")
```

#### **3단계: 검정 방법**
```python
def 문제1_검정방법():
    """적절한 검정 방법 선택"""
    
    검정방법 = {
        "추천 검정": "독립표본 t검정 (Two-sample t-test)",
        "조건": [
            "두 집단이 독립적",
            "각 집단이 정규분포를 따름", 
            "등분산성 가정 (필요시 Welch's t-test)"
        ],
        "Python 구현": "scipy.stats.ttest_ind()",
        "검정 종류": "양측검정 (two-tailed test)"
    }
    
    return 검정방법

print(f"\n🔬 검정 방법:")
검정정보 = 문제1_검정방법()
for key, value in 검정정보.items():
    if isinstance(value, list):
        print(f"   {key}:")
        for item in value:
            print(f"     • {item}")
    else:
        print(f"   {key}: {value}")
```

### ✅ **최종 답안**

**📋 귀무가설 (H₀)**: 개와 고양이의 평균 수명에 차이가 없다 (μ₁ = μ₂)

**📋 대립가설 (H₁)**: 개와 고양이의 평균 수명에 차이가 있다 (μ₁ ≠ μ₂)

---

## 📚 연습문제 2: 생산기계 분산 비교

### 📝 **문제**
> 새우깡 과자를 생산하는 기계1과 기계2가 있다. 기계1에서 생산한 제품의 분산이 큰 것으로 알려져 있다. 과연 그런지 검정하려고 하는데, 여기에 적당한 귀무가설과 대립가설을 설정하라.

### 🎯 **단계별 해결**

#### **1단계: 상황 파악**
```python
def 문제2_상황분석():
    """기계별 분산 비교 상황 분석"""
    
    상황 = {
        "비교 대상": "기계1 vs 기계2",
        "측정 변수": "분산 (연속형 데이터의 산포)",
        "집단 수": "2개 (기계1, 기계2)",
        "알려진 정보": "기계1의 분산이 더 크다고 알려져 있음",
        "연구 목적": "알려진 정보가 맞는지 검증",
        "검정 타입": "두 독립표본 분산 비교",
        "방향성": "단측검정 (기계1 > 기계2)"
    }
    
    return 상황

상황_분석 = 문제2_상황분석()
print("📊 상황 분석:")
for key, value in 상황_분석.items():
    print(f"   {key}: {value}")
```

#### **2단계: 핵심 포인트 파악**
```python
def 문제2_핵심포인트():
    """문제2의 핵심 포인트"""
    
    포인트 = {
        "주의사항": "기존에 '알려진 사실'을 검증하는 상황",
        "가설설정 원칙": "알려진 사실의 반대를 귀무가설로 설정",
        "이유": "가설검정은 기존 정설에 도전하는 구조",
        "특이점": "분산 비교 → F검정 사용",
        "방향성": "단측검정 (한 쪽이 더 크다는 주장)"
    }
    
    return 포인트

핵심정보 = 문제2_핵심포인트()
print(f"\n💡 핵심 포인트:")
for key, value in 핵심정보.items():
    print(f"   {key}: {value}")
```

#### **3단계: 가설 설정 (2가지 접근법)**

##### **🅰️ 접근법 A: 전통적 접근 (추천)**
```python
def 문제2_가설설정_A():
    """전통적 접근법으로 가설 설정"""
    
    가설 = {
        "귀무가설 (H₀)": {
            "내용": "기계1과 기계2의 분산이 같거나 기계1이 작다",
            "수식": "σ₁² ≤ σ₂²",
            "의미": "기계1의 분산이 더 크지 않다",
            "논리": "알려진 정보에 반대하는 보수적 입장"
        },
        "대립가설 (H₁)": {
            "내용": "기계1의 분산이 기계2보다 크다",
            "수식": "σ₁² > σ₂²", 
            "의미": "알려진 정보가 맞다",
            "논리": "기존 정보를 지지하는 연구가설"
        }
    }
    
    return 가설

print(f"\n🅰️ 접근법 A (추천):")
가설_A = 문제2_가설설정_A()
for 가설유형, 내용 in 가설_A.items():
    print(f"\n📋 {가설유형}:")
    for 항목, 설명 in 내용.items():
        print(f"   {항목}: {설명}")
```

##### **🅱️ 접근법 B: 대안적 접근**
```python
def 문제2_가설설정_B():
    """대안적 접근법으로 가설 설정"""
    
    가설 = {
        "귀무가설 (H₀)": {
            "내용": "기계1과 기계2의 분산이 같다",
            "수식": "σ₁² = σ₂²",
            "의미": "두 기계의 분산에 차이가 없다",
            "논리": "중립적 입장"
        },
        "대립가설 (H₁)": {
            "내용": "기계1과 기계2의 분산이 다르다",
            "수식": "σ₁² ≠ σ₂²",
            "의미": "두 기계의 분산에 차이가 있다", 
            "논리": "양측검정으로 접근"
        }
    }
    
    return 가설

print(f"\n🅱️ 접근법 B (대안):")
가설_B = 문제2_가설설정_B()
for 가설유형, 내용 in 가설_B.items():
    print(f"\n📋 {가설유형}:")
    for 항목, 설명 in 내용.items():
        print(f"   {항목}: {설명}")
```

#### **4단계: 검정 방법**
```python
def 문제2_검정방법():
    """분산 비교를 위한 검정 방법"""
    
    검정방법 = {
        "추천 검정": "F검정 (F-test for equality of variances)",
        "조건": [
            "두 집단이 독립적",
            "각 집단이 정규분포를 따름",
            "표본이 서로 독립"
        ],
        "Python 구현": [
            "scipy.stats.f_oneway() - ANOVA",
            "scipy.stats.levene() - Levene's test", 
            "scipy.stats.bartlett() - Bartlett's test"
        ],
        "검정통계량": "F = s₁²/s₂² (표본분산 비율)",
        "검정 종류": "단측검정 (접근법 A) 또는 양측검정 (접근법 B)"
    }
    
    return 검정방법

print(f"\n🔬 검정 방법:")
검정정보 = 문제2_검정방법()
for key, value in 검정정보.items():
    if isinstance(value, list):
        print(f"   {key}:")
        for item in value:
            print(f"     • {item}")
    else:
        print(f"   {key}: {value}")
```

### ✅ **최종 답안 (접근법 A 추천)**

**📋 귀무가설 (H₀)**: 기계1의 분산이 기계2보다 크지 않다 (σ₁² ≤ σ₂²)

**📋 대립가설 (H₁)**: 기계1의 분산이 기계2보다 크다 (σ₁² > σ₂²)

---

## 📚 연습문제 3: 제품 불량률 비교

### 📝 **문제**
> A제품과 B제품이 있는데, A제품의 품질불량에 대한 항의전화가 많이 온다고 한다. 이런 이유로 A제품의 불량률이 B제품의 불량률보다 더 클 것이라는 얘기가 나오고 있다. 실제로 그런지를 알아보기 위해 가설검정을 하려 할 때, 귀무가설과 대립가설을 설정하라.

### 🎯 **단계별 해결**

#### **1단계: 상황 파악**
```python
def 문제3_상황분석():
    """제품 불량률 비교 상황 분석"""
    
    상황 = {
        "비교 대상": "A제품 vs B제품",
        "측정 변수": "불량률 (비율, 0~1 사이)",
        "집단 수": "2개 (A제품, B제품)",
        "현상": "A제품에 항의전화가 많이 옴",
        "추측": "A제품 불량률 > B제품 불량률",
        "연구 목적": "추측이 맞는지 통계적으로 검증",
        "검정 타입": "두 독립표본 비율 비교",
        "방향성": "단측검정 (A > B)"
    }
    
    return 상황

상황_분석 = 문제3_상황분석()
print("📊 상황 분석:")
for key, value in 상황_분석.items():
    print(f"   {key}: {value}")
```

#### **2단계: 변수 타입 및 특성**
```python
def 문제3_변수특성():
    """불량률 변수의 특성"""
    
    특성 = {
        "변수 타입": "비율 (Proportion)",
        "범위": "0 ≤ p ≤ 1",
        "예시": "불량률 15% = 0.15",
        "분포": "이항분포 (큰 표본에서 정규분포 근사)",
        "검정 통계량": "Z 통계량 (비율 차이)",
        "주의사항": [
            "표본 크기가 충분해야 함 (np ≥ 5, n(1-p) ≥ 5)",
            "독립성 가정 필요",
            "각 제품의 불량 여부는 베르누이 분포"
        ]
    }
    
    return 특성

print(f"\n📈 변수 특성:")
변수정보 = 문제3_변수특성()
for key, value in 변수정보.items():
    if isinstance(value, list):
        print(f"   {key}:")
        for item in value:
            print(f"     • {item}")
    else:
        print(f"   {key}: {value}")
```

#### **3단계: 가설 설정**
```python
def 문제3_가설설정():
    """제품 불량률 비교 가설설정"""
    
    가설 = {
        "귀무가설 (H₀)": {
            "내용": "A제품의 불량률이 B제품보다 크지 않다",
            "수식": "p_A ≤ p_B",
            "의미": "A제품이 더 나쁘지 않다",
            "논리": "보수적 입장 (A제품 변호)",
            "실무적_해석": "두 제품의 품질이 비슷하거나 A가 더 좋다"
        },
        "대립가설 (H₁)": {
            "내용": "A제품의 불량률이 B제품보다 크다",
            "수식": "p_A > p_B",
            "의미": "A제품이 실제로 더 나쁘다",
            "논리": "의혹을 지지하는 입장",
            "실무적_해석": "항의전화가 많은 이유가 실제 불량률 때문"
        }
    }
    
    return 가설

가설_설정 = 문제3_가설설정()
print(f"\n⚖️ 가설 설정:")
for 가설유형, 내용 in 가설_설정.items():
    print(f"\n📋 {가설유형}:")
    for 항목, 설명 in 내용.items():
        print(f"   {항목}: {설명}")
```

#### **4단계: 검정 방법**
```python
def 문제3_검정방법():
    """비율 비교를 위한 검정 방법"""
    
    검정방법 = {
        "추천 검정": "두 비율 비교 Z검정 (Two-proportion Z-test)",
        "조건": [
            "두 집단이 독립적",
            "각 집단의 표본 크기가 충분 (np≥5, n(1-p)≥5)",
            "무작위 표본"
        ],
        "Python 구현": [
            "statsmodels.stats.proportion.proportions_ztest()",
            "scipy.stats.chi2_contingency() - 카이제곱 검정",
            "수동 계산 가능"
        ],
        "검정통계량": "Z = (p̂_A - p̂_B) / SE_pooled",
        "검정 종류": "단측검정 (오른쪽 꼬리)",
        "대안 검정": "Fisher's exact test (소표본)"
    }
    
    return 검정방법

print(f"\n🔬 검정 방법:")
검정정보 = 문제3_검정방법()
for key, value in 검정정보.items():
    if isinstance(value, list):
        print(f"   {key}:")
        for item in value:
            print(f"     • {item}")
    else:
        print(f"   {key}: {value}")
```

#### **5단계: 실무적 해석**
```python
def 문제3_실무해석():
    """결과의 실무적 의미"""
    
    해석 = {
        "H₀ 채택시": {
            "통계적_결론": "A제품 불량률이 유의하게 높지 않다",
            "실무적_의미": [
                "항의전화 증가는 우연일 가능성",
                "다른 요인 검토 필요 (서비스, 홍보 등)",
                "A제품 품질에 문제없음"
            ],
            "추천_액션": "마케팅이나 CS 개선 검토"
        },
        "H₀ 기각시": {
            "통계적_결론": "A제품 불량률이 유의하게 높다",
            "실무적_의미": [
                "실제로 A제품 품질에 문제 있음",
                "항의전화 증가의 정당한 원인",
                "즉시 품질 개선 필요"
            ],
            "추천_액션": "생산 공정 점검 및 품질관리 강화"
        }
    }
    
    return 해석

print(f"\n💼 실무적 해석:")
실무정보 = 문제3_실무해석()
for 결과, 내용 in 실무정보.items():
    print(f"\n🎯 {결과}:")
    for key, value in 내용.items():
        if isinstance(value, list):
            print(f"   {key}:")
            for item in value:
                print(f"     • {item}")
        else:
            print(f"   {key}: {value}")
```

### ✅ **최종 답안**

**📋 귀무가설 (H₀)**: A제품의 불량률이 B제품의 불량률보다 크지 않다 (p_A ≤ p_B)

**📋 대립가설 (H₁)**: A제품의 불량률이 B제품의 불량률보다 크다 (p_A > p_B)

---

## 🎯 실무 가설설정 패턴 분석

### 📊 **3가지 문제의 공통 패턴**

```python
def 가설설정_패턴분석():
    """3가지 문제에서 나타나는 가설설정 패턴"""
    
    패턴 = {
        "문제 1 (평균 비교)": {
            "타입": "탐색적 연구",
            "방향": "양측검정 (차이만 확인)",
            "H₀": "μ₁ = μ₂ (차이 없음)",
            "H₁": "μ₁ ≠ μ₂ (차이 있음)",
            "특징": "선입견 없이 차이 탐색"
        },
        
        "문제 2 (분산 비교)": {
            "타입": "기존 정보 검증",
            "방향": "단측검정 (방향성 있음)",
            "H₀": "σ₁² ≤ σ₂² (알려진 정보 반대)",
            "H₁": "σ₁² > σ₂² (알려진 정보 지지)",
            "특징": "기존 주장의 타당성 검증"
        },
        
        "문제 3 (비율 비교)": {
            "타입": "의혹 검증",
            "방향": "단측검정 (특정 방향)",
            "H₀": "p_A ≤ p_B (의혹 부정)",
            "H₁": "p_A > p_B (의혹 확인)",
            "특징": "현실 문제에서 나온 가설"
        }
    }
    
    return 패턴

print("🔍 가설설정 패턴 분석:")
패턴분석 = 가설설정_패턴분석()
for 문제, 특성 in 패턴분석.items():
    print(f"\n📋 {문제}:")
    for key, value in 특성.items():
        print(f"   {key}: {value}")
```

### 🎯 **가설설정 핵심 원칙**

```python
def 가설설정_핵심원칙():
    """가설설정시 반드시 지켜야 할 원칙들"""
    
    원칙 = {
        "1. 상호배타적": "H₀와 H₁은 겹치지 않아야 함",
        "2. 전체포괄적": "모든 경우를 다 포함해야 함", 
        "3. 검정가능성": "통계적으로 검정할 수 있어야 함",
        "4. 명확성": "애매모호하지 않고 명확해야 함",
        "5. 현실성": "실제 상황을 잘 반영해야 함"
    }
    
    실수사례 = {
        "❌ 잘못된 예시": [
            "H₀: μ > 100, H₁: μ < 100 (등호 빠짐)",
            "H₀: μ = 100, H₁: μ = 110 (겹치지 않음)",
            "H₀: 효과 있음, H₁: 효과 없음 (보통은 반대)"
        ],
        "✅ 올바른 예시": [
            "H₀: μ ≤ 100, H₁: μ > 100",
            "H₀: μ = 100, H₁: μ ≠ 100",
            "H₀: 효과 없음, H₁: 효과 있음"
        ]
    }
    
    return 원칙, 실수사례

print(f"\n📜 가설설정 핵심 원칙:")
원칙, 실수사례 = 가설설정_핵심원칙()

for 번호, 내용 in 원칙.items():
    print(f"   {번호}: {내용}")

print(f"\n⚠️ 자주 하는 실수들:")
for 구분, 예시들 in 실수사례.items():
    print(f"\n{구분}:")
    for 예시 in 예시들:
        print(f"     {예시}")
```

---

## 🔥 실무 응용: Python 구현 예시

### 💻 **각 연습문제의 Python 구현**

```python
import numpy as np
import scipy.stats as stats
from statsmodels.stats.proportion import proportions_ztest

def 실무_구현_예시():
    """3가지 연습문제의 Python 구현 예시"""
    
    print("💻 실무 구현 예시")
    print("=" * 50)
    
    # 문제 1: 개와 고양이 수명 비교
    print("\n📊 문제 1: 개와 고양이 수명 비교")
    np.random.seed(42)
    개_수명 = np.random.normal(12.5, 2.0, 100)  # 평균 12.5년
    고양이_수명 = np.random.normal(13.2, 1.8, 95)  # 평균 13.2년
    
    t_stat, p_val = stats.ttest_ind(개_수명, 고양이_수명)
    print(f"   t-통계량: {t_stat:.4f}")
    print(f"   p-value: {p_val:.6f}")
    print(f"   결론: {'H₀ 기각' if p_val < 0.05 else 'H₀ 채택'}")
    
    # 문제 2: 기계 분산 비교  
    print("\n📊 문제 2: 기계 분산 비교")
    기계1_생산량 = np.random.normal(100, 15, 50)  # 표준편차 15
    기계2_생산량 = np.random.normal(100, 10, 50)  # 표준편차 10
    
    f_stat = np.var(기계1_생산량, ddof=1) / np.var(기계2_생산량, ddof=1)
    df1, df2 = len(기계1_생산량)-1, len(기계2_생산량)-1
    p_val_f = 1 - stats.f.cdf(f_stat, df1, df2)  # 단측검정
    
    print(f"   F-통계량: {f_stat:.4f}")
    print(f"   p-value: {p_val_f:.6f}")
    print(f"   결론: {'H₀ 기각' if p_val_f < 0.05 else 'H₀ 채택'}")
    
    # 문제 3: 제품 불량률 비교
    print("\n📊 문제 3: 제품 불량률 비교")
    A제품_검사 = 1000
    A제품_불량 = 85
    B제품_검사 = 1200  
    B제품_불량 = 72
    
    counts = np.array([A제품_불량, B제품_불량])
    nobs = np.array([A제품_검사, B제품_검사])
    
    z_stat, p_val_prop = proportions_ztest(counts, nobs, alternative='larger')
    
    print(f"   A제품 불량률: {A제품_불량/A제품_검사:.3f}")
    print(f"   B제품 불량률: {B제품_불량/B제품_검사:.3f}")
    print(f"   Z-통계량: {z_stat:.4f}")
    print(f"   p-value: {p_val_prop:.6f}")
    print(f"   결론: {'H₀ 기각' if p_val_prop < 0.05 else 'H₀ 채택'}")

# 실행
실무_구현_예시()
```

---

## 🎓 핵심 정리 및 다음 단계

### ✅ **학습 완료 체크리스트**

```python
def 학습완료_체크리스트():
    """가설설정 마스터 체크리스트"""
    
    체크리스트 = {
        "✅ 기본 개념": [
            "귀무가설 vs 대립가설 구분",
            "양측검정 vs 단측검정 판단",
            "변수 타입별 적절한 검정 선택",
            "상호배타성과 전체포괄성 이해"
        ],
        "✅ 실무 적용": [
            "비교 연구 상황에서 가설 설정",
            "기존 정보 검증 상황에서 가설 설정", 
            "의혹/추측 검증 상황에서 가설 설정",
            "Python으로 가설검정 구현"
        ],
        "✅ 해석 능력": [
            "p-value 기반 의사결정",
            "통계적 vs 실무적 유의성 구분",
            "검정 결과의 비즈니스 의미 파악",
            "한계점과 가정 이해"
        ]
    }
    
    return 체크리스트

print("🎯 학습 완료 체크리스트:")
완료항목 = 학습완료_체크리스트()
for 영역, 항목들 in 완료항목.items():
    print(f"\n{영역}:")
    for 항목 in 항목들:
        print(f"   • {항목}")
```

### 🚀 **다음 학습 단계**

```python
def 다음_학습단계():
    """22.05 이후 학습 로드맵"""
    
    로드맵 = {
        "22.06": "카이제곱 검정 완전 마스터",
        "22.07": "t검정과 ANOVA 심화",
        "22.08": "회귀분석 입문",
        "22.09": "비모수 검정",
        "22.10": "실무 프로젝트 적용"
    }
    
    print("🗺️ 다음 학습 로드맵:")
    for 단계, 내용 in 로드맵.items():
        print(f"   {단계}: {내용}")

다음_학습단계()
```

---

## 💡 최종 메시지

### 🏆 **축하합니다!**

3가지 실무 연습문제를 통해 **가설설정의 핵심 원리**를 완전히 마스터했습니다!

#### **🎯 핵심 성과**
- ✅ **평균 비교**: 탐색적 연구의 양측검정 설정
- ✅ **분산 비교**: 기존 정보 검증의 단측검정 설정  
- ✅ **비율 비교**: 실무 의혹 검증의 단측검정 설정
- ✅ **Python 구현**: 각 상황별 실제 코딩 능력

#### **🚀 다음 목표**
이제 **구체적인 검정 방법들**(카이제곱, t검정, ANOVA)을 하나씩 정복하여 **완전한 통계 분석 전문가**가 되어보겠습니다!

**"가설을 제대로 세우는 것이 성공적인 통계 분석의 절반입니다!"** 🎯✨