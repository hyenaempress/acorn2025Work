# 18.04 Seaborn 통계 시각화 기초

## 🌊 Seaborn이란?

Seaborn은 **Matplotlib의 기능을 보강하기 위해 개발된** 통계 시각화 라이브러리입니다. Matplotlib 위에 구축되어 더 아름답고 현대적인 차트를 쉽게 만들 수 있습니다.

### 📊 Seaborn의 특징
- **Matplotlib 기반**: 모든 matplotlib 기능 사용 가능
- **아름다운 기본 스타일**: 별도 설정 없이도 현대적인 디자인
- **통계 시각화 특화**: 복잡한 통계 차트를 간단한 코드로 구현
- **내장 데이터셋**: 학습과 연습을 위한 다양한 실제 데이터 제공

### 🎯 언제 많이 사용되는가?

#### 1. **데이터 분석 탐색 단계**
```python
# 데이터의 분포를 빠르게 파악
sns.boxplot(y='age', data=dataset)
sns.histplot(data=dataset, x='salary')
```

#### 2. **통계 분석 및 가설 검정**
```python
# 카테고리별 분포 비교
sns.violinplot(x='department', y='salary', data=employee_data)
sns.swarmplot(x='gender', y='performance', data=hr_data)
```

#### 3. **상관관계 분석**
```python
# 변수 간 관계 시각화
sns.scatterplot(x='experience', y='salary', hue='department', data=data)
sns.heatmap(correlation_matrix, annot=True)
```

#### 4. **기계학습 결과 시각화**
```python
# 모델 성능 시각화
sns.heatmap(confusion_matrix, annot=True)
sns.regplot(x='predicted', y='actual')
```

---

## 🛠️ 기본 설정

### 필수 라이브러리 임포트
```python
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import pandas as pd

# 한글 폰트 설정
plt.rc('font', family='Malgun Gothic')
plt.rcParams['axes.unicode_minus'] = False

# Seaborn 스타일 설정
sns.set_style("whitegrid")  # 깔끔한 격자 스타일
```

### 내장 데이터셋 활용
```python
# Seaborn이 제공하는 실제 데이터셋들
print(sns.get_dataset_names())

# 유명한 타이타닉 데이터셋 로드
titanic = sns.load_dataset('titanic')
print(titanic.info())
print(titanic.head())
```

---

## 📊 핵심 차트 유형별 예제

### 1. 분포 시각화

#### 박스플롯 (Box Plot)
```python
# 타이타닉에서 나이 분포 확인
sns.boxplot(y='age', data=titanic, palette='Paired')
plt.title('타이타닉 승객 나이 분포')
plt.show()

# 클래스별 나이 분포 비교
sns.boxplot(x='class', y='age', data=titanic)
plt.title('클래스별 나이 분포 비교')
plt.show()
```

**박스플롯 해석:**
- 상자 중앙선: 중앙값 (median)
- 상자 하단: 1사분위수 (25%)
- 상자 상단: 3사분위수 (75%)
- 수염: 최솟값/최댓값
- 점: 이상치(outlier)

#### 밀도 그래프와 히스토그램 결합 🌊
```python
# 강의에서 중요하게 다룬 내용!
# sns.distplot(titanic['age'])  # 구버전 - deprecated
sns.histplot(titanic['age'], kde=True)  # 히스토그램 + 밀도곡선
plt.show()

# 밀도 그래프만 따로 그리기
sns.kdeplot(titanic['age'])  # 부드러운 밀도 곡선
plt.show()

# "밀도와 히스토그램이 같이 나오죠?"
# - 데이터의 분포를 더 직관적으로 파악 가능
```

### 2. 관계 시각화

#### 관계 시각화 - relplot과 catplot 🔄
```python
# 강의 코드 그대로!
# 카테고리 범주를 줄 수 있습니다
sns.relplot(x='who', y='age', data=titanic)  # who: 성별 (man, woman, child)
plt.show()

# 주의: 'calss' 오타가 있었지만 올바른 코드는:
sns.catplot(x='class', y='age', data=titanic)
plt.show()

# "카테고리가 있는 거예요? 엑스축에다가 범주형을 줄 수 있습니다"
# - who에는 man, woman, child가 들어있음
# - 성별과 연령 관계를 시각적으로 파악
```

#### 카운트 차트로 빈도 확인 📊
```python
# 강의에서 다룬 카운트 플롯
sns.countplot(x='class', data=titanic)  # 1등칸, 2등칸, 3등칸 승객 수
plt.show()

# "클래스로 할거야? 1등칸이야 2등칸이야 3등칸이야"
# - 각 등급별 승객 수를 막대그래프로 표시
# - 데이터의 분포를 한눈에 파악 가능
```

### 3. 히트맵과 상관관계

#### 피벗테이블과 히트맵 - 실무 핵심! 🔥
```python
# 강의에서 중요하게 다룬 피벗테이블 생성
t_pivot = titanic.pivot_table(index='class', columns='sex', aggfunc='size')
print("클래스-성별 교차표:")
print(t_pivot)
# 결과: 1등/2등/3등 x 남성/여성 인원수가 표로 정리됨

# 기본 히트맵 - "색깔로 데이터 분포를 표현할 수 있다"
sns.heatmap(t_pivot, 
            annot=True,     # 숫자 표시 ("anotation")
            fmt='d',        # 정수 형태로 표시 ("format")
            cmap='Blues')   # 파란색 계열 색상
plt.title('클래스별-성별 승객 수')
plt.show()
```

#### 고급 히트맵 옵션들 🎨
```python
# 회색톤 히트맵 (강의 예제)
sns.heatmap(t_pivot, 
            annot=True, 
            fmt='d', 
            cmap=sns.light_palette('gray', as_cmap=True))
plt.title('클래스별-성별 승객 수 (회색톤)')
plt.show()

# 빨강-파랑 대비 히트맵 (RdBu = Red-Blue)
sns.heatmap(t_pivot, 
            annot=True, 
            fmt='d', 
            cmap=sns.color_palette('RdBu', n_colors=10),
            center=0)       # 중심값 설정
plt.title('클래스별-성별 승객 수 (대비색상)')
plt.show()

# 강의 포인트: "히트맵 옵션들이 있습니다"
# - 다양한 색상 팔레트로 데이터의 특성 강조 가능
```

---

## 🎨 Seaborn vs Matplotlib 비교

### Matplotlib으로 박스플롯 만들기
```python
# Matplotlib: 여러 줄의 코드 필요
plt.figure(figsize=(8, 6))
plt.boxplot(titanic['age'].dropna())
plt.title('나이 분포')
plt.ylabel('Age')
plt.grid(True)
plt.show()
```

### Seaborn으로 박스플롯 만들기
```python
# Seaborn: 한 줄로 더 아름다운 차트
sns.boxplot(y='age', data=titanic)
plt.show()
```

**🎯 차이점:**
- **코드 간결성**: Seaborn이 훨씬 간단
- **기본 스타일**: Seaborn이 더 현대적이고 아름다움
- **통계 기능**: Seaborn이 통계 시각화에 특화
- **유연성**: Matplotlib이 더 세밀한 제어 가능

---

## 🔍 실무 활용 시나리오

### 1. 데이터 탐색 단계
```python
# 1단계: 전체 데이터 분포 확인
fig, axes = plt.subplots(2, 2, figsize=(15, 10))

# 나이 분포
sns.histplot(data=titanic, x='age', ax=axes[0,0])
axes[0,0].set_title('나이 분포')

# 요금 분포
sns.boxplot(y='fare', data=titanic, ax=axes[0,1])
axes[0,1].set_title('요금 분포')

# 클래스별 생존율
sns.countplot(data=titanic, x='class', hue='survived', ax=axes[1,0])
axes[1,0].set_title('클래스별 생존 현황')

# 나이-요금 관계
sns.scatterplot(data=titanic, x='age', y='fare', 
                hue='survived', ax=axes[1,1])
axes[1,1].set_title('나이-요금-생존 관계')

plt.tight_layout()
plt.show()
```

### 2. 분류 모델 성능 분석
```python
# 실제 vs 예측 결과 시각화
# (실제 머신러닝 프로젝트에서 많이 사용)

# 혼동행렬 시각화
confusion_matrix = pd.crosstab(titanic['survived'], 
                              titanic['class'], 
                              margins=True)

sns.heatmap(confusion_matrix, 
            annot=True, 
            fmt='d', 
            cmap='Blues')
plt.title('생존-클래스 교차표')
plt.show()
```

### 3. 비즈니스 인사이트 도출
```python
# 생존율에 영향을 미치는 요인 분석
fig, axes = plt.subplots(1, 3, figsize=(18, 5))

# 성별 생존율
sns.barplot(data=titanic, x='sex', y='survived', ax=axes[0])
axes[0].set_title('성별 생존율')

# 클래스별 생존율
sns.barplot(data=titanic, x='class', y='survived', ax=axes[1])
axes[1].set_title('클래스별 생존율')

# 나이대별 생존율
titanic['age_group'] = pd.cut(titanic['age'], 
                             bins=[0, 18, 35, 60, 100], 
                             labels=['어린이', '청년', '중년', '노년'])
sns.barplot(data=titanic, x='age_group', y='survived', ax=axes[2])
axes[2].set_title('연령대별 생존율')

plt.tight_layout()
plt.show()
```

---

## 🏆 Seaborn 활용 Best Practice

### 1. 색상 팔레트 활용
```python
# 카테고리형 팔레트
sns.set_palette("husl")  # 밝고 구분되는 색상

# 연속형 팔레트
sns.heatmap(data, cmap='viridis')  # 과학적 시각화에 적합

# 사용자 정의 팔레트
custom_colors = ['#FF6B6B', '#4ECDC4', '#45B7D1']
sns.set_palette(custom_colors)
```

### 2. 통계적 추정 표시
```python
# 회귀선과 신뢰구간 표시
sns.regplot(data=titanic, x='age', y='fare')
plt.title('나이-요금 회귀분석')
plt.show()

# 카테고리별 평균과 신뢰구간
sns.barplot(data=titanic, x='class', y='age', 
            capsize=0.1,    # 오차막대 캡 크기
            errwidth=2)     # 오차막대 두께
plt.title('클래스별 평균 나이 (95% 신뢰구간)')
plt.show()
```

### 3. 다차원 데이터 시각화
```python
# FacetGrid를 활용한 다면 시각화
g = sns.FacetGrid(titanic, col='sex', row='class', margin_titles=True)
g.map(plt.hist, 'age', bins=20)
g.add_legend()
plt.suptitle('성별-클래스별 나이 분포', y=1.02)
plt.show()
```

---

## 🚀 다음 단계: 고급 데이터 분석

### Iris 데이터셋 미리보기
```python
# 다음 강의에서 다룰 유명한 Iris 데이터
iris = sns.load_dataset('iris')
print("📊 Iris 데이터셋 미리보기:")
print(iris.info())
print(iris.head())

# 간단한 Iris 시각화
sns.pairplot(iris, hue='species')
plt.suptitle('Iris 데이터셋 전체 변수 관계', y=1.02)
plt.show()
```

**💡 다음 강의 예고:**
"데이터 분석하는 사람이 꼭 만나는 아이리스 데이터로 분류 예측 모델을 만들어보겠습니다!"

---

## 📝 핵심 정리

### 🎯 Seaborn을 사용해야 하는 이유
1. **생산성**: 복잡한 통계 차트를 간단한 코드로
2. **미학**: 별도 설정 없이도 아름다운 차트
3. **통계 특화**: 분포, 관계, 범주형 데이터 시각화에 최적화
4. **Pandas 연동**: DataFrame과 완벽 호환

### 🔧 주요 함수들
- **분포**: `histplot()`, `kdeplot()`, `boxplot()`, `violinplot()`
- **관계**: `scatterplot()`, `relplot()`, `regplot()`
- **범주**: `barplot()`, `countplot()`, `catplot()`
- **매트릭스**: `heatmap()`, `clustermap()`

### 📊 실무 활용 포인트
- **데이터 탐색**: 빠른 분포 파악과 이상치 발견
- **가설 검정**: 그룹 간 차이 시각적 확인
- **모델링**: 변수 관계 분석과 피처 엔지니어링
- **보고**: 직관적이고 설득력 있는 차트

Seaborn은 데이터 사이언스와 통계 분석에서 없어서는 안 될 필수 도구입니다. Matplotlib의 강력함과 결합되어 데이터의 숨겨진 패턴을 아름답게 드러내는 마법을 부릴 수 있습니다! ✨