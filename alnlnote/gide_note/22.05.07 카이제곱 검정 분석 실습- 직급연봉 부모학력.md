# ì¹´ì´ì œê³± ê²€ì • ë¶„ì„ ë³´ê³ ì„œ

## ê°œìš”
ì´ ë³´ê³ ì„œëŠ” ë‘ ê°€ì§€ ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì •ì„ ìˆ˜í–‰í•œ ê²°ê³¼ë¥¼ ì •ë¦¬í•œ ë¬¸ì„œì…ë‹ˆë‹¤.
- **ë¬¸ì œ 1**: ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ ì§„í•™ ì—¬ë¶€ì˜ ê´€ë ¨ì„± ë¶„ì„
- **ë¬¸ì œ 2**: ì§ê¸‰ê³¼ ì—°ë´‰ì˜ ê´€ë ¨ì„± ë¶„ì„

---

## ë¬¸ì œ 1: ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ ì§„í•™ ì—¬ë¶€ì˜ ê´€ë ¨ì„± ê²€ì •

### 1.1 ë¬¸ì œ ì„¤ì •
- **ë°ì´í„°**: cleanDescriptive.csv íŒŒì¼ì˜ `level2` (ë¶€ëª¨ í•™ë ¥), `pass2` (ìë…€ ì§„í•™ ì—¬ë¶€) ë³€ìˆ˜
- **ì¡°ê±´**: NA ê°’ì´ ìˆëŠ” í–‰ ì œì™¸

### 1.2 ê°€ì„¤ ì„¤ì •
- **ê·€ë¬´ê°€ì„¤ (Hâ‚€)**: ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ì˜ ëŒ€í•™ ì§„í•™ ì—¬ë¶€ëŠ” ì„œë¡œ ê´€ë ¨ì´ ì—†ë‹¤ (ë…ë¦½)
- **ëŒ€ë¦½ê°€ì„¤ (Hâ‚)**: ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ì˜ ëŒ€í•™ ì§„í•™ ì—¬ë¶€ëŠ” ì„œë¡œ ê´€ë ¨ì´ ìˆë‹¤ (ë…ë¦½ì´ ì•„ë‹ˆë‹¤)

### 1.3 ë°ì´í„° ì „ì²˜ë¦¬
```python
# ë°ì´í„° ë¡œë“œ ë° ì „ì²˜ë¦¬
data = pd.read_csv("cleanDescriptive.csv")
data = data[['level2', 'pass2']]
data = data.dropna()  # NA ê°’ ì œê±°
```

### 1.4 êµì°¨í‘œ ìƒì„±
```python
ctab = pd.crosstab(index=data['level2'], columns=data['pass2'])
ctab.columns = ['ì‹¤íŒ¨', 'í•©ê²©']
ctab.index = ['ê³ ì¡¸', 'ëŒ€ì¡¸', 'ëŒ€í•™ì›ì¡¸']
```

### 1.5 ê²€ì • ê²°ê³¼
- **ì¹´ì´ì œê³± í†µê³„ëŸ‰**: 2.767
- **p-value**: 0.251
- **ììœ ë„**: 2
- **ìœ ì˜ìˆ˜ì¤€**: Î± = 0.05

### 1.6 ê²°ë¡ 
**p-value (0.251) > Î± (0.05)** ì´ë¯€ë¡œ **ê·€ë¬´ê°€ì„¤ì„ ì±„íƒ**í•©ë‹ˆë‹¤.

**âœ… ê²°ë¡ : ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ì˜ ëŒ€í•™ ì§„í•™ ì—¬ë¶€ëŠ” ì„œë¡œ ê´€ë ¨ì´ ì—†ë‹¤.**

---

## ë¬¸ì œ 2: ì§ê¸‰ê³¼ ì—°ë´‰ì˜ ê´€ë ¨ì„± ê²€ì •

### 2.1 ë¬¸ì œ ì„¤ì •
- **ë°ì´í„°**: MariaDBì˜ jikwon í…Œì´ë¸”
- **ë³€ìˆ˜**: `jikwon_jik` (ì§ê¸‰), `jikwon_pay` (ì—°ë´‰)
- **ì¡°ê±´**: NA ê°’ì´ ìˆëŠ” í–‰ ì œì™¸

### 2.2 ê°€ì„¤ ì„¤ì •
- **ê·€ë¬´ê°€ì„¤ (Hâ‚€)**: ì§ê¸‰ê³¼ ì—°ë´‰ì€ ê´€ë ¨ì´ ì—†ë‹¤ (ë…ë¦½)
- **ëŒ€ë¦½ê°€ì„¤ (Hâ‚)**: ì§ê¸‰ê³¼ ì—°ë´‰ì€ ê´€ë ¨ì´ ìˆë‹¤ (ë…ë¦½ì´ ì•„ë‹ˆë‹¤)

### 2.3 ë°ì´í„° ë³€í™˜ ê·œì¹™
#### ì§ê¸‰ ë³€í™˜
- ì´ì‚¬: 1
- ë¶€ì¥: 2  
- ê³¼ì¥: 3
- ëŒ€ë¦¬: 4
- ì‚¬ì›: 5

#### ì—°ë´‰ êµ¬ê°„ ë³€í™˜
- 1000~2999: 1
- 3000~4999: 2
- 5000~6999: 3
- 7000 ì´ìƒ: 4

### 2.4 ë°ì´í„° ì „ì²˜ë¦¬
```python
# ì§ê¸‰ ë³€í™˜
data.loc[data['ì§ê¸‰'] == 'ì´ì‚¬', 'ì§ê¸‰'] = 1
data.loc[data['ì§ê¸‰'] == 'ë¶€ì¥', 'ì§ê¸‰'] = 2
data.loc[data['ì§ê¸‰'] == 'ê³¼ì¥', 'ì§ê¸‰'] = 3
data.loc[data['ì§ê¸‰'] == 'ëŒ€ë¦¬', 'ì§ê¸‰'] = 4
data.loc[data['ì§ê¸‰'] == 'ì‚¬ì›', 'ì§ê¸‰'] = 5

# ì—°ë´‰ êµ¬ê°„ ë³€í™˜
data.loc[data['ì—°ë´‰'] > 7000, 'ì—°ë´‰'] = 4
data.loc[data['ì—°ë´‰'] > 5000, 'ì—°ë´‰'] = 3
data.loc[data['ì—°ë´‰'] > 3000, 'ì—°ë´‰'] = 2
data.loc[data['ì—°ë´‰'] > 1000, 'ì—°ë´‰'] = 1
```

### 2.5 ê²€ì • ê²°ê³¼
- **ì¹´ì´ì œê³± í†µê³„ëŸ‰**: (êµ¬ì²´ì  ê°’ì€ ì‹¤í–‰ ê²°ê³¼ì— ë”°ë¼)
- **p-value**: 0.00029
- **ììœ ë„**: (êµ¬ì²´ì  ê°’ì€ ì‹¤í–‰ ê²°ê³¼ì— ë”°ë¼)
- **ìœ ì˜ìˆ˜ì¤€**: Î± = 0.05

### 2.6 ê²°ë¡ 
**p-value (0.00029) < Î± (0.05)** ì´ë¯€ë¡œ **ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•˜ê³  ëŒ€ë¦½ê°€ì„¤ì„ ì±„íƒ**í•©ë‹ˆë‹¤.

**âœ… ê²°ë¡ : ì§ê¸‰ê³¼ ì—°ë´‰ì€ ì„œë¡œ ê´€ë ¨ì´ ìˆë‹¤.**

---

## ğŸ“Š ë™ì§ˆì„± ê²€ì • ì˜ˆì œ: êµìœ¡ë°©ë²•ì— ë”°ë¥¸ ë§Œì¡±ë„ ë¶„ì„

### 3.1 ë¬¸ì œ ì„¤ì •
- **ë°ì´í„°**: survey_method.csv íŒŒì¼ì˜ `method` (êµìœ¡ë°©ë²•), `survey` (ë§Œì¡±ë„) ë³€ìˆ˜
- **ê°•ì˜ ë‚´ìš©**: êµìœ¡ë°©ë²•ì— ë”°ë¥¸ êµìœ¡ìƒë“¤ì˜ ë§Œì¡±ë„ ì°¨ì´ê°€ ìˆëŠ”ì§€ ë™ì§ˆì„± ê²€ì •

### 3.2 ê°€ì„¤ ì„¤ì •
- **ê·€ë¬´ê°€ì„¤ (Hâ‚€)**: êµìœ¡ë°©ë²•ì— ë”°ë¥¸ ë§Œì¡±ë„ ë¶„í¬ê°€ ë™ì¼í•˜ë‹¤ (ë™ì§ˆì„±)
- **ëŒ€ë¦½ê°€ì„¤ (Hâ‚)**: êµìœ¡ë°©ë²•ì— ë”°ë¥¸ ë§Œì¡±ë„ ë¶„í¬ê°€ ë‹¤ë¥´ë‹¤ (ë™ì§ˆì„±ì´ ì•„ë‹ˆë‹¤)

### 3.3 ë°ì´í„° ë¶„ì„ ì½”ë“œ
```python
import pandas as pd
import scipy.stats as stats

# ë°ì´í„° ë¡œë“œ
data = pd.read_csv('https://raw.githubusercontent.com/pykwon/python/refs/heads/master/testdata_utf8/survey_method.csv')
print(data.head(2))
print(data['method'].unique())  # [1 2 3]
print(set(data['survey']))      # {1, 2, 3, 4, 5}

# êµì°¨í‘œ ìƒì„±
ctab = pd.crosstab(index=data['method'], columns=data['survey'])
ctab.columns = ['ë§¤ìš°ë§Œì¡±', 'ë§Œì¡±', 'ë³´í†µ', 'ë¶ˆë§Œì¡±', 'ë§¤ìš°ë¶ˆë§Œì¡±']
ctab.index = ['ë°©ë²•1', 'ë°©ë²•2', 'ë°©ë²•3']
print('ctab:\n', ctab)

# ì¹´ì´ì œê³± ê²€ì •
chi2, p, dof, _ = stats.chi2_contingency(ctab)
msg = 'test statistic:{}, p-value:{}, dof:{}'
print(msg.format(chi2, p, dof))
```

### 3.4 ê²€ì • ê²°ê³¼
- **ì¹´ì´ì œê³± í†µê³„ëŸ‰**: 6.545
- **p-value**: 0.586
- **ììœ ë„**: 8
- **ìœ ì˜ìˆ˜ì¤€**: Î± = 0.05

### 3.5 ê²°ë¡ 
**p-value (0.586) > Î± (0.05)** ì´ë¯€ë¡œ **ê·€ë¬´ê°€ì„¤ì„ ì±„íƒ**í•©ë‹ˆë‹¤.

**âœ… ê²°ë¡ : êµìœ¡ë°©ë²•ì— ë”°ë¥¸ êµìœ¡ìƒë“¤ì˜ ë§Œì¡±ë„ ë¶„í¬ëŠ” ë™ì¼í•˜ë‹¤.**

ê°•ì˜ì—ì„œ ì–¸ê¸‰í•œ ëŒ€ë¡œ "ìš°ì—°íˆ ë°œìƒëœ ë°ì´í„°"ë¡œ ìƒˆë¡œìš´ ì˜ê²¬ì„ ë°›ì•„ë“¤ì´ê¸°ì—ëŠ” ì¦ê±°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.

---

## ğŸ“ ê°•ì˜ í•µì‹¬ ë‚´ìš© ì •ë¦¬

### ê°•ì˜ì—ì„œ ê°•ì¡°í•œ í¬ì¸íŠ¸ë“¤
1. **ì´ì› ì¹´ì´ì œê³±ì˜ ë‘ ê°€ì§€ ê²€ì •**:
   - **ë…ë¦½ì„± ê²€ì •**: ë‘ ë³€ìˆ˜ê°€ ì„œë¡œ ê´€ë ¨ì´ ìˆëŠ”ê°€?
   - **ë™ì§ˆì„± ê²€ì •**: ì—¬ëŸ¬ ì§‘ë‹¨ì˜ ë¶„í¬ê°€ ë™ì¼í•œê°€?

2. **ìˆ˜ì‹ì€ ë™ì¼í•˜ì§€ë§Œ í•´ì„ì´ ë‹¤ë¦„**:
   - ê°™ì€ ê³„ì‚° ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ë§Œ ì—°êµ¬ ì§ˆë¬¸ì— ë”°ë¼ í•´ì„ì´ ë‹¬ë¼ì§
   - ë¹ˆë„ì— ì¹˜ì¤‘í•˜ë©´ ë…ë¦½ì„±, ë¹„ìœ¨ì— ì¹˜ì¤‘í•˜ë©´ ë™ì§ˆì„±

3. **ê°€ì„¤ê²€ì •ì˜ ì² í•™ì  ì˜ë¯¸**:
   - "ìƒˆë¡œìš´ ì˜ê²¬ì„ ë°›ì•„ë“¤ì¼ ê²ƒì¸ê°€?"ì˜ ë¬¸ì œ
   - ê¸°ì¡´ ì˜ê²¬ì„ ì™„ì „íˆ ë²„ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ê·¼ê±° ë§ˆë ¨
   - p-valueëŠ” ìš°ì—°íˆ ë°œìƒí•  í™•ë¥ 

---

## ì½”ë“œ êµ¬í˜„

### ê³µí†µ í•¨ìˆ˜
```python
def myChecker(p_value, a_value):
    """ê°€ì„¤ê²€ì • ê²°ê³¼ë¥¼ íŒë‹¨í•˜ëŠ” í•¨ìˆ˜"""
    if(p_value > a_value):
        print(f"Pê°’ì€ {p_value}, ìœ ì˜ìˆ˜ì¤€ ì•ŒíŒŒ {a_value}ë³´ë‹¤ í¼. ë”°ë¼ì„œ ëŒ€ë¦½ê°€ì„¤ì„ ê¸°ê°, ê·€ë¬´ê°€ì„¤ì„ ì±„íƒí•¨.")
    elif(p_value < a_value):
        print(f"Pê°’ì€ {p_value}, ìœ ì˜ìˆ˜ì¤€ ì•ŒíŒŒ {a_value}ë³´ë‹¤ ì‘ìŒ. ë”°ë¼ì„œ ëŒ€ë¦½ê°€ì„¤ì„ ì±„íƒ, ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•¨.")
    return 0
```

### ë¬¸ì œ 1 êµ¬í˜„
```python
def chiPracticeOne():
    # ë°ì´í„° ë¡œë“œ
    data = pd.read_csv('https://raw.githubusercontent.com/pykwon/python/refs/heads/master/testdata_utf8/cleanDescriptive.csv')
    data = data[['level2', 'pass2']]
    data = data.dropna()
    
    # êµì°¨í‘œ ìƒì„±
    ctab = pd.crosstab(index=data['level2'], columns=data['pass2'], margins=True)
    ctab.columns = ['ì‹¤íŒ¨', 'í•©ê²©', 'í–‰í•©']
    ctab.index = ['ê³ ì¡¸', 'ëŒ€ì¡¸', 'ëŒ€í•™ì›ì¡¸', 'ì—´í•©']
    
    # ì¹´ì´ì œê³± ê²€ì •
    chi2, p, dof, expected = stats.chi2_contingency(ctab)
    print(f"Test statistic : {chi2}, p-value : {p}")
    
    # ê²°ë¡ 
    myChecker(p, 0.05)
    print("ë¶€ëª¨ì˜ í•™ë ¥ìˆ˜ì¤€ì€ ìë…€ì˜ ì§„í•™ ì—¬ë¶€ì™€ ê´€ë ¨ì´ ì—†ë‹¤.")
```

### ë¬¸ì œ 2 êµ¬í˜„
```python
def chiPracticeTwo():
    # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ë°ì´í„° ë¡œë“œ
    try:
        with open('myMaria.dat', mode='rb') as obj:
            config = pickle.load(obj)
            
        conn = MySQLdb.connect(**config)
        cursor = conn.cursor()
        sql = "SELECT jikwonjik, jikwonpay FROM jikwon"
        cursor.execute(sql)
        data = pd.DataFrame(cursor.fetchall(), columns=['ì§ê¸‰', 'ì—°ë´‰'])
        
        # ë°ì´í„° ë³€í™˜
        # ì§ê¸‰ ë³€í™˜
        data.loc[data['ì§ê¸‰'] == 'ì´ì‚¬', 'ì§ê¸‰'] = 1
        data.loc[data['ì§ê¸‰'] == 'ë¶€ì¥', 'ì§ê¸‰'] = 2
        data.loc[data['ì§ê¸‰'] == 'ê³¼ì¥', 'ì§ê¸‰'] = 3
        data.loc[data['ì§ê¸‰'] == 'ëŒ€ë¦¬', 'ì§ê¸‰'] = 4
        data.loc[data['ì§ê¸‰'] == 'ì‚¬ì›', 'ì§ê¸‰'] = 5
        
        # ì—°ë´‰ êµ¬ê°„ ë³€í™˜
        data.loc[data['ì—°ë´‰'] > 7000, 'ì—°ë´‰'] = 4
        data.loc[data['ì—°ë´‰'] > 5000, 'ì—°ë´‰'] = 3
        data.loc[data['ì—°ë´‰'] > 3000, 'ì—°ë´‰'] = 2
        data.loc[data['ì—°ë´‰'] > 1000, 'ì—°ë´‰'] = 1
        
        # êµì°¨í‘œ ìƒì„±
        ctab = pd.crosstab(index=data['ì§ê¸‰'], columns=data['ì—°ë´‰'])
        
        # ì¹´ì´ì œê³± ê²€ì •
        chi2, p, dof, _ = stats.chi2_contingency(ctab)
        print(f"Test statics : {chi2}, P-value : {p}, df : {dof}")
        
        # ê²°ë¡ 
        myChecker(p, 0.05)
        print("ì§ê¸‰ê³¼ ì—°ë´‰ì€ ê´€ë ¨ì´ ìˆë‹¤.")
        
    except Exception as error:
        print('ì—ëŸ¬ ë°œìƒ:', error)
    finally:
        cursor.close()
        conn.close()
```

### ë¬¸ì œ 3 êµ¬í˜„ (ë™ì§ˆì„± ê²€ì •)
```python
def chiPracticeThree():
    """êµìœ¡ë°©ë²•ì— ë”°ë¥¸ ë§Œì¡±ë„ ë™ì§ˆì„± ê²€ì •"""
    
    # ë°ì´í„° ë¡œë“œ
    data = pd.read_csv('https://raw.githubusercontent.com/pykwon/python/refs/heads/master/testdata_utf8/survey_method.csv')
    print("ë°ì´í„° í™•ì¸:")
    print(data.head(2))
    print(f"êµìœ¡ë°©ë²•: {data['method'].unique()}")  # [1 2 3]
    print(f"ë§Œì¡±ë„: {set(data['survey'])}")        # {1, 2, 3, 4, 5}
    
    # êµì°¨í‘œ ìƒì„±
    ctab = pd.crosstab(index=data['method'], columns=data['survey'])
    ctab.columns = ['ë§¤ìš°ë§Œì¡±', 'ë§Œì¡±', 'ë³´í†µ', 'ë¶ˆë§Œì¡±', 'ë§¤ìš°ë¶ˆë§Œì¡±']
    ctab.index = ['ë°©ë²•1', 'ë°©ë²•2', 'ë°©ë²•3']
    print('êµì°¨í‘œ:\n', ctab)
    
    # ì¹´ì´ì œê³± ê²€ì •
    chi2, p, dof, _ = stats.chi2_contingency(ctab)
    print(f"Test statistic: {chi2:.3f}, p-value: {p:.6f}, dof: {dof}")
    
    # ê²°ë¡ 
    myChecker(p, 0.05)
    print("êµìœ¡ë°©ë²•ì— ë”°ë¥¸ ë§Œì¡±ë„ ë¶„í¬ëŠ” ë™ì¼í•˜ë‹¤.")
```

---

## ì‹œê°í™” (ë¬¸ì œ 1)

```python
import seaborn as sns
import matplotlib.pyplot as plt

plt.rc('font', family='malgun gothic')
sns.heatmap(ctab, annot=True, fmt='d', cmap='Blues')
plt.title('ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ê³¼ ìë…€ ì§„í•™ ì—¬ë¶€')
plt.xlabel('ìë…€ ì§„í•™ ì—¬ë¶€ (pass)')
plt.ylabel('ë¶€ëª¨ í•™ë ¥ ìˆ˜ì¤€ (level)')
plt.show()
```

---

## í†µê³„ì  í•´ì„

### ì¹´ì´ì œê³± ë…ë¦½ì„± ê²€ì •ì˜ ì˜ë¯¸
- ë‘ ë²”ì£¼í˜• ë³€ìˆ˜ ê°„ì˜ ë…ë¦½ì„±ì„ ê²€ì •í•˜ëŠ” ë°©ë²•
- ê´€ì°°ë¹ˆë„ì™€ ê¸°ëŒ€ë¹ˆë„ì˜ ì°¨ì´ë¥¼ í†µí•´ ë…ë¦½ì„± ì—¬ë¶€ë¥¼ íŒë‹¨
- p-valueê°€ ìœ ì˜ìˆ˜ì¤€ë³´ë‹¤ ì‘ìœ¼ë©´ ë‘ ë³€ìˆ˜ê°€ ë…ë¦½ì´ ì•„ë‹ˆë¼ê³  ê²°ë¡ 

### ì‹¤ë¬´ì  ì‹œì‚¬ì 
1. **ë¬¸ì œ 1**: ë¶€ëª¨ì˜ í•™ë ¥ì´ ìë…€ì˜ ëŒ€í•™ ì§„í•™ì— í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŒ
2. **ë¬¸ì œ 2**: íšŒì‚¬ì—ì„œ ì§ê¸‰ê³¼ ì—°ë´‰ì´ í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•œ ê´€ë ¨ì„±ì„ ê°€ì§ (í•©ë¦¬ì ì¸ ì¸ì‚¬ ì‹œìŠ¤í…œ)

---

## ì°¸ê³ ì‚¬í•­
- ìœ ì˜ìˆ˜ì¤€: Î± = 0.05
- ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬: pandas, scipy.stats, numpy, matplotlib, seaborn
- ë°ì´í„°ë² ì´ìŠ¤: MariaDB (MySQLdb ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
- ë‚ ì§œ: 2022.05.06