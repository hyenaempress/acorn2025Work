# Django 기초 완벽 가이드

## 목차
1. [Django 소개](#django-소개)
2. [개발 환경 설정](#개발-환경-설정)
3. [Django 프로젝트 생성](#django-프로젝트-생성)
4. [Django 앱 생성](#django-앱-생성)
5. [설정 파일 이해하기](#설정-파일-이해하기)
6. [URL 라우팅](#url-라우팅)
7. [뷰와 템플릿](#뷰와-템플릿)
8. [모델과 데이터베이스](#모델과-데이터베이스)
9. [정적 파일 관리](#정적-파일-관리)
10. [기본 명령어 정리](#기본-명령어-정리)

---

## Django 소개

Django는 Python으로 작성된 웹 프레임워크로, "완벽주의자를 위한 마감 시간이 있는 웹 프레임워크"라는 슬로건을 가지고 있습니다.

### Django의 특징
- **MTV 패턴**: Model-Template-View 아키텍처
- **DRY 원칙**: Don't Repeat Yourself
- **보안**: SQL 인젝션, XSS, CSRF 등 보안 취약점 방지
- **확장성**: 대규모 웹 애플리케이션 개발 지원
- **관리자 인터페이스**: 자동 생성되는 관리자 페이지

---

## 개발 환경 설정

### 1. Anaconda 환경에서 Django 설치
```bash
# Anaconda 환경에서 Django 설치
pip install django

# Django 버전 확인
python -m django --version
```

### 2. 가상환경 사용 (권장)
```bash
# 가상환경 생성
conda create -n django_env python=3.11
conda activate django_env

# Django 설치
pip install django
```

---

## Django 프로젝트 생성

### 1. 프로젝트 디렉토리 생성 및 초기화
```bash
# 프로젝트 디렉토리 생성
mkdir django1
cd django1

# Django 프로젝트 생성
django-admin startproject mainapp .

# 또는 특정 디렉토리에 생성
django-admin startproject mainapp django1
```

### 2. 프로젝트 구조
```
django1/
    manage.py
    mainapp/
        __init__.py
        settings.py
        urls.py
        wsgi.py
        asgi.py
```

---

## Django 앱 생성

### 1. 앱 생성
```bash
# myapp 앱 생성
python manage.py startapp myapp
```

### 2. 앱 구조
```
myapp/
    __init__.py
    admin.py
    apps.py
    models.py
    tests.py
    views.py
    migrations/
        __init__.py
```

### 3. 앱 등록 (settings.py)
```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',  # 새로 생성한 앱 추가
]
```

---

## 설정 파일 이해하기

### settings.py 주요 설정들

#### 1. 기본 설정
```python
# 디버그 모드 (개발 시에만 True)
DEBUG = True

# 허용된 호스트
ALLOWED_HOSTS = []

# 비밀 키 (프로덕션에서는 환경변수로 관리)
SECRET_KEY = 'your-secret-key'
```

#### 2. 데이터베이스 설정
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
```

#### 3. 국제화 설정
```python
LANGUAGE_CODE = 'ko-kr'  # 한국어로 변경
TIME_ZONE = 'Asia/Seoul'  # 서울 시간대로 변경
USE_I18N = True
USE_TZ = True
```

#### 4. 템플릿 설정
```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],  # 템플릿 디렉토리
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

#### 5. 정적 파일 설정
```python
STATIC_URL = 'static/'
STATICFILES_DIRS = [BASE_DIR / 'static']  # 개발 시 정적 파일 디렉토리
STATIC_ROOT = BASE_DIR / 'staticfiles'    # 프로덕션용 (collectstatic 명령어로 수집)
```

---

## URL 라우팅

### 1. 메인 프로젝트 urls.py (mainapp/urls.py)
```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('myapp.urls')),  # myapp의 URL 포함
]
```

### 2. 앱 urls.py (myapp/urls.py) 생성
```python
from django.urls import path
from . import views

app_name = 'myapp'

urlpatterns = [
    path('', views.index, name='index'),
    path('about/', views.about, name='about'),
]
```

---

## 뷰와 템플릿

### 1. 뷰 함수 작성 (myapp/views.py)
```python
from django.shortcuts import render
from django.http import HttpResponse

def index(request):
    return render(request, 'myapp/index.html', {
        'title': 'Django 홈페이지',
        'message': 'Django에 오신 것을 환영합니다!'
    })

def about(request):
    return HttpResponse("About 페이지입니다.")
```

### 2. 템플릿 디렉토리 구조
```
templates/
    base.html
    myapp/
        index.html
        about.html
```

### 3. 기본 템플릿 (templates/base.html)
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Django 사이트{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header>
        <nav>
            <a href="{% url 'myapp:index' %}">홈</a>
            <a href="{% url 'myapp:about' %}">소개</a>
        </nav>
    </header>
    
    <main>
        {% block content %}
        {% endblock %}
    </main>
    
    <footer>
        <p>&copy; 2024 Django 사이트</p>
    </footer>
</body>
</html>
```

### 4. 앱 템플릿 (templates/myapp/index.html)
```html
{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ title }}</h1>
    <p>{{ message }}</p>
</div>
{% endblock %}
```

---

## 모델과 데이터베이스

### 1. 모델 정의 (myapp/models.py)
```python
from django.db import models
from django.contrib.auth.models import User

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['-created_at']
    
    def __str__(self):
        return self.title
```

### 2. 마이그레이션
```bash
# 마이그레이션 파일 생성
python manage.py makemigrations

# 마이그레이션 적용
python manage.py migrate
```

### 3. 관리자 등록 (myapp/admin.py)
```python
from django.contrib import admin
from .models import Post

@admin.register(Post)
class PostAdmin(admin.ModelAdmin):
    list_display = ['title', 'author', 'created_at']
    list_filter = ['created_at', 'author']
    search_fields = ['title', 'content']
```

### 4. 슈퍼유저 생성
```bash
python manage.py createsuperuser
```

---

## 정적 파일 관리

### 1. 정적 파일 디렉토리 구조
```
static/
    css/
        style.css
    js/
        script.js
    img/
        logo.png
```

### 2. CSS 파일 예시 (static/css/style.css)
```css
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

header nav {
    background: #333;
    padding: 1rem;
}

header nav a {
    color: white;
    text-decoration: none;
    margin-right: 20px;
}

header nav a:hover {
    text-decoration: underline;
}
```

### 3. 템플릿에서 정적 파일 사용
```html
{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<script src="{% static 'js/script.js' %}"></script>
<img src="{% static 'img/logo.png' %}" alt="로고">
```

---

## 기본 명령어 정리

### 프로젝트 관리
```bash
# 프로젝트 생성
django-admin startproject project_name

# 앱 생성
python manage.py startapp app_name

# 개발 서버 실행
python manage.py runserver

# 특정 포트로 서버 실행
python manage.py runserver 8080
```

### 데이터베이스 관리
```bash
# 마이그레이션 파일 생성
python manage.py makemigrations

# 마이그레이션 적용
python manage.py migrate

# 특정 앱의 마이그레이션만 적용
python manage.py migrate myapp

# 마이그레이션 상태 확인
python manage.py showmigrations
```

### 관리자 및 사용자
```bash
# 슈퍼유저 생성
python manage.py createsuperuser

# 사용자 비밀번호 변경
python manage.py changepassword username
```

### 개발 도구
```bash
# Django 셸 실행
python manage.py shell

# 정적 파일 수집 (프로덕션용)
python manage.py collectstatic

# 테스트 실행
python manage.py test

# 특정 앱 테스트
python manage.py test myapp
```

---

## 다음 단계

이제 Django의 기본 구조를 이해했으니, 다음과 같은 주제들을 학습해보세요:

1. **폼(Forms)**: 사용자 입력 처리
2. **클래스 기반 뷰(CBV)**: 더 체계적인 뷰 작성
3. **REST API**: Django REST Framework
4. **인증과 권한**: 사용자 관리 시스템
5. **미들웨어**: 요청/응답 처리 사용자 정의
6. **캐싱**: 성능 최적화
7. **배포**: 실제 서버에 배포하기

### 유용한 Django 패키지들
- **django-debug-toolbar**: 개발 시 디버깅 도구
- **django-extensions**: 추가 관리 명령어
- **pillow**: 이미지 처리
- **django-crispy-forms**: 폼 스타일링
- **celery**: 비동기 작업 처리

---

**참고 자료**
- [Django 공식 문서](https://docs.djangoproject.com/)
- [Django Girls 튜토리얼](https://tutorial.djangogirls.org/)
- [MDN Django 튜토리얼](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django)