# 17.04.01 JSON 기초부터 실전까지 - API 시대의 핵심 기술 💻

> **XML에서 JSON으로!** 17.03에서 배운 XML 개념을 바탕으로, 이제 현대 웹의 표준 JSON을 완전 정복해보자!

---

## 🎯 **학습 목표**

1. **JSON이 뭔지** 정확히 이해하기
2. **JSON vs XML** 차이점과 선택 기준
3. **파이썬 json 라이브러리** 기본 사용법  
4. **웹 API JSON 데이터** 수집하기
5. **pandas와 연동**해서 데이터 분석하기

---

## 📖 **JSON이 뭐예요?**

### 🤔 **JSON = JavaScript Object Notation**
- **J**ava**S**cript **O**bject **N**otation의 줄임말
- 원래는 자바스크립트용이었지만, **지금은 모든 프로그래밍 언어의 표준**
- **XML보다 가볍고**, **배열 형식**으로 데이터를 표현
- **요즘 API는 거의 다 JSON 형식**을 사용해요!

### 📊 **XML vs JSON 한눈에 비교**

| 특징 | XML | JSON |
|------|-----|------|
| **가독성** | 태그 많아서 복잡 | 간단하고 깔끔 |
| **크기** | 무거움 | 가벼움 |
| **속도** | 파싱 느림 | 파싱 빠름 |
| **Python 궁합** | 추가 변환 필요 | **딕셔너리랑 완벽 궁합!** ⭐ |
| **실제 사용률** | 감소 추세 | **압도적 1위** |

### 💡 **왜 JSON이 인기일까?**

```python
# 같은 데이터를 XML vs JSON으로 비교해보면...

# XML 버전 (복잡함 😅)
xml_data = """
<person>
    <name>김파이썬</name>
    <age>25</age>
    <skills>
        <skill>Python</skill>
        <skill>JSON</skill>
    </skills>
</person>
"""

# JSON 버전 (간단함 😍)  
json_data = """
{
    "name": "김파이썬",
    "age": 25,
    "skills": ["Python", "JSON"]
}
"""

print("XML 길이:", len(xml_data))      # 더 김
print("JSON 길이:", len(json_data))    # 더 짧음!
```

---

## 🔧 **Python에서 JSON 다루기 - 기초편**

### 🎯 **핵심 개념: 딕셔너리 ↔ JSON 변환**

**JSON 형식은 파이썬에서 딕셔너리 형식으로 쉽게 변환할 수 있어요!**  
**딕트랑 궁합이 정말 잘 맞습니다** ⭐

```python
import json

# 📝 Step 1: 파이썬 딕셔너리 준비
person_dict = {
    'name': 'tom', 
    'age': 33, 
    'score': ['90', '80', '100']  # 리스트도 포함 가능
}

print("📊 원본 딕셔너리:")
print(person_dict)
print("dict:%s" % person_dict)
print("타입:", type(person_dict))  # <class 'dict'>
```

### ⬇️ **JSON 인코딩 (딕트 → 문자열)**

```python
print('\n🔄 JSON 인코딩 - 딕트를 JSON 모양의 문자열로 변경')

# dumps = "dump string" (문자열로 변환)
str_val = json.dumps(person_dict)

print("str_val:%s" % str_val)
print("타입:", type(str_val))  # <class 'str'> - 이제 문자열!

# ⚠️ 주의: 이제 문자열이므로 딕셔너리처럼 사용 불가
# print(str_val['name'])  # ❌ TypeError 발생!
```

### ⬆️ **JSON 디코딩 (문자열 → 딕트)**

```python
print('\n🔄 JSON 디코딩 - JSON 문자열을 딕트 형식으로 변경')

# loads = "load string" (문자열에서 로딩)
json_val = json.loads(str_val)

print("복원된 데이터:", json_val)
print("타입:", type(json_val))  # <class 'dict'> - 다시 딕셔너리!

# ✅ 이제 다시 딕셔너리처럼 사용 가능
print("이름:", json_val['name'])  # 정상 동작!

print("\n🔑 딕셔너리 키들:")
for k in json_val.keys():
    print(f"  - {k}")  # 이건 딕트이니까 .keys() 사용 가능
```

### 💡 **기억하세요!**

```python
# 🎯 핵심 공식
# 딕셔너리 → JSON 문자열: json.dumps()  (덤프)
# JSON 문자열 → 딕셔너리: json.loads()  (로드)

print("📚 외우기 쉬운 방법:")
print("  dumps = 덤프해서 문자열(string)로")  
print("  loads = 로드해서 딕셔너리로")
```

## 🌐 **웹에서 JSON 문서 읽기 - 실전편**

이제 **실제 웹 API에서 JSON 데이터를 가져와서 처리**해보겠습니다!

### 📚 **서울시 도서관 JSON 데이터 예제**

```python
print('🌐 웹에서 JSON 문서 읽기 =========================')

import urllib.request  # as req를 넣으면 req로 줄여서 사용 가능
import json
import pandas as pd

# 📍 서울시 도서관 개방시간 JSON 데이터 URL
url = "https://raw.githubusercontent.com/pykwon/python/master/seoullibtime5.json"

# 🔄 Step 1: 웹에서 데이터 읽어오기
response = urllib.request.urlopen(url)
plainText = response.read().decode('utf-8')  # 바이트를 문자열로 변환

print("📥 받아온 데이터 타입:", type(plainText))  # <class 'str'>

# 🔄 Step 2: JSON 문자열을 딕셔너리로 변환
json_data = json.loads(plainText)  # JSON 디코딩

print("📊 변환된 데이터 타입:", type(json_data))  # <class 'dict'>
print("🔑 최상위 키들:", list(json_data.keys()))
```

### 🏛️ **JSON 구조 파악하기**

```python
# JSON 구조를 이해해보자
print("\n🔍 JSON 데이터 구조 분석:")

# 전체 구조 확인 (너무 길면 일부만 출력)
import pprint
pprint.pprint(json_data, depth=2)  # 2단계까지만 출력

# ❌ 이런 식으로 접근하면 에러 발생 (키가 정확하지 않음)
# print(json_data['data'][0]['TIME'])  
# print(json_data['SeoulLibraryTime']['row'][0]['LBRRY_NAME'])
```

### 🎯 **정확한 데이터 추출 방법**

```python
# ✅ 올바른 방법 1: 직접 접근
print("\n🎯 도서관 데이터 추출 (방법 1):")
try:
    lib_data = json_data['seoulLibraryTime']['row']
    print(f"📚 총 도서관 수: {len(lib_data)}개")
    
    # 첫 번째 도서관 정보 확인
    first_lib = lib_data[0]
    print("🏛️ 첫 번째 도서관:", first_lib['LBRRY_NAME'])
    
    # 처음 몇 개 도서관 정보 출력
    print("\n📋 도서관 목록 (처음 5개):")
    for i, lib in enumerate(lib_data[:5]):
        print(f"  {i+1}. {lib['LBRRY_NAME']} - {lib['TEL']} - {lib['ADRES']}")
        
except KeyError as e:
    print(f"❌ 키 오류: {e}")
    print("JSON 구조를 다시 확인해주세요!")
```

### 🛡️ **안전한 데이터 접근 방법**

```python
# ✅ 올바른 방법 2: .get() 사용 (더 안전함)
print("\n🛡️ 안전한 방법으로 데이터 추출:")

lib_data = json_data.get('seoulLibraryTime', {}).get('row', [])
print(f"📚 안전하게 추출한 도서관 수: {len(lib_data)}개")

if lib_data:  # 데이터가 있을 때만 처리
    print("🏛️ 첫 번째 도서관 (안전 방식):", lib_data[0].get('LBRRY_NAME'))
    
    print("\n📋 전체 도서관 정보:")
    for ele in lib_data:
        name = ele.get('LBRRY_NAME', '이름없음')
        tel = ele.get('TEL', '전화번호없음') 
        address = ele.get('ADRES', '주소없음')
        print(f"  📚 {name}")
        print(f"     ☎️  {tel}")
        print(f"     📍 {address}")
        print()  # 빈 줄
else:
    print("❌ 도서관 데이터를 찾을 수 없습니다.")
```

### 📊 **pandas DataFrame으로 변환**

이제 **가장 중요한 부분**입니다! JSON 데이터를 pandas로 바꿔서 분석해보겠습니다.

```python
print("\n📊 pandas DataFrame으로 변환")

# DataFrame 생성 (필요한 컬럼만 선택)
df = pd.DataFrame(lib_data, columns=['LBRRY_NAME', 'TEL', 'ADRES'])

print("📈 DataFrame 정보:")
print(f"  - 행 수: {len(df)}")
print(f"  - 열 수: {len(df.columns)}")
print(f"  - 컬럼: {list(df.columns)}")

print("\n📋 DataFrame 미리보기:")
print(df.head())  # 처음 5개 행만 보기

print("\n📊 기본 통계:")
print(f"  - 총 도서관 수: {len(df)}")
print(f"  - 전화번호 있는 도서관: {df['TEL'].notna().sum()}")
print(f"  - 전화번호 없는 도서관: {df['TEL'].isna().sum()}")

# 구별로 도서관 수 세기 (주소에서 구 추출)
df['구'] = df['ADRES'].str.extract(r'([가-힣]+구)')
구별_통계 = df['구'].value_counts()
print(f"\n🏛️ 구별 도서관 수 TOP 5:")
print(구별_통계.head())
```

### 💾 **CSV 파일로 저장**

```python
print("\n💾 CSV 파일로 저장")

# CSV 파일로 저장 (한글 깨짐 방지)
df.to_csv('seoulLibrary.csv', index=False, encoding='utf-8')
print("✅ seoulLibrary.csv 파일로 저장 완료!")

# 저장된 파일 확인
import os
if os.path.exists('seoulLibrary.csv'):
    file_size = os.path.getsize('seoulLibrary.csv')
    print(f"📁 파일 크기: {file_size:,} bytes")
    
    # 파일 처음 몇 줄 확인
    with open('seoulLibrary.csv', 'r', encoding='utf-8') as f:
        lines = f.readlines()[:3]  # 처음 3줄
        print("📄 저장된 파일 미리보기:")
        for line in lines:
            print(f"  {line.strip()}")

print("\n🎉 JSON → pandas → CSV 변환 완료!")
print("💡 이제 시각화(matplotlib)로 넘어갈 준비 끝!")
```

## 🎯 **JSON vs XML 실전 비교**

실제 강의에서 다룬 내용을 바탕으로 **언제 JSON을, 언제 XML을** 사용해야 하는지 정리해보겠습니다.

### 📊 **같은 데이터, 다른 형식**

```python
# 동일한 도서관 데이터를 XML vs JSON으로 비교

# XML 형식 (복잡하고 무거움)
xml_library = """
<libraries>
    <library>
        <name>강남구립역삼도서관</name>
        <tel>02-3423-6200</tel>
        <address>서울특별시 강남구 역삼동 818-4</address>
        <hours>
            <weekday>09:00-22:00</weekday>
            <weekend>09:00-17:00</weekend>
        </hours>
    </library>
</libraries>
"""

# JSON 형식 (간단하고 가벼움)
json_library = """
{
    "libraries": [
        {
            "name": "강남구립역삼도서관",
            "tel": "02-3423-6200", 
            "address": "서울특별시 강남구 역삼동 818-4",
            "hours": {
                "weekday": "09:00-22:00",
                "weekend": "09:00-17:00"
            }
        }
    ]
}
"""

print("📏 크기 비교:")
print(f"  XML:  {len(xml_library)} 글자")
print(f"  JSON: {len(json_library)} 글자")
print(f"  차이: {len(xml_library) - len(json_library)} 글자 (JSON이 더 짧음)")
```

### 🤔 **선택 가이드**

```python
선택기준 = {
    "JSON을 사용하세요": [
        "🌐 웹 API 개발할 때",
        "📱 모바일 앱 데이터 전송",  
        "⚡ 빠른 처리가 필요할 때",
        "🐍 Python으로 분석할 때",
        "📊 간단한 구조의 데이터"
    ],
    
    "XML을 사용하세요": [
        "🏛️ 정부/공공기관 API (아직 XML 많음)",
        "📰 RSS 피드 같은 표준 형식",
        "🔒 스키마 검증이 중요한 경우",
        "📋 복잡한 문서 구조",
        "⚖️ 레거시 시스템과 연동"
    ]
}

for 상황, 예시들 in 선택기준.items():
    print(f"\n{상황}:")
    for 예시 in 예시들:
        print(f"  {예시}")
```

---

## 💡 **JSON 처리 실무 꿀팁**

### 🛡️ **에러 처리 (중요!)**

```python
def 안전한_JSON_처리():
    """실무에서 JSON 처리할 때 반드시 해야 할 에러 처리"""
    
    # 잘못된 JSON 문자열들
    잘못된_json들 = [
        '{"name": "김개발", "age": 25,}',  # 마지막 쉼표
        '{"name": "김개발" "age": 25}',    # 쉼표 누락
        "{'name': '김개발'}",             # 작은따옴표 사용
        '{"name": "김개발", "age": }',     # 값 누락
    ]
    
    print("🛡️ JSON 에러 처리 예제:")
    
    for i, json_str in enumerate(잘못된_json들, 1):
        print(f"\n테스트 {i}: {json_str}")
        try:
            data = json.loads(json_str)
            print("  ✅ 성공:", data)
        except json.JSONDecodeError as e:
            print(f"  ❌ JSON 파싱 오류: {e}")
            print(f"     라인 {e.lineno}, 컬럼 {e.colno}")
        except Exception as e:
            print(f"  ❌ 기타 오류: {e}")

# 안전한_JSON_처리()
```

### 🚀 **성능 최적화 팁**

```python
# 🎯 한글 처리 옵션
korean_data = {"이름": "김파이썬", "취미": ["코딩", "독서"]}

# ❌ 나쁜 예: 한글이 유니코드로 변환됨
bad_json = json.dumps(korean_data)
print("나쁜 예:", bad_json)  # {"\uc774\ub984": "\uae40\ud30c\uc774\uc36c"...

# ✅ 좋은 예: 한글 그대로 출력  
good_json = json.dumps(korean_data, ensure_ascii=False, indent=2)
print("좋은 예:")
print(good_json)

# 🎯 들여쓰기로 가독성 높이기
complex_data = {
    "users": [
        {"name": "김개발", "skills": ["Python", "JSON"]},
        {"name": "이분석", "skills": ["SQL", "pandas"]}
    ]
}

# 이쁘게 출력하기
pretty_json = json.dumps(complex_data, ensure_ascii=False, indent=2)
print("\n🎨 예쁘게 포매팅된 JSON:")
print(pretty_json)
```

### 📦 **requests 라이브러리와 함께 사용**

```python
import requests

def requests와_JSON_사용법():
    """requests 라이브러리로 더 쉽게 JSON 처리하기"""
    
    print("📦 requests + JSON 사용법:")
    
    # 🌐 실제 API 호출 예제 (가상의 URL)
    # url = "https://api.example.com/users"
    
    # try:
    #     # requests로 API 호출
    #     response = requests.get(url, timeout=10)
    #     response.raise_for_status()  # HTTP 오류 확인
    #     
    #     # ✨ 이게 핵심! .json()으로 자동 파싱
    #     json_data = response.json()  # json.loads() 자동 실행
    #     
    #     print("✅ API 응답 성공!")
    #     print("데이터 타입:", type(json_data))
    #     
    # except requests.exceptions.Timeout:
    #     print("⏰ 타임아웃 발생")
    # except requests.exceptions.RequestException as e:
    #     print(f"🌐 네트워크 오류: {e}")
    # except json.JSONDecodeError:
    #     print("📝 JSON 파싱 오류")
    
    print("💡 핵심 포인트:")
    print("  - response.json() = 자동으로 json.loads() 실행")
    print("  - urllib.request보다 requests가 더 편함")
    print("  - 타임아웃, 에러 처리 꼭 하기!")

requests와_JSON_사용법()
```

## 📈 **실전 프로젝트: JSON 데이터 분석**

실제 강의에서 다룬 서울시 도서관 데이터를 더 심화해서 분석해보겠습니다.

### 🏛️ **서울시 도서관 데이터 고급 분석**

```python
def 도서관_데이터_심화분석():
    """JSON으로 받은 도서관 데이터를 다양하게 분석해보기"""
    
    import urllib.request
    import json
    import pandas as pd
    import re
    
    print("🏛️ 서울시 도서관 데이터 심화 분석")
    print("="*50)
    
    # 데이터 불러오기
    url = "https://raw.githubusercontent.com/pykwon/python/master/seoullibtime5.json"
    
    try:
        response = urllib.request.urlopen(url)
        data = json.loads(response.read().decode('utf-8'))
        lib_data = data['seoulLibraryTime']['row']
        
        # DataFrame 생성
        df = pd.DataFrame(lib_data)
        
        print(f"📚 총 도서관 수: {len(df)}")
        print(f"📊 데이터 컬럼: {list(df.columns)}")
        
        # 1. 구별 도서관 분포 분석
        print("\n🗺️  구별 도서관 분포:")
        df['구'] = df['ADRES'].str.extract(r'([가-힣]+구)')
        구별_통계 = df['구'].value_counts()
        
        for i, (구, 개수) in enumerate(구별_통계.head(10).items(), 1):
            bar = '█' * (개수 // 2)  # 간단한 막대그래프
            print(f"  {i:2d}. {구:8s}: {개수:2d}개 {bar}")
        
        # 2. 전화번호 보유율 분석  
        print(f"\n☎️  전화번호 정보:")
        전화있음 = df['TEL'].notna().sum()
        전화없음 = df['TEL'].isna().sum()
        보유율 = (전화있음 / len(df)) * 100
        
        print(f"  전화번호 있음: {전화있음}개 ({보유율:.1f}%)")
        print(f"  전화번호 없음: {전화없음}개 ({100-보유율:.1f}%)")
        
        # 3. 도서관명 분석 (키워드별 분류)
        print(f"\n📚 도서관 유형 분석:")
        유형별_개수 = {}
        
        키워드_매핑 = {
            '구립': '구립도서관',
            '시립': '시립도서관', 
            '작은': '작은도서관',
            '공공': '공공도서관',
            '어린이': '어린이도서관',
            '문화': '문화센터'
        }
        
        for 키워드, 유형 in 키워드_매핑.items():
            개수 = df['LBRRY_NAME'].str.contains(키워드, na=False).sum()
            if 개수 > 0:
                유형별_개수[유형] = 개수
        
        for 유형, 개수 in sorted(유형별_개수.items(), key=lambda x: x[1], reverse=True):
            print(f"  {유형}: {개수}개")
        
        # 4. 주소 분석 (동별 분포)
        print(f"\n🏘️  상위 5개 동 분포:")
        df['동'] = df['ADRES'].str.extract(r'([가-힣]+동)')
        동별_통계 = df['동'].value_counts().head()
        
        for 동, 개수 in 동별_통계.items():
            print(f"  {동}: {개수}개")
        
        # 5. 데이터 품질 체크
        print(f"\n📊 데이터 품질 분석:")
        결측치_통계 = df.isnull().sum()
        print("  결측치 현황:")
        for 컬럼, 결측수 in 결측치_통계.items():
            if 결측수 > 0:
                비율 = (결측수 / len(df)) * 100
                print(f"    {컬럼}: {결측수}개 ({비율:.1f}%)")
        
        return df
        
    except Exception as e:
        print(f"❌ 오류 발생: {e}")
        return None

# 실행
도서관_df = 도서관_데이터_심화분석()
```

### 💾 **JSON 데이터 저장 방식 비교**

```python
def JSON_저장방식_비교(df):
    """다양한 형식으로 JSON 데이터 저장하기"""
    
    if df is None:
        print("❌ DataFrame이 없습니다.")
        return
    
    print("\n💾 다양한 저장 방식 비교:")
    
    # 샘플 데이터 (처음 5개 행만)
    샘플_df = df.head()
    
    # 1. CSV 저장 (기본)
    샘플_df.to_csv('libraries.csv', index=False, encoding='utf-8')
    print("✅ CSV 저장 완료: libraries.csv")
    
    # 2. JSON 저장 (records 형식) - 가장 일반적
    샘플_df.to_json('libraries_records.json', 
                   orient='records', 
                   force_ascii=False, 
                   indent=2)
    print("✅ JSON 저장 완료 (records): libraries_records.json")
    
    # 3. JSON 저장 (index 형식)
    샘플_df.to_json('libraries_index.json', 
                   orient='index', 
                   force_ascii=False, 
                   indent=2)
    print("✅ JSON 저장 완료 (index): libraries_index.json")
    
    # 4. Excel 저장 (참고용)
    try:
        샘플_df.to_excel('libraries.xlsx', index=False)
        print("✅ Excel 저장 완료: libraries.xlsx")
    except:
        print("⚠️  Excel 저장 실패 (openpyxl 설치 필요)")
    
    # 저장된 JSON 파일 내용 확인
    print("\n📄 저장된 JSON 파일 미리보기:")
    try:
        with open('libraries_records.json', 'r', encoding='utf-8') as f:
            content = f.read()[:500]  # 처음 500자만
            print(f"  Records 형식:")
            print(f"  {content}...")
    except:
        print("  ❌ 파일 읽기 실패")

# 저장 방식 비교 실행
if 'df' in locals():
    JSON_저장방식_비교(도서관_df)
```

### 🔄 **JSON ↔ pandas 변환 완전정복**

```python
def JSON_pandas_변환_마스터():
    """JSON과 pandas 간 변환의 모든 것"""
    
    print("🔄 JSON ↔ pandas 변환 완전정복")
    print("="*50)
    
    # 다양한 JSON 구조 예제
    json_examples = {
        
        # 1. 단순한 레코드 형식
        "records": """[
            {"name": "강남도서관", "books": 50000, "visitors": 1200},
            {"name": "서초도서관", "books": 45000, "visitors": 1100}
        ]""",
        
        # 2. 중첩된 객체 구조
        "nested": """{
            "library_info": {
                "name": "중앙도서관",
                "location": {"city": "서울", "district": "중구"},
                "stats": {"books": 100000, "members": 5000}
            }
        }""",
        
        # 3. 배열 안에 객체들
        "complex": """{
            "libraries": [
                {
                    "name": "강남도서관",
                    "facilities": ["열람실", "컴퓨터실"],
                    "hours": {"weekday": "09-22", "weekend": "09-17"}
                }
            ]
        }"""
    }
    
    for 형식, json_str in json_examples.items():
        print(f"\n📚 {형식.upper()} 형식 처리:")
        
        try:
            data = json.loads(json_str)
            
            if 형식 == "records":
                # 직접 DataFrame으로 변환 가능
                df = pd.DataFrame(data)
                print(f"  ✅ 변환 성공: {len(df)}행 {len(df.columns)}열")
                print(f"  컬럼: {list(df.columns)}")
                
            elif 형식 == "nested":
                # 중첩 구조는 평면화 필요
                library = data['library_info']
                flat_data = {
                    'name': library['name'],
                    'city': library['location']['city'],
                    'district': library['location']['district'],
                    'books': library['stats']['books'],
                    'members': library['stats']['members']
                }
                df = pd.DataFrame([flat_data])
                print(f"  ✅ 평면화 후 변환: {len(df)}행 {len(df.columns)}열")
                
            elif 형식 == "complex":
                # 배열 추출 후 처리
                libraries = data['libraries']
                flat_list = []
                for lib in libraries:
                    flat_lib = {
                        'name': lib['name'],
                        'facilities_count': len(lib['facilities']),
                        'facilities': ', '.join(lib['facilities']),
                        'weekday_hours': lib['hours']['weekday'],
                        'weekend_hours': lib['hours']['weekend']
                    }
                    flat_list.append(flat_lib)
                
                df = pd.DataFrame(flat_list)
                print(f"  ✅ 복잡한 구조 변환: {len(df)}행 {len(df.columns)}열")
            
            # 결과 미리보기
            if len(df) > 0:
                print(f"  미리보기:")
                for col in df.columns:
                    print(f"    {col}: {df[col].iloc[0]}")
                
        except Exception as e:
            print(f"  ❌ 변환 실패: {e}")

JSON_pandas_변환_마스터()
```

## 🎓 **JSON 마스터 체크리스트**

### ✅ **기본기 완전 정복했나요?**

```python
def JSON_실력_자가진단():
    """JSON 기초 실력을 체크해보세요!"""
    
    기초체크리스트 = [
        "✅ JSON이 뭔지 설명할 수 있다 (JavaScript Object Notation)",
        "✅ XML vs JSON 차이점과 장단점을 안다", 
        "✅ json.dumps()로 딕셔너리를 JSON 문자열로 변환할 수 있다",
        "✅ json.loads()로 JSON 문자열을 딕셔너리로 변환할 수 있다",
        "✅ 웹에서 JSON 데이터를 가져와서 파싱할 수 있다",
        "✅ pandas DataFrame으로 JSON 데이터를 변환할 수 있다",
        "✅ ensure_ascii=False로 한글 처리를 할 수 있다",
        "✅ JSON 파싱 에러를 try-except로 처리할 수 있다",
        "✅ 중첩된 JSON 구조에서 원하는 데이터를 추출할 수 있다",
        "✅ JSON 데이터를 CSV 파일로 저장할 수 있다"
    ]
    
    print("🎯 JSON 기초 마스터 체크리스트:")
    print("="*60)
    
    for i, 항목 in enumerate(기초체크리스트, 1):
        print(f"{i:2d}. {항목}")
    
    print(f"\n💡 10개 모두 체크했다면 JSON 기초 완료!")
    print(f"   이제 어떤 API든 자신 있게 다룰 수 있어요! 🚀")

JSON_실력_자가진단()
```

### 🔥 **실무에서 자주 하는 실수들**

```python
def JSON_자주하는_실수들():
    """JSON 처리할 때 자주 하는 실수와 해결책"""
    
    print("⚠️  JSON 처리 시 자주하는 실수들:")
    print("="*50)
    
    실수_예제들 = {
        
        "1. 한글 깨짐": {
            "실수": 'json.dumps({"이름": "김개발"})',
            "결과": '{"\\uc774\\ub984": "\\uae40\\uac1c\\ubc1c"}',
            "해결": 'json.dumps({"이름": "김개발"}, ensure_ascii=False)',
            "올바른결과": '{"이름": "김개발"}'
        },
        
        "2. 키 오타": {
            "실수": 'data["seoulLibraryTime"]["rows"]  # "row"가 정확함',
            "결과": 'KeyError: "rows"',
            "해결": 'data.get("seoulLibraryTime", {}).get("row", [])',
            "올바른결과": '안전하게 빈 리스트 반환'
        },
        
        "3. 타입 혼동": {
            "실수": 'json_string["name"]  # 문자열에서 인덱싱',
            "결과": 'TypeError 발생',
            "해결": 'json.loads(json_string)["name"]',
            "올바른결과": '정상적으로 값 추출'
        }
    }
    
    for 제목, 내용 in 실수_예제들.items():
        print(f"\n{제목}:")
        print(f"  ❌ 실수: {내용['실수']}")
        print(f"     결과: {내용['결과']}")
        print(f"  ✅ 해결: {내용['해결']}")
        print(f"     결과: {내용['올바른결과']}")

## 🚀 **다음 단계와 마무리**

### 📈 **이제 뭘 할 수 있게 되었나요?**

```python
def 우리가_배운_것들():
    """JSON 기초 강의를 통해 얻은 능력들"""
    
    새로운_능력들 = {
        "🔧 기술적 능력": [
            "JSON과 XML의 차이점을 이해하고 적절히 선택할 수 있음",
            "Python json 라이브러리로 인코딩/디코딩 자유자재로 활용",  
            "웹 API에서 JSON 데이터를 가져와서 처리할 수 있음",
            "복잡한 중첩 JSON 구조를 pandas로 변환할 수 있음",
            "JSON 데이터를 CSV, Excel 등 다양한 형식으로 저장 가능"
        ],
        
        "💼 실무 활용": [
            "공공데이터 포털의 JSON API 활용 가능",
            "소셜미디어, 뉴스, 날씨 등 실제 API 데이터 수집",
            "JSON 데이터로 간단한 대시보드 제작",
            "에러 처리와 예외 상황 대응 능력",
            "데이터 분석을 위한 전처리 작업"
        ],
        
        "🎯 다음 단계 준비": [
            "matplotlib으로 JSON 데이터 시각화 준비 완료",
            "머신러닝 데이터 전처리 기초 완성",
            "웹 개발에서 API 연동 기초 습득",
            "빅데이터 처리를 위한 기반 마련",
            "실무 프로젝트 진행 가능한 수준"
        ]
    }
    
    print("🎉 JSON 기초 완료! 이제 여러분은...")
    print("="*60)
    
    for 카테고리, 능력목록 in 새로운_능력들.items():
        print(f"\n{카테고리}:")
        for 능력 in 능력목록:
            print(f"  ✅ {능력}")

우리가_배운_것들()
```

### 🔮 **다음 강의 예고: 17.05 matplotlib 시각화**

```python
def 다음_강의_미리보기():
    """JSON에서 수집한 데이터를 이쁘게 시각화해보자!"""
    
    print("\n🎨 다음 강의: matplotlib으로 데이터 시각화")
    print("="*60)
    
    시각화_예제들 = [
        "📊 서울시 도서관 분포 막대그래프",
        "🥧 구별 도서관 비율 파이차트", 
        "📈 시간별 API 호출량 선그래프",
        "🗺️ 지역별 데이터 분포 히트맵",
        "📋 JSON 데이터 기반 대시보드"
    ]
    
    print("🚀 만들어볼 시각화들:")
    for 예제 in 시각화_예제들:
        print(f"  {예제}")
    
    print(f"\n💡 핵심 포인트:")
    print(f"  📥 JSON으로 데이터 수집")
    print(f"  🔄 pandas로 데이터 정제")
    print(f"  🎨 matplotlib으로 시각화")
    print(f"  📊 인사이트 도출")
    
    print(f"\n🎯 목표: 데이터 수집부터 시각화까지 완전 정복!")

다음_강의_미리보기()
```

### 🏆 **최종 실습 과제**

```python
def 최종_실습과제():
    """JSON 기초를 완전히 마스터했는지 확인하는 과제"""
    
    print("\n🏆 최종 실습 과제")
    print("="*60)
    
    과제목록 = {
        "🥉 브론즈 레벨": [
            "서울시 도서관 JSON 데이터를 불러와서 pandas DataFrame으로 변환",
            "구별 도서관 수를 계산해서 상위 5개 구 출력",
            "전화번호가 없는 도서관 목록을 CSV로 저장"
        ],
        
        "🥈 실버 레벨": [
            "다른 공공데이터 JSON API를 찾아서 데이터 수집",
            "수집한 데이터의 기본 통계 분석 수행",
            "결과를 JSON 형식으로 저장하는 함수 작성"
        ],
        
        "🥇 골드 레벨": [
            "2개 이상의 다른 JSON API 데이터를 결합 분석",
            "중첩된 복잡한 JSON 구조를 평면화하는 함수 개발",
            "에러 처리가 완벽한 JSON 데이터 수집기 클래스 제작"
        ]
    }
    
    for 레벨, 과제들 in 과제목록.items():
        print(f"\n{레벨}:")
        for i, 과제 in enumerate(과제들, 1):
            print(f"  {i}. {과제}")
    
    print(f"\n💪 모든 레벨을 완료하면 JSON 마스터 인증!")
    print(f"🎉 준비됐으면 다음 강의로 GO GO!")

최종_실습과제()
```

### 📚 **참고 자료 및 추천 API**

```python
def 추천_학습자료():
    """JSON 학습을 위한 추천 자료들"""
    
    print("\n📚 JSON 추가 학습 자료")
    print("="*60)
    
    추천자료 = {
        "🌐 무료 JSON API들": [
            "공공데이터포털: https://data.go.kr",
            "서울 열린데이터: https://data.seoul.go.kr",
            "JSONPlaceholder: https://jsonplaceholder.typicode.com",
            "OpenWeatherMap: https://openweathermap.org/api",
            "GitHub API: https://docs.github.com/en/rest"
        ],
        
        "🛠️ JSON 도구들": [
            "JSON 검증: https://jsonlint.com",
            "JSON 포매터: https://jsonformatter.org",
            "JSON to CSV: https://json-csv.com",
            "API 테스트: https://httpbin.org",
            "Postman: API 테스트 도구"
        ],
        
        "📖 심화 학습": [
            "JSON Schema 검증",
            "JSONPath 표현식",
            "JSONL (JSON Lines) 형식",
            "REST API 설계 원칙",
            "GraphQL vs REST API"
        ]
    }
    
    for 카테고리, 목록 in 추천자료.items():
        print(f"\n{카테고리}:")
        for 항목 in 목록:
            print(f"  • {항목}")

추천_학습자료()
```

---

## 💪 **JSON 마스터 완료!**

축하합니다! 🎉 이제 여러분은:

### ✅ **완료한 것들**
- **JSON 기본 개념** 완전 이해  
- **Python json 라이브러리** 자유자재 활용
- **웹 API JSON 데이터** 수집 능력
- **pandas 연동** 및 데이터 분석 기초
- **에러 처리** 및 **데이터 검증** 능력

### 🚀 **이제 할 수 있는 것들**
- 📊 **어떤 API든** 자신 있게 데이터 수집
- 🔄 **복잡한 JSON 구조**도 쉽게 처리  
- 💾 **다양한 형식**으로 데이터 저장
- 📈 **시각화**를 위한 데이터 전처리
- 💼 **실무 프로젝트** 진행 가능

### 🎯 **다음 목표**
**17.05 matplotlib 시각화**에서 수집한 JSON 데이터를 아름다운 차트로 만들어보세요!

**데이터 수집(JSON)** + **데이터 처리(pandas)** + **데이터 시각화(matplotlib)** = **완벽한 데이터 분석가** 🏆

---

**이제 정말로 API의 세계가 여러분 것입니다!** 🌍✨쉬운 형태로 변환"""
        
        평면화된_트랙들 = []
        
        for playlist in spotify_data['playlists']['items']:
            playlist_name = playlist['name']
            
            for item in playlist['tracks']['items']:
                track = item['track']
                
                평면_트랙 = {
                    '플레이리스트': playlist_name,
                    '트랙ID': track['id'],
                    '곡명': track['name'],
                    '아티스트': track['artists'][0]['name'],
                    '앨범': track['album']['name'],
                    '발매일': track['album']['release_date'],
                    '길이_초': track['duration_ms'] // 1000,
                    '인기도': track['popularity'],
                    '댄스가능성': track['audio_features']['danceability'],
                    '에너지': track['audio_features']['energy'],
                    '긍정성': track['audio_features']['valence'],
                    '템포': track['audio_features']['tempo']
                }
                
                평면화된_트랙들.append(평면_트랙)
        
        return pd.DataFrame(평면화된_트랙들)
    
    def 음악_특성_분석(self, df):
        """음악의 오디오 특성 분석"""
        
        print("🎵 음악 특성 분석 결과:")
        print("="*50)
        
        # 기본 통계
        특성_컬럼들 = ['댄스가능성', '에너지', '긍정성', '템포', '인기도']
        음악통계 = df[특성_컬럼들].describe().round(2)
        print("📊 음악 특성 통계:")
        print(음악통계)
        
        # 가장 댄서블한 곡
        가장_댄서블 = df.loc[df['댄스가능성'].idxmax()]
        print(f"\n💃 가장 댄서블한 곡: {가장_댄서블['곡명']} - {가장_댄서블['아티스트']}")
        print(f"   댄스가능성: {가장_댄서블['댄스가능성']}")
        
        # 가장 에너지 넘치는 곡
        가장_에너지 = df.loc[df['에너지'].idxmax()]
        print(f"\n⚡ 가장 에너지 넘치는 곡: {가장_에너지['곡명']} - {가장_에너지['아티스트']}")
        print(f"   에너지: {가장_에너지['에너지']}")
        
        # 템포 분석
        평균_템포 = df['템포'].mean()
        print(f"\n🎼 평균 템포: {평균_템포:.1f} BPM")
        
        # 상관관계 분석
        print("\n🔗 특성 간 상관관계:")
        상관관계 = df[['댄스가능성', '에너지', '긍정성', '인기도']].corr().round(2)
        print(상관관계)
        
        return 음악통계, 상관관계

# 🎵 음악 데이터 분석 실행
음악분석기 = 음악데이터분석기()

print("🎼 Spotify 스타일 JSON 데이터 생성...")
spotify_json = 음악분석기.Spotify_스타일_데이터_생성()

print("🔄 JSON 데이터를 DataFrame으로 변환...")
음악df = 음악분석기.음악_데이터_평면화(spotify_json)
print(음악df.head())

print("\n🎵 음악 특성 분석 시작...")
통계, 상관관계 = 음악분석기.음악_특성_분석(음악df)
```

---

## 🛠️ **JSON 처리 고급 기법**

### ⚡ **성능 최적화 팁**

```python
import ijson  # 대용량 JSON 스트리밍 처리용
import orjson  # 초고속 JSON 라이브러리

def 대용량JSON_처리_비교():
    """다양한 JSON 처리 방법의 성능 비교"""
    
    # 큰 JSON 데이터 생성 (시뮬레이션)
    큰_데이터 = {
        "users": [
            {
                "id": i,
                "name": f"사용자{i}",
                "transactions": [
                    {"amount": j * 1000, "date": f"2024-{j:02d}-01"}
                    for j in range(1, 13)  # 12개월 데이터
                ]
            }
            for i in range(1000)  # 1000명 사용자
        ]
    }
    
    import time
    
    # 1. 표준 json 라이브러리
    start = time.time()
    json_문자열 = json.dumps(큰_데이터)
    표준_인코딩시간 = time.time() - start
    
    start = time.time()
    복원_데이터 = json.loads(json_문자열)
    표준_디코딩시간 = time.time() - start
    
    print("⚡ JSON 처리 성능 비교:")
    print(f"   표준 json - 인코딩: {표준_인코딩시간:.4f}초")
    print(f"   표준 json - 디코딩: {표준_디코딩시간:.4f}초")
    print(f"   데이터 크기: {len(json_문자열):,} 바이트")
    
    # 메모리 효율적인 처리 방법
    def 스트림_방식_처리(데이터):
        """큰 JSON을 스트림 방식으로 처리"""
        사용자_수 = len(데이터['users'])
        총_거래액 = 0
        
        for 사용자 in 데이터['users']:
            for 거래 in 사용자['transactions']:
                총_거래액 += 거래['amount']
        
        return 사용자_수, 총_거래액
    
    start = time.time()
    사용자수, 총거래액 = 스트림_방식_처리(복원_데이터)
    처리시간 = time.time() - start
    
    print(f"\n📊 데이터 분석 결과:")
    print(f"   총 사용자 수: {사용자수:,}명")
    print(f"   총 거래액: {총거래액:,}원")
    print(f"   처리 시간: {처리시간:.4f}초")

# 실행
대용량JSON_처리_비교()
```

### 🔒 **JSON 보안 및 검증**

```python
from jsonschema import validate, ValidationError

def JSON_스키마_검증():
    """JSON 데이터의 구조와 타입을 검증"""
    
    # 사용자 데이터 스키마 정의
    사용자_스키마 = {
        "type": "object",
        "properties": {
            "name": {"type": "string", "minLength": 1},
            "age": {"type": "integer", "minimum": 0, "maximum": 150},
            "email": {"type": "string", "format": "email"},
            "skills": {
                "type": "array",
                "items": {"type": "string"},
                "minItems": 1
            },
            "is_active": {"type": "boolean"}
        },
        "required": ["name", "age", "email"],
        "additionalProperties": False
    }
    
    # 검증할 데이터들
    테스트_데이터들 = [
        # ✅ 올바른 데이터
        {
            "name": "김개발",
            "age": 28,
            "email": "kim@example.com",
            "skills": ["Python", "JSON"],
            "is_active": True
        },
        
        # ❌ 잘못된 데이터들
        {
            "name": "",  # 빈 문자열
            "age": -5,   # 음수
            "email": "잘못된이메일",  # 이메일 형식 아님
            "skills": [],  # 빈 배열
        },
        
        {
            "age": 30,  # name이 누락됨
            "email": "test@example.com",
            "extra_field": "허용되지 않는 필드"
        }
    ]
    
    print("🔒 JSON 스키마 검증 결과:")
    print("="*50)
    
    for i, 데이터 in enumerate(테스트_데이터들, 1):
        try:
            validate(instance=데이터, schema=사용자_스키마)
            print(f"✅ 데이터 {i}: 검증 통과")
            print(f"   이름: {데이터.get('name', 'N/A')}")
            
        except ValidationError as e:
            print(f"❌ 데이터 {i}: 검증 실패")
            print(f"   오류: {e.message}")
            print(f"   경로: {' → '.join(str(p) for p in e.path)}")
        
        print()

# 실행 (jsonschema 설치 필요: pip install jsonschema)
# JSON_스키마_검증()
```

---

## 📈 **JSON 데이터 시각화**

```python
def JSON_데이터_시각화_예제():
    """수집한 JSON 데이터를 시각화"""
    
    # 실제 API에서 받은 것처럼 시뮬레이션
    api_응답 = {
        "sales_data": {
            "monthly": [
                {"month": "2024-01", "sales": 1200000, "customers": 450},
                {"month": "2024-02", "sales": 1350000, "customers": 520},
                {"month": "2024-03", "sales": 1100000, "customers": 380},
                {"month": "2024-04", "sales": 1580000, "customers": 680},
                {"month": "2024-05", "sales": 1750000, "customers": 750},
                {"month": "2024-06", "sales": 1920000, "customers": 820},
            ],
            "by_category": [
                {"category": "전자제품", "sales": 4500000, "percentage": 45},
                {"category": "의류", "sales": 2800000, "percentage": 28}, 
                {"category": "도서", "sales": 1500000, "percentage": 15},
                {"category": "기타", "sales": 1200000, "percentage": 12}
            ]
        }
    }
    
    # JSON → DataFrame 변환
    월별_데이터 = pd.DataFrame(api_응답['sales_data']['monthly'])
    카테고리_데이터 = pd.DataFrame(api_응답['sales_data']['by_category'])
    
    # 월별 매출 추세 분석
    월별_데이터['month'] = pd.to_datetime(월별_데이터['month'])
    월별_데이터['growth_rate'] = 월별_데이터['sales'].pct_change() * 100
    
    print("📊 JSON 데이터 시각화 분석:")
    print("="*50)
    
    print("📈 월별 매출 데이터:")
    for _, row in 월별_데이터.iterrows():
        month = row['month'].strftime('%Y년 %m월')
        sales = f"{row['sales']:,}원"
        customers = f"{row['customers']:,}명"
        growth = f"{row['growth_rate']:.1f}%" if not pd.isna(row['growth_rate']) else "N/A"
        print(f"   {month}: {sales} (고객 {customers}, 성장률 {growth})")
    
    print("\n🥧 카테고리별 매출 분포:")
    for _, row in 카테고리_데이터.iterrows():
        category = row['category']
        sales = f"{row['sales']:,}원"
        percentage = f"{row['percentage']}%"
        bar = '█' * (row['percentage'] // 2)
        print(f"   {category:6s}: {sales:>12s} ({percentage:>3s}) {bar}")
    
    # 간단한 통계 분석
    총매출 = 카테고리_데이터['sales'].sum()
    평균월매출 = 월별_데이터['sales'].mean()
    최고성장률 = 월별_데이터['growth_rate'].max()
    
    print(f"\n📊 주요 지표:")
    print(f"   총 매출액: {총매출:,}원")
    print(f"   월평균 매출: {평균월매출:,.0f}원") 
    print(f"   최고 성장률: {최고성장률:.1f}%")
    
    return 월별_데이터, 카테고리_데이터

# 실행
월별df, 카테고리df = JSON_데이터_시각화_예제()
```

---

## 🎓 **JSON 마스터를 위한 체크리스트**

### ✅ **필수 스킬 체크**

```python
def JSON_실력_자가진단():
    """JSON 처리 실력을 자가 진단해보세요"""
    
    체크리스트 = [
        "✅ JSON 기본 문법 (객체, 배열, 문자열, 숫자, 불린, null) 완벽 이해",
        "✅ json.dumps()와 json.loads() 차이점과 활용법",
        "✅ ensure_ascii=False, indent 옵션 사용",
        "✅ requests.json() 메서드로 API 응답 처리",
        "✅ 중첩된 JSON 구조에서 필요한 데이터 추출",
        "✅ JSON을 pandas DataFrame으로 변환",
        "✅ JSON 스키마 검증과 에러 처리",
        "✅ 대용량 JSON 파일 효율적 처리",
        "✅ JSON 데이터를 CSV, Excel로 변환",
        "✅ 실제 API (날씨, 뉴스, 소셜미디어)에서 데이터 수집"
    ]
    
    print("🎯 JSON 마스터 체크리스트:")
    print("="*60)
    
    for i, 항목 in enumerate(체크리스트, 1):
        print(f"{i:2d}. {항목}")
    
    print("\n💡 모든 항목을 체크했다면 당신은 JSON 마스터입니다!")
    print("   실무에서 자신 있게 API 데이터를 다룰 수 있어요! 🚀")

# 자가진단 실행
JSON_실력_자가진단()
```

---

## 🚀 **다음 단계 로드맵**

### 📅 **17.04.02 예정: JSON API 심화**
- OAuth 인증이 필요한 API 다루기
- GraphQL과 REST API 비교
- 실시간 WebSocket JSON 처리
- JSON API 응답 캐싱 전략

### 💼 **실무 프로젝트 아이디어**
1. **소셜미디어 분석 대시보드** - Instagram/Twitter API
2. **부동산 시세 모니터링** - 공공데이터 API
3. **주식 포트폴리오 관리** - 금융 API 연동
4. **날씨 기반 추천 시스템** - 기상청 API + ML

---

## 💪 **마무리: JSON의 진짜 파워**

JSON은 단순한 데이터 형식이 아닙니다. **현대 웹 개발의 혈관**이자, **데이터 분석의 시작점**입니다.

**XML에서 배운 구조적 사고** + **JSON의 간결함** = **최강의 데이터 처리 능력**

이제 여러분은:
- 🌐 어떤 API든 자신 있게 다룰 수 있고
- 📊 복잡한 JSON 구조도 쉽게 분석할 수 있으며  
- 🚀 실무에서 바로 활용 가능한 실전 스킸을 갖췄습니다!

**다음 강의에서는 이 모든 것을 시각화로 완성합니다.** `matplotlib`으로 데이터를 아름답게 표현하는 방법을 배워봅시다! 🎨📈